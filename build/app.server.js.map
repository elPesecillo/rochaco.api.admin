{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api/ApiService.js","webpack:///./src/api/ApiUtils.js","webpack:///./src/app.js","webpack:///./src/constants/menusConfig.js","webpack:///./src/constants/types.js","webpack:///./src/controllers/analytics.js","webpack:///./src/controllers/blobFiles.js","webpack:///./src/controllers/handleFile.js","webpack:///./src/controllers/menus.js","webpack:///./src/controllers/notification.js","webpack:///./src/controllers/postalCodes.js","webpack:///./src/controllers/pushNotification.js","webpack:///./src/controllers/signup.js","webpack:///./src/controllers/siteAuth.js","webpack:///./src/controllers/suburb.js","webpack:///./src/controllers/userAdmin.js","webpack:///./src/controllers/vision.js","webpack:///./src/logic/addressService.js","webpack:///./src/logic/auth.js","webpack:///./src/logic/blobService.js","webpack:///./src/logic/menuService.js","webpack:///./src/logic/notificationService.js","webpack:///./src/logic/postalCodeService.js","webpack:///./src/logic/pushNotificationService.js","webpack:///./src/logic/suburbService.js","webpack:///./src/logic/userService.js","webpack:///./src/logic/viewPermissions.js","webpack:///./src/middleware/auth.js","webpack:///./src/models/Address.js","webpack:///./src/models/Notification.js","webpack:///./src/models/globalConfig.js","webpack:///./src/models/index.js","webpack:///./src/models/menu.js","webpack:///./src/models/postalCode.js","webpack:///./src/models/role.js","webpack:///./src/models/schemas/AttachmentSchema.js","webpack:///./src/models/schemas/RFIdSchema.js","webpack:///./src/models/schemas/config/childMenuSchema.js","webpack:///./src/models/schemas/config/dropdownSchema.js","webpack:///./src/models/schemas/config/fieldSchema.js","webpack:///./src/models/schemas/config/menuSchema.js","webpack:///./src/models/schemas/config/screenSchema.js","webpack:///./src/models/schemas/guestSchema.js","webpack:///./src/models/schemas/pushTokenSchema.js","webpack:///./src/models/schemas/suburbFileSchema.js","webpack:///./src/models/schemas/suburbStatusSchema.js","webpack:///./src/models/suburb.js","webpack:///./src/models/suburbConfig.js","webpack:///./src/models/suburbInvite.js","webpack:///./src/models/suburbStreet.js","webpack:///./src/models/user.js","webpack:///./src/routes/apiRoutes.js","webpack:///./src/routes/helpers.js","webpack:///./src/routes/router.js","webpack:///./src/server.js","webpack:///external \"@azure/cognitiveservices-computervision\"","webpack:///external \"@azure/ms-rest-azure-js\"","webpack:///external \"@sendgrid/mail\"","webpack:///external \"axios\"","webpack:///external \"base-64\"","webpack:///external \"bcryptjs\"","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"crypto-js\"","webpack:///external \"debug\"","webpack:///external \"dotenv\"","webpack:///external \"dropbox-v2-api\"","webpack:///external \"expo-server-sdk\"","webpack:///external \"express\"","webpack:///external \"express-http-proxy\"","webpack:///external \"fs\"","webpack:///external \"http\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"moment\"","webpack:///external \"mongoose\"","webpack:///external \"morgan\"","webpack:///external \"multer\"","webpack:///external \"request\""],"names":["axios","require","handleError","handleResponse","httpRequest","method","url","request","_headers","hdrs","data","headers","then","res","result","Promise","resolve","catch","err","reject","get","queryString","Object","keys","length","len","cnt","key","toString","deleteRequest","post","put","patch","postForm","formData","module","exports","delete","response","status","statusText","error","Error","console","dotenv","express","logger","bodyParser","cors","config","connectDb","router","app","use","urlencoded","extended","json","limit","userType","userTypes","menus","name","path","icon","visible","validUserTypes","guard","suburbAdmin","admin","guest","neighbor","order","suburbStatus","description","Api","apiAnalytics","process","env","API_ANALYTICS_URL","apiKey","API_ANALYTICS_KEY","getSuburbVisits","req","suburbId","startDate","endDate","offset","query","code","success","message","apiUrl","API_BLOB_URL","API_BLOB_KEY","User","uploadBlobs","pipe","body","log","concat","errorMessage","exception","statusCode","updateUserPicture","userId","JSON","parse","userServices","suburbService","fs","dropboxV2Api","sgMail","getFileName","nodeFileName","originalName","idx","lastIndexOf","substring","uploadFileDropbox","file","dropbox","authenticate","token","DROPBOX_TOKEN","resource","parameters","filename","originalname","readStream","createReadStream","destination","base64_encode","file_path","bitmap","readFileSync","Buffer","from","getEmailAttachments","files","attachments","forEach","push","content","sendEmail","user","suburb","setApiKey","SENDGRID_API_KEY","msg","to","OWNER_EMAILS","split","subject","text","html","send","ex","deleteTemporaryFiles","unlink","processFileUpload","lastName","cellphone","email","postalCode","section","suburbName","recaptchaToken","validCaptcha","validateRecaptcha","proms","uploadedFiles","all","saveSuburb","location","active","userAdmins","getSuburbStatus","map","fil","fileName","actionType","mimetype","updateUser","_id","id","uploadFile","next","processFiles","sendTempPassEmail","tempPassword","menuService","getMenusByUser","notificationService","UploadBlob","NOTIFICATIONS_CONTAINER","Save","title","level","users","sendSuburbNotification","uri","buffer","SendSuburbNotification","Delete","notificationId","GetById","GetBySuburbId","minDate","GetByUserId","postalCodeService","getPostalCodeInfo","getCPInfo","pushNotificationService","getUserLeanById","getAdminUsers","getUsersByAddressId","getUsersBySuburb","moment","NOTIFICATION_DEFAULT_SOUND","NOTIFICATION_INFO_LEVEL","NOTIFICATION_ARRIVE_TITLE","NOTIFICATION_UPLOAD_PAYMENT_TITLE","NOTIFICATION_UPDATE_PAYMENT_TITLE","NOTIFICATION_UPDATE_RESERVATION","NOTIFICATION_NEW_SURVEY","sendTestNotification","sendPushNotification","sound","withSome","subtitle","sendArriveNotification","pushTokens","t","metadata","isService","redirect","sendUploadPaymentNotification","paymentType","street","streetNumber","stack","screen","props","promises","u","sendNotifications","sendApproveRejectedPaymentNotification","addressId","comment","paymentName","filter","sendNewSpaceReservationNotification","reservationId","adminUsers","getReservationStatusMessage","sendApproveRejectedReservationNotification","sendNewSurveyNotification","surveyName","expirationDate","activeUsers","userPushTokensArrays","rawUserPushTokens","apply","userPushTokens","reduce","acc","cur","indexOf","format","pushToken","signUp","undefined","facebookId","googleId","appleId","password","loginName","saveFacebookUser","saveGoogleUser","saveAppleUser","saveEmailUser","viewPermissions","default","validateActiveUser","validateUser","userLogin","isTemporary","getLogin","login","validPass","validatePassword","generateUserToken","succes","internalAuth","checkAuth","captchaToken","usr","userData","toObject","createdAt","transtime","getTokenByFacebookId","getUserByFacebookId","_doc","getTokenByGoogleId","getUserByGoogleId","getTokenByAppleId","getUserByAppleId","isValidToken","isValid","valid","validateTokenPath","permissionValid","logOff","session","destroy","addressService","userService","ObjectId","Types","approveReject","newStatus","details","getSuburbById","addStatus","suburbAddStatus","utc","getSuburbByAdminId","getSuburbByAdminUser","addSuburbInvite","getSuburbInvite","invite","getStreets","streets","distinctStreets","Set","s","getStreetNumbers","getUsersBySuburbStreet","streetNumbers","distinctStreetNumbers","saveSuburbConfig","sub","getSuburbConfig","saveSuburbStreet","getSuburbStreets","migrateAddresses","test","getAddressesBySuburbId","getAddressesWithUsersStates","addresses","addressesInfo","a","usersAddress","address","ua","limited","setLimitedUsersByAddress","changeLimited","getSuburbAutomationInfo","some","rfids","flat","SuburbInvite","handleFile","resV","saveUser","userConfirmed","resSave","photoUrl","updated","saveUserWithPassword","generateTempPassword","tempPass","updateTempPassword","sendMail","createUserByType","params","saveUserBySuburbId","getcode","GetInviteByCode","save","trim","updateCode","UpdateSuburbInviteUsed","getUserByType","getUserInfo","getUserByToken","getUserById","getUserFavs","userFavs","getUserFavorites","addUserFavs","favs","saveUserFavorites","removeUserFavs","removeUserFavorites","addUserPushToken","getUsersByAddress","deleteUserInfo","removeUserInfo","getSignedUserTerms","signedUserTerms","isPasswordTemp","buff","decodedPassword","isPassTemp","updatePassword","buff2","decodedTempPassword","updateCurrentPassword","currentPassword","newPassword","signUserTerms","termsVersion","update","updateUserType","enableDisableUser","enabled","getIfUserIsLimited","isLimited","addUserRfid","rfid","removeUserRfid","ComputerVisionClient","CognitiveServicesCredentials","computerVisionKey","VISION_KEY","computerVisionEndPoint","VISION_ENDPOINT","processOCR","cognitiveServiceCredentials","client","options","recognizePrintedTextInStream","Address","Suburb","suburbAddresses","GetSuburbStreets","SaveSuburbStreet","numbers","savedAddresses","suburbUsers","updateUserPromises","number","saveUsers","GetStreetsBySuburb","getAddressByNameAndNumber","streetName","GetAddressByNameAndNumber","GetAddressesBySuburb","openApi","apiWithKey","protectedApi","Auth","validateToken","def","validateAdminUser","getPayload","getTokenPayload","payload","isOpenApi","apiPath","isApiWithKey","isProtectedApi","validateApiRequest","PROTECTED_API_KEY","secretKey","RECAPTCHA_SECRET","verificationURL","captchaResult","ApiBlobUrl","ApiBlobKey","container","userToken","userMenus","menu","types","g","toLowerCase","item","errP","notificationModel","suburbNotifications","userNotifications","allNotifications","notificationsWithoutUsers","rest","sort","b","PostalCode","getInfo","cp","Expo","expo","DIFFERENT_PROJECTS_ERROR_MESSAGE","getMessagesBatches","validTokens","tokens","currentToken","isExpoPushToken","messages","chunkPushNotifications","sendExpoNotification","chunks","tickets","chunk","ticketChunk","sendPushNotificationsAsync","diffProjectsTickets","handlePushNotificationsFromDifferentProjects","projects","notifications","projectChunks","projectTokens","projectNotifications","find","notification","projectChunk","checkTickets","receiptIds","ticket","receiptIdChunks","chunkPushNotificationReceiptIds","receipts","getPushNotificationReceiptsAsync","receiptId","SuburbConfig","SuburbStreet","CryptoJS","pjson","Mongoose","statusName","st","encryption","AES","encrypt","cryptoKey","decryption","bytes","decrypt","enc","Utf8","suburbObj","SaveSuburb","UpdateStatus","suburbAddStatusByName","UpdateStatusByName","GetSuburbByUserId","GetSuburb","_code","Math","random","toUpperCase","SaveSuburbInvite","subInv","AddSuburbInvite","subInvite","GetSuburbBasicInfo","sucess","suburbData","saveConfig","SaveConfig","SaveSuburbConfig","updateConfig","UpdateConfig","GetSuburbConfig","selectedStreet","saveStreet","SaveStreet","updateStreet","UpdateStreet","GlobalConfig","AddressService","userObj","resG","score","encryptPassword","resEncrypt","encryptedPassword","hash","findById","isPasTemp","updatePass","terms","GetTermsAndCons","userTerms","signedTerms","latestTerms","parseFloat","i","n","signed","updateTerms","updateUserTerms","permissions","validateWithPayload","validPath","p","toLocaleLowerCase","jwt","validApiRequest","auth","stringify","checkApiAuth","baseUrl","mongoose","AddressSchema","Schema","type","String","Date","statics","insertMany","value","lean","exec","existing","e","findOne","model","AttachmentSchema","NotificationSchema","enum","Mixed","ref","notificationObject","deleteOne","add","$gte","$exists","$size","$elemMatch","$in","Notification","GlobalConfigSchema","termsAndConditions","Decimal128","SaveInitialConfig","Menu","Role","models","mongooseConnection","connect","DB_CONNECTION","useNewUrlParser","useUnifiedTopology","connection","on","bind","MenuSchema","required","link","parentId","position","Number","Boolean","getMenuById","menuId","updateMenu","objMenu","$set","deleteMenu","deleteMany","getChildMenus","getChildMenusRecursively","parents","_this","getThisLevelChilds","elements","childs","child","getInnerChilds","getParentMenusRecursively","getThisLevel","getMoreParents","getMenus","PostalCodeSchema","d_codigo","d_asenta","d_tipo_asenta","D_mnpio","d_estado","d_ciudad","d_CP","c_estado","c_oficina","c_CP","c_tipo_asenta","c_mnpio","id_asenta_cpcons","d_zona","c_cve_ciudad","regCp","RegExp","RoleSchema","siteAdministration","sysAdministrator","deleteRole","roleId","setRoleMenu","Array","isArray","$addToSet","$each","multi","deleteRoleMenu","roles","$pullAll","getRoleMenus","populate","transTime","RFIdSchema","ChildMenuSchema","label","color","navigate","isHome","iconName","iconFamily","DropdownSchema","FieldSchema","field","mandatory","mandatoryMessage","childMenus","ScreenSchema","fields","GuestSchema","vehicle","plates","additionalInformation","arriveOn","leaveOn","count","PushTokenSchema","SuburbFileSchema","SuburbStatusSchema","suburbConfig","suburbStreet","SuburbSchema","suburbInvites","updateOne","userInviteId","GetSuburbByName","configId","streetId","SuburbConfigSchema","imageUrl","screens","SuburbInviteSchema","usedBy","updatedTranstime","userInviteObj","userInvite","$and","suburbStreetSchema","bcrypt","base64","UserSchema","unique","loginAttempts","temporaryDisabled","disabledSince","lastAccess","favorites","limitedSince","limitedReason","_secretKey","JWT_SECRET","_getExpDate","expTimeByMin","EXP_TOKEN","unix","_getValidApis","_getValidMenus","_validateExpDate","expDate","currentTime","methods","_password","pass","decode","compareValue","wait","getDisabledSince","increaseLoginAttempts","compare","start","end","diff","reset","_suburb","userName","exp","validApis","sign","setUserRole","deleteUserRole","getUserRoles","getCleanResult","mergeArrayObjects","currentFavs","newFavs","firstMerge","assign","a2","fm","items","slice","mergePushTokens","currentPushTokens","newPushToken","exists","extractUsersFromDoc","mUsers","_loginName","_facebookId","_googleId","_appleId","mergedFavs","findOneAndUpdate","new","filterFavs","f","mergedPushTokens","objUser","rfId","currentRfids","mergedRfids","filteredRfids","_token","verify","decoded","saltRounds","genSalt","salt","select","_user","HashPassword","encode","tempHashPassword","Router","siteAuth","postalCodes","signup","handleFiles","multer","pushNotification","analytics","vision","upload","dest","upload2","userAdmin","any","blobFilesService","target","API_PAYMENTS_URL","pathRewrite","getMap","proxyMap","urlParts","foundMap","innerArray","Function","call","element","getQueryParams","queryParams","API_PAYMENTS_KEY","rewriteURL","protocol","host","completeUrl","regex","replaced","replace","proxy","apiRoutes","proxyReqPathResolver","redirectTo","debug","http","port","normalizePort","PORT","set","server","createServer","listen","onError","onListening","val","parseInt","isNaN","syscall","exit","addr"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;;;;;;AClFA,MAAMA,KAAK,GAAGC,mBAAO,CAAC,oBAAD,CAArB;;AACA,MAAM;AAAEC,aAAF;AAAeC;AAAf,IAAkCF,mBAAO,CAAC,yCAAD,CAA/C;;AAEA,MAAMG,WAAW,GAAG,CAACC,MAAD,EAASC,GAAT,EAAcC,OAAd,EAAuBC,QAAvB,KAAoC;AACtD,MAAIC,IAAI,GAAG,EAAE,GAAGD;AAAL,GAAX;AACA,SAAOR,KAAK,CAAC;AACXK,UADW;AAEXC,OAFW;AAGXI,QAAI,EAAEH,OAHK;AAIXI,WAAO,EAAEF;AAJE,GAAD,CAAL,CAMJG,IANI,CAMEC,GAAD,IAAS;AACb,UAAMC,MAAM,GAAGX,cAAc,CAACU,GAAD,CAA7B;AACA,WAAOE,OAAO,CAACC,OAAR,CAAgBF,MAAhB,CAAP;AACD,GATI,EAUJG,KAVI,CAUGC,GAAD,IAAS;AACd;AACA,WAAOH,OAAO,CAACI,MAAR,CAAejB,WAAW,CAACgB,GAAD,CAA1B,CAAP;AACD,GAbI,CAAP;AAcD,CAhBD;;AAkBA,MAAME,GAAG,GAAG,CAACd,GAAD,EAAMC,OAAN,EAAeI,OAAf,KAA2B;AACrC,MAAIU,WAAW,GAAG,EAAlB;;AACA,MAAId,OAAO,IAAIe,MAAM,CAACC,IAAP,CAAYhB,OAAZ,EAAqBiB,MAArB,GAA8B,CAA7C,EAAgD;AAC9CH,eAAW,IAAI,GAAf;AACA,QAAII,GAAG,GAAGH,MAAM,CAACC,IAAP,CAAYhB,OAAZ,EAAqBiB,MAA/B;AAAA,QACEE,GAAG,GAAG,CADR;;AAEA,SAAK,IAAIC,GAAT,IAAgBpB,OAAhB,EAAyB;AACvBmB,SAAG;AACHL,iBAAW,IAAK,GAAEM,GAAI,IAAGpB,OAAO,CAACoB,GAAD,CAAP,CAAaC,QAAb,EAAwB,EAAjD;AACA,UAAIH,GAAG,GAAGC,GAAV,EAAeL,WAAW,IAAI,GAAf;AAChB;AACF;;AACD,SAAOjB,WAAW,CAAC,KAAD,EAAS,GAAEE,GAAI,GAAEe,WAAY,EAA7B,EAAgC,IAAhC,EAAsCV,OAAtC,CAAlB;AACD,CAbD;;AAeA,MAAMkB,aAAa,GAAG,CAACvB,GAAD,EAAMC,OAAN,EAAeI,OAAf,KAA2B;AAC/C,SAAOP,WAAW,CAAC,QAAD,EAAWE,GAAX,EAAgBC,OAAhB,EAAyBI,OAAzB,CAAlB;AACD,CAFD;;AAIA,MAAMmB,IAAI,GAAG,CAACxB,GAAD,EAAMC,OAAN,EAAeI,OAAf,KAA2B;AACtC,SAAOP,WAAW,CAAC,MAAD,EAASE,GAAT,EAAcC,OAAd,EAAuBI,OAAvB,CAAlB;AACD,CAFD;;AAIA,MAAMoB,GAAG,GAAG,CAACzB,GAAD,EAAMC,OAAN,EAAeI,OAAf,KAA2B;AACrC,SAAOP,WAAW,CAAC,KAAD,EAAQE,GAAR,EAAaC,OAAb,EAAsBI,OAAtB,CAAlB;AACD,CAFD;;AAIA,MAAMqB,KAAK,GAAG,CAAC1B,GAAD,EAAMC,OAAN,EAAeI,OAAf,KAA2B;AACvC,SAAOP,WAAW,CAAC,OAAD,EAAUE,GAAV,EAAeC,OAAf,EAAwBI,OAAxB,CAAlB;AACD,CAFD;;AAIA,MAAMsB,QAAQ,GAAG,OAAO3B,GAAP,EAAY4B,QAAZ,EAAsBvB,OAAtB,KAAkC;AACjD,MAAI;AACF,QAAIF,IAAI,GAAG,EACT,GAAGE,OADM;AAET,sBAAgB;AAFP,KAAX;AAIA,QAAIE,GAAG,GAAG,MAAMb,KAAK,CAAC8B,IAAN,CAAWxB,GAAX,EAAgB4B,QAAhB,EAA0B;AAAEvB,aAAO,EAAEF;AAAX,KAA1B,CAAhB;AACA,WAAON,cAAc,CAACU,GAAD,CAArB;AACD,GAPD,CAOE,OAAOK,GAAP,EAAY;AACZ,WAAOhB,WAAW,CAACgB,GAAD,CAAlB;AACD;AACF,CAXD;;AAaAiB,MAAM,CAACC,OAAP,GAAiB;AACfhB,KADe;AAEfiB,QAAM,EAAER,aAFO;AAGfC,MAHe;AAIfG,UAJe;AAKfF,KALe;AAMfC;AANe,CAAjB,C;;;;;;;;;;;ACjEAI,OAAO,CAACjC,cAAR,GAA0BmC,QAAD,IAAc;AACrC,MACEA,QAAQ,CAACC,MAAT,KAAoB,GAApB,IACAD,QAAQ,CAACC,MAAT,KAAoB,GADpB,IAEAD,QAAQ,CAACE,UAAT,KAAwB,IAFxB,IAGAF,QAAQ,CAACE,UAAT,KAAwB,SAJ1B,EAME,OAAOF,QAAQ,CAAC5B,IAAhB;;AACF,MAAI4B,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B;AACA;AACA,UAAME,KAAK,GAAGH,QAAQ,CAACE,UAAT,EAAd;AACA,UAAM,IAAIE,KAAJ,CAAUD,KAAV,CAAN;AACD;;AACD,QAAM,IAAIC,KAAJ,CAAU,8BAAV,CAAN;AACD,CAfD,C,CAiBA;;;AACAN,OAAO,CAAClC,WAAR,GAAuBuC,KAAD,IAAW;AAC/B;AACAE,SAAO,CAACF,KAAR,CAAc,sBAAsBA,KAApC;AACA,SAAOA,KAAK,IAAIA,KAAK,CAACH,QAAf,IAA2BG,KAAK,CAACH,QAAN,CAAe5B,IAA1C,GACH+B,KAAK,CAACH,QAAN,CAAe5B,IADZ,GAEH+B,KAFJ;AAGD,CAND,C;;;;;;;;;;;AClBA,MAAMG,MAAM,GAAG3C,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM4C,OAAO,GAAG5C,mBAAO,CAAC,wBAAD,CAAvB;;AACA,MAAM6C,MAAM,GAAG7C,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM8C,UAAU,GAAG9C,mBAAO,CAAC,gCAAD,CAA1B;;AACA,MAAM+C,IAAI,GAAG/C,mBAAO,CAAC,kBAAD,CAApB;;AAEA2C,MAAM,CAACK,MAAP;;AAEA,MAAMC,SAAS,GAAGjD,mBAAO,CAAC,uCAAD,CAAP,CAAoBiD,SAAtC;;AACA,IAAIC,MAAM,GAAGlD,mBAAO,CAAC,+CAAD,CAApB;;AAGA,IAAImD,GAAG,GAAGP,OAAO,EAAjB;AAGAO,GAAG,CAACC,GAAJ,CAAQN,UAAU,CAACO,UAAX,CAAsB;AAAEC,UAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAH,GAAG,CAACC,GAAJ,CAAQN,UAAU,CAACS,IAAX,CAAgB;AAACC,OAAK,EAAE;AAAR,CAAhB,CAAR;AAGAL,GAAG,CAACC,GAAJ,CAAQR,OAAO,CAACW,IAAR,EAAR;AACAJ,GAAG,CAACC,GAAJ,CAAQL,IAAI,EAAZ;AAEAI,GAAG,CAACC,GAAJ,CAAQP,MAAM,CAAC,KAAD,CAAd;AACAM,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAaF,MAAb;AAEAD,SAAS;AAETf,MAAM,CAACC,OAAP,GAAiBgB,GAAjB,C;;;;;;;;;;;AC3BA,MAAMM,QAAQ,GAAGzD,mBAAO,CAAC,yCAAD,CAAP,CAAmB0D,SAApC;AAEA;;;;;AAGAvB,OAAO,CAACwB,KAAR,GAAgB,CACd;AACEC,MAAI,EAAE,WADR;AAEEC,MAAI,EAAE,eAFR;AAGEC,MAAI,EAAE,0BAHR;AAIEC,SAAO,EAAE,IAJX;AAKEC,gBAAc,EAAE,CACdP,QAAQ,CAACQ,KADK,EAEdR,QAAQ,CAACS,WAFK,EAGdT,QAAQ,CAACU,KAHK,EAIdV,QAAQ,CAACW,KAJK,EAKdX,QAAQ,CAACY,QALK,CALlB;AAYEC,OAAK,EAAE;AAZT,CADc,EAed;AACEV,MAAI,EAAE,SADR;AAEEC,MAAI,EAAE,gBAFR;AAGEC,MAAI,EAAE,sBAHR;AAIEC,SAAO,EAAE,IAJX;AAKEC,gBAAc,EAAE,CACdP,QAAQ,CAACQ,KADK,EAEdR,QAAQ,CAACS,WAFK,EAGdT,QAAQ,CAACU,KAHK,EAIdV,QAAQ,CAACW,KAJK,CALlB;AAWEE,OAAK,EAAE;AAXT,CAfc,EA4Bd;AACEV,MAAI,EAAE,UADR;AAEEC,MAAI,EAAE,iBAFR;AAGEC,MAAI,EAAE,kBAHR;AAIEC,SAAO,EAAE,IAJX;AAKEC,gBAAc,EAAE,CAACP,QAAQ,CAACW,KAAV,EAAiBX,QAAQ,CAACQ,KAA1B,EAAiCR,QAAQ,CAACU,KAA1C,CALlB;AAMEG,OAAK,EAAE;AANT,CA5Bc,EAoCd;AACEV,MAAI,EAAE,cADR;AAEEE,MAAI,EAAE,kBAFR;AAGED,MAAI,EAAE,sBAHR;AAIEE,SAAO,EAAE,KAJX;AAKEC,gBAAc,EAAE,CAACP,QAAQ,CAACS,WAAV,EAAuBT,QAAQ,CAACU,KAAhC,CALlB;AAMEG,OAAK,EAAE;AANT,CApCc,EA4Cd;AACEV,MAAI,EAAE,SADR;AAEEC,MAAI,EAAE,gBAFR;AAGEC,MAAI,EAAE,iBAHR;AAIEC,SAAO,EAAE,IAJX;AAKEC,gBAAc,EAAE,CAACP,QAAQ,CAACS,WAAV,EAAuBT,QAAQ,CAACU,KAAhC,CALlB;AAMEG,OAAK,EAAE;AANT,CA5Cc,EAoDd;AACEV,MAAI,EAAE,yBADR;AAEEC,MAAI,EAAE,iBAFR;AAGEC,MAAI,EAAE,iBAHR;AAIEC,SAAO,EAAE,IAJX;AAKEC,gBAAc,EAAE,CAACP,QAAQ,CAACS,WAAV,EAAuBT,QAAQ,CAACU,KAAhC,CALlB;AAMEG,OAAK,EAAE;AANT,CApDc,EA4Dd;AACEV,MAAI,EAAE,SADR;AAEEC,MAAI,EAAE,iBAFR;AAGEC,MAAI,EAAE,oBAHR;AAIEC,SAAO,EAAE,IAJX;AAKEC,gBAAc,EAAE,CAACP,QAAQ,CAACU,KAAV,CALlB;AAMEG,OAAK,EAAE;AANT,CA5Dc,EAoEd;AACEV,MAAI,EAAE,gBADR;AAEEC,MAAI,EAAE,sBAFR;AAGEC,MAAI,EAAE,oBAHR;AAIEC,SAAO,EAAE,KAJX;AAKEC,gBAAc,EAAE,CAACP,QAAQ,CAACU,KAAV,EAAiBV,QAAQ,CAACS,WAA1B,EAAuCT,QAAQ,CAACW,KAAhD,CALlB;AAMEE,OAAK,EAAE;AANT,CApEc,EA4Ed;AACEV,MAAI,EAAE,gBADR;AAEEC,MAAI,EAAE,oBAFR;AAGEC,MAAI,EAAE,oBAHR;AAIEC,SAAO,EAAE,KAJX;AAKEC,gBAAc,EAAE,CACdP,QAAQ,CAACU,KADK,EAEdV,QAAQ,CAACS,WAFK,EAGdT,QAAQ,CAACS,WAHK,CALlB;AAUEI,OAAK,EAAE;AAVT,CA5Ec,CAAhB,C;;;;;;;;;;;ACLAnC,OAAO,CAACuB,SAAR,GAAoB;AAClBU,OAAK,EAAE,OADW;AAElBD,OAAK,EAAE,OAFW;AAGlBD,aAAW,EAAE,aAHK;AAIlBD,OAAK,EAAE,OAJW;AAKlBI,UAAQ,EAAE;AALQ,CAApB;AAQAlC,OAAO,CAACoC,YAAR,GAAuB,CACrB;AACEjC,QAAM,EAAE,SADV;AAEEkC,aAAW,EACT;AAHJ,CADqB,EAMrB;AACElC,QAAM,EAAE,UADV;AAEEkC,aAAW,EAAE;AAFf,CANqB,EAUrB;AACElC,QAAM,EAAE,UADV;AAEEkC,aAAW,EAAE;AAFf,CAVqB,EAcrB;AACElC,QAAM,EAAE,UADV;AAEEkC,aAAW,EAAE;AAFf,CAdqB,CAAvB,C;;;;;;;;;;;ACRA,MAAMC,GAAG,GAAGzE,mBAAO,CAAC,kDAAD,CAAnB;;AAEA,MAAM0E,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,iBAAjC;AACA,MAAMC,MAAM,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA3B;;AAEA5C,OAAO,CAAC6C,eAAR,GAA0B,OAAOC,GAAP,EAAYrE,GAAZ,KAAoB;AAC5C,MAAI;AACF,QAAI;AAAEsE,cAAF;AAAYC,eAAZ;AAAuBC,aAAvB;AAAgCC;AAAhC,QAA2CJ,GAAG,CAACK,KAAnD;AACA,QAAI,CAACD,MAAL,EAAaA,MAAM,GAAG,CAAT;AACb,QAAIhD,QAAQ,GAAG,MAAMoC,GAAG,CAACtD,GAAJ,CAAS,GAAEuD,YAAa,gBAAxB,EAAyC;AAC5Da,UAAI,EAAET,MADsD;AAE5DI,cAF4D;AAG5DC,eAH4D;AAI5DC,aAJ4D;AAK5DC;AAL4D,KAAzC,CAArB;AAOAzE,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBlB,QAAvB;AACD,GAXD,CAWE,OAAOpB,GAAP,EAAY;AACZyB,WAAO,CAACF,KAAR,CAAcvB,GAAd;AACAL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAlBD,C;;;;;;;;;;;ACLA,MAAMC,MAAM,GAAGf,OAAO,CAACC,GAAR,CAAYe,YAA3B;AACA,MAAMb,MAAM,GAAGH,OAAO,CAACC,GAAR,CAAYgB,YAA3B;;AACA,MAAMtF,OAAO,GAAGN,mBAAO,CAAC,wBAAD,CAAvB;;AACA,MAAM6F,IAAI,GAAG7F,mBAAO,CAAC,wDAAD,CAApB;AAEA;;;;;;;AAKAmC,OAAO,CAAC2D,WAAR,GAAsB,OAAOb,GAAP,EAAYrE,GAAZ,KAAoB;AACxC,MAAI;AACF,QAAIP,GAAG,GAAI,GAAEqF,MAAO,cAAaZ,MAAM,GAAI,SAAQA,MAAO,EAAnB,GAAuB,EAAG,EAAjE;AACAG,OAAG,CACAc,IADH,CAEIzF,OAAO,CAAC;AAAED,SAAG,EAAEA;AAAP,KAAD,EAAe,CAACmC,KAAD,EAAQH,QAAR,EAAkB2D,IAAlB,KAA2B;AAC/C,UAAIxD,KAAJ,EAAW;AACTE,eAAO,CAACuD,GAAR,CACG,yCAAwC5F,GAAI,IAD/C,EAEEmC,KAFF;AAIA,YAAIiD,OAAO,GAAG,mBAAd;;AACA,YAAIjD,KAAK,IAAIA,KAAK,CAAC+C,IAAN,KAAe,cAA5B,EAA4C;AAC1CE,iBAAO,GAAGA,OAAO,CAACS,MAAR,CAAe,oBAAf,CAAV;AACD,SAFD,MAEO,IAAI1D,KAAK,IAAIA,KAAK,CAAC+C,IAAN,KAAe,YAA5B,EAA0C;AAC/CE,iBAAO,GAAGA,OAAO,CAACS,MAAR,CAAe,qCAAf,CAAV;AACD,SAFM,MAEA;AACLT,iBAAO,GAAGA,OAAO,CAACS,MAAR,CAAe,iBAAf,CAAV;AACD;;AACDjB,WAAG,CAACrE,GAAJ,CAAQ0B,MAAR,CAAe,GAAf,EAAoBiB,IAApB,CAAyB;AACvB4C,sBAAY,EAAEV,OAAO,IAAI,EADF;AAEvBW,mBAAS,EAAEX,OAAO,IAAI;AAFC,SAAzB;AAID,OAjBD,MAiBO;AACL,YAAIpD,QAAQ,CAACgE,UAAT,GAAsB,GAA1B,EACER,IAAI,CAACS,iBAAL,CACErB,GAAG,CAACK,KAAJ,CAAUiB,MADZ,EAEEC,IAAI,CAACC,KAAL,CAAWpE,QAAQ,CAAC2D,IAApB,EAA0B,CAA1B,EAA6B3F,GAF/B;AAIH;AACF,KAzBM,CAFX,EA6BG0F,IA7BH,CA6BQnF,GA7BR,EAFE,CAgCF;AACD,GAjCD,CAiCE,OAAOK,GAAP,EAAY;AACZyB,WAAO,CAACF,KAAR,CAAcvB,GAAd;AACAL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAxCD,C;;;;;;;;;;;ACVA,MAAMiB,YAAY,GAAG1G,mBAAO,CAAC,wDAAD,CAA5B;;AACA,MAAM2G,aAAa,GAAG3G,mBAAO,CAAC,4DAAD,CAA7B,C,CACA;;;AACA,MAAM4G,EAAE,GAAG5G,mBAAO,CAAC,cAAD,CAAlB,C,CACA;;;AACA,MAAM6G,YAAY,GAAG7G,mBAAO,CAAC,sCAAD,CAA5B;;AACA,MAAM8G,MAAM,GAAG9G,mBAAO,CAAC,sCAAD,CAAtB;;AAEA,MAAM+G,WAAW,GAAG,CAACC,YAAD,EAAeC,YAAf,KAAgC;AAClD,MAAIC,GAAG,GAAGD,YAAY,CAACE,WAAb,CAAyB,GAAzB,CAAV;AACA,SAAQ,GAAEH,YAAa,IAAGC,YAAY,CAACG,SAAb,CAAuBF,GAAG,GAAG,CAA7B,CAAgC,EAA1D;AACD,CAHD;;AAKA,MAAMG,iBAAiB,GAAIC,IAAD,IAAU;AAClC,QAAMC,OAAO,GAAGV,YAAY,CAACW,YAAb,CAA0B;AACxCC,SAAK,EAAE9C,OAAO,CAACC,GAAR,CAAY8C;AADqB,GAA1B,CAAhB;AAIA,SAAO,IAAI5G,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCqG,WAAO,CACL;AACEI,cAAQ,EAAE,cADZ;AAEEC,gBAAU,EAAE;AACV/D,YAAI,EAAG,YAAWkD,WAAW,CAACO,IAAI,CAACO,QAAN,EAAgBP,IAAI,CAACQ,YAArB,CAAmC;AADtD,OAFd;AAKEC,gBAAU,EAAEnB,EAAE,CAACoB,gBAAH,CAAqB,GAAEV,IAAI,CAACW,WAAY,IAAGX,IAAI,CAACO,QAAS,EAAzD;AALd,KADK,EAQL,CAAC5G,GAAD,EAAMJ,MAAN,EAAcwB,QAAd,KAA2B;AACzB,UAAI,CAACpB,GAAL,EAAUF,OAAO,CAACF,MAAD,CAAP,CAAV,KACKK,MAAM,CAACD,GAAD,CAAN;AACN,KAXI,CAAP;AAaD,GAdM,CAAP;AAeD,CApBD;;AAsBA,MAAMiH,aAAa,GAAIC,SAAD,IAAe;AACnC;AACA,MAAIC,MAAM,GAAGxB,EAAE,CAACyB,YAAH,CAAgBF,SAAhB,CAAb,CAFmC,CAGnC;;AACA,SAAO,IAAIG,MAAM,CAACC,IAAX,CAAgBH,MAAhB,EAAwB,QAAxB,EAAkCzG,QAAlC,CAA2C,QAA3C,CAAP,CAJmC,CAI0B;AAC9D,CALD;;AAOA,MAAM6G,mBAAmB,GAAIC,KAAD,IAAW;AACrC,MAAIC,WAAW,GAAG,EAAlB;AACAD,OAAK,CAACE,OAAN,CAAerB,IAAD,IAAU;AACtBoB,eAAW,CAACE,IAAZ,CAAiB;AACff,cAAQ,EAAG,GAAEP,IAAI,CAACQ,YAAa,EADhB;AAEfe,aAAO,EAAEX,aAAa,CAAE,GAAEZ,IAAI,CAACW,WAAY,IAAGX,IAAI,CAACO,QAAS,EAAtC;AAFP,KAAjB;AAID,GALD;AAMA,SAAOa,WAAP;AACD,CATD;;AAWA,MAAMI,SAAS,GAAG,OAAOL,KAAP,EAAcM,IAAd,EAAoBC,MAApB,EAA4B9D,QAA5B,KAAyC;AACzD,MAAI;AACF4B,UAAM,CAACmC,SAAP,CAAiBtE,OAAO,CAACC,GAAR,CAAYsE,gBAA7B;AAEA,UAAMC,GAAG,GAAG;AACVC,QAAE,EAAEzE,OAAO,CAACC,GAAR,CAAYyE,YAAZ,CAAyBC,KAAzB,CAA+B,GAA/B,CADM;AAEVf,UAAI,EAAE,qBAFI;AAGVgB,aAAO,EAAE,6CAHC;AAIVC,UAAI,EAAG,wBAJG;AAKVC,UAAI,EAAG,sBAAqBV,IAAK,+BAA8BC,MAAO,iGAAgG9D,QAAS,aALrK;AAMVwD,iBAAW,EAAEF,mBAAmB,CAACC,KAAD;AANtB,KAAZ;AAQA,UAAM3B,MAAM,CAAC4C,IAAP,CAAYP,GAAZ,CAAN;AACD,GAZD,CAYE,OAAOQ,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAhBD;;AAkBA,MAAMC,oBAAoB,GAAInB,KAAD,IAAW;AACtCA,OAAK,CAACE,OAAN,CAAerB,IAAD,IAAU;AACtBV,MAAE,CAACiD,MAAH,CAAW,GAAEvC,IAAI,CAACW,WAAY,IAAGX,IAAI,CAACO,QAAS,EAA/C,EAAmD5G,GAAD,IAAS;AACzD,UAAIA,GAAJ,EAAS,MAAMA,GAAN;AACTyB,aAAO,CAACuD,GAAR,CACG,aAAYqB,IAAI,CAACW,WAAY,IAAGX,IAAI,CAACO,QAAS,oBADjD;AAGD,KALD;AAMD,GAPD;AAQD,CATD;;AAWA,MAAMiC,iBAAiB,GAAG,OAAOrB,KAAP,EAAchI,IAAd,KAAuB;AAC/C,MAAI;AACF,QAAI;AACF8F,YADE;AAEF3C,UAFE;AAGFmG,cAHE;AAIFC,eAJE;AAKFC,WALE;AAMFC,gBANE;AAOFC,aAPE;AAQFC,gBARE;AASFC;AATE,QAUA5J,IAVJ;AAWA,QAAI6J,YAAY,GAAG,MAAM5D,YAAY,CAAC6D,iBAAb,CAA+BF,cAA/B,CAAzB;AACA,QAAIG,KAAK,GAAG,EAAZ;AACA/B,SAAK,CAACE,OAAN,CAAerB,IAAD,IAAU;AACtBkD,WAAK,CAAC5B,IAAN,CAAWvB,iBAAiB,CAACC,IAAD,CAA5B;AACD,KAFD;AAGA,QAAImD,aAAa,GAAG,MAAM3J,OAAO,CAAC4J,GAAR,CAAYF,KAAZ,CAA1B;AAEA,QAAIG,UAAU,GAAG,MAAMhE,aAAa,CAACgE,UAAd,CAAyB;AAC9C/G,UAAI,EAAEwG,UADwC;AAE9CQ,cAAQ,EAAET,OAFoC;AAG9CD,gBAAU,EAAEA,UAHkC;AAI9CW,YAAM,EAAE,IAJsC;AAK9CC,gBAAU,EAAE,CAACvE,MAAD,CALkC;AAM9CjE,YAAM,EAAE,CAACqE,aAAa,CAACoE,eAAd,CAA8B,SAA9B,CAAD,CANsC;AAO9CtC,WAAK,EAAEA,KAAK,CAACuC,GAAN,CAAWC,GAAD,KAAU;AACzBC,gBAAQ,EAAED,GAAG,CAACpD,QADW;AAEzBZ,oBAAY,EAAEgE,GAAG,CAACnD,YAFO;AAGzBqD,kBAAU,EAAE,mBAHa;AAIzBC,gBAAQ,EAAEH,GAAG,CAACG;AAJW,OAAV,CAAV;AAPuC,KAAzB,CAAvB;AAeA,QAAIC,UAAU,GAAG,MAAM3E,YAAY,CAAC2E,UAAb,CAAwB;AAC7CC,SAAG,EAAE/E,MADwC;AAE7C3C,UAF6C;AAG7CmG,cAH6C;AAI7CC,eAJ6C;AAK7CC,WAL6C;AAM7CY,YAAM,EAAE;AANqC,KAAxB,CAAvB;AASA,UAAM/B,SAAS,CAACL,KAAD,EAAS,GAAE7E,IAAK,IAAGmG,QAAS,EAA5B,EAA+BK,UAA/B,EAA2CO,UAAU,CAACY,EAAtD,CAAf;AAEA3B,wBAAoB,CAACnB,KAAD,CAApB;AACA,WAAOkC,UAAP;AACD,GA/CD,CA+CE,OAAOhB,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAnDD;;AAqDAxH,OAAO,CAACqJ,UAAR,GAAqB,OAAOvG,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC7C,MAAI;AACF,QAAI;AACFlF,YADE;AAEF3C,UAFE;AAGFmG,cAHE;AAIFC,eAJE;AAKFC,WALE;AAMFC,gBANE;AAOFC,aAPE;AAQFC,gBARE;AASFC;AATE,QAUApF,GAAG,CAACe,IAVR;AAWA,QAAI0F,YAAY,GAAG,MAAM5B,iBAAiB,CAAC7E,GAAG,CAACwD,KAAL,EAAY;AACpDlC,YADoD;AAEpD3C,UAFoD;AAGpDmG,cAHoD;AAIpDC,eAJoD;AAKpDC,WALoD;AAMpDC,gBANoD;AAOpDC,aAPoD;AAQpDC,gBARoD;AASpDC;AAToD,KAAZ,CAA1C;AAWAzJ,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AAAEkC,aAAO,EAAE;AAAX,KAArB;AACD,GAxBD,CAwBE,OAAOkE,EAAP,EAAW;AACX/I,OAAG,CACA0B,MADH,CACU,GADV,EAEGiB,IAFH,CAEQ;AAAEkC,aAAO,EAAEkE,EAAE,CAAClE,OAAH,IAAc;AAAzB,KAFR;AAGD;AACF,CA9BD;;AAgCAtD,OAAO,CAACwJ,iBAAR,GAA4B,OAAO1B,KAAP,EAAc2B,YAAd,EAA4BnD,KAAK,GAAG,EAApC,KAA2C;AACrE,MAAI;AACF3B,UAAM,CAACmC,SAAP,CAAiBtE,OAAO,CAACC,GAAR,CAAYsE,gBAA7B;AAEA,UAAMC,GAAG,GAAG;AACVC,QAAE,EAAEa,KADM;AACC;AACX1B,UAAI,EAAE,qBAFI;AAGVgB,aAAO,EAAE,oCAHC;AAIVC,UAAI,EAAG,oCAJG;AAKVC,UAAI,EAAG,4CAA2CmC,YAAa,YALrD;AAMVlD,iBAAW,EAAEF,mBAAmB,CAACC,KAAD;AANtB,KAAZ;AAQA,UAAM3B,MAAM,CAAC4C,IAAP,CAAYP,GAAZ,CAAN;AACD,GAZD,CAYE,OAAOQ,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAhBD,C;;;;;;;;;;;ACvKA,MAAMkC,WAAW,GAAG7L,mBAAO,CAAC,wDAAD,CAA3B;AAIA;;;;;AAGAmC,OAAO,CAAC2J,cAAR,GAAyB,OAAO7G,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC/C,MAAIhE,KAAK,GAAGxC,GAAG,CAACvE,OAAJ,CAAY,eAAZ,CAAZ;;AACA,MAAI;AACA,UAAMG,MAAM,GAAG,MAAMgL,WAAW,CAACC,cAAZ,CAA2BrE,KAA3B,CAArB;AACA7G,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB1C,MAAvB;AACH,GAHD,CAGE,OAAOI,GAAP,EAAY;AACVL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBtC,GAAvB;AACH;AACJ,CARD,C;;;;;;;;;;;ACPA,MAAM8K,mBAAmB,GAAG/L,mBAAO,CAAC,wEAAD,CAAnC;;AACA,MAAM;AAAEgM;AAAF,IAAiBhM,mBAAO,CAAC,wDAAD,CAA9B;;AAEA,MAAMiM,uBAAuB,GAAG,eAAhC;;AACA9J,OAAO,CAAC+J,IAAR,GAAe,OAAOjH,GAAP,EAAYrE,GAAZ,KAAoB;AACjC,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYiH,WAAZ;AAAmBnG,UAAnB;AAAyBoG,WAAzB;AAAgCC;AAAhC,QAA0CpH,GAAG,CAACe,IAApD;AACA,QAAI;AAAE0C,iBAAF;AAAe4D,4BAAsB,GAAG;AAAxC,QAAkDrH,GAAG,CAACe,IAA1D;;AACA,QAAI,CAAC0C,WAAD,IAAgBzD,GAAG,CAACwD,KAAxB,EAA+B;AAC7B;AACA,YAAMA,KAAK,GAAGxD,GAAG,CAACwD,KAAJ,CAAUuC,GAAV,CAAe1D,IAAD,KAAW,EACrC,GAAGA,IADkC;AAErC1D,YAAI,EAAE0D,IAAI,CAACQ,YAF0B;AAGrCyE,WAAG,EAAEjF,IAAI,CAACkF,MAAL,CAAY7K,QAAZ,CAAqB,QAArB;AAHgC,OAAX,CAAd,CAAd;AAMA+G,iBAAW,GAAG,MAAMsD,UAAU,CAACvD,KAAD,EAAQwD,uBAAR,CAA9B;AACD;;AAED,UAAMpL,MAAM,GAAG,MAAMkL,mBAAmB,CAACG,IAApB,CAAyB;AAC5ChH,cAD4C;AAE5CiH,WAF4C;AAG5CnG,UAH4C;AAI5CoG,WAJ4C;AAK5C1D,iBAAW,EAAEA,WAAW,IAAI,EALgB;AAM5C2D,WAAK,EAAEA,KAAK,IAAI;AAN4B,KAAzB,CAArB;;AAQA,QAAIC,sBAAJ,EAA4B;AAC1B;AACAP,yBAAmB,CAACU,sBAApB,CAA2C;AACzCvH,gBADyC;AAEzCiH,aAFyC;AAGzCnG,YAHyC;AAIzCoG,aAJyC;AAKzC1D;AALyC,OAA3C;AAOD;;AAED9H,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GAlCD,CAkCE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAtCD;;AAwCAkB,OAAO,CAACuK,MAAR,GAAiB,OAAOzH,GAAP,EAAYrE,GAAZ,KAAoB;AACnC,MAAI;AACF,UAAM;AAAE+L;AAAF,QAAqB1H,GAAG,CAACK,KAA/B;AACA,UAAMzE,MAAM,GAAG,MAAMkL,mBAAmB,CAACW,MAApB,CAA2BC,cAA3B,CAArB;AACA/L,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GAJD,CAIE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CARD;;AAUAkB,OAAO,CAACyK,OAAR,GAAkB,OAAO3H,GAAP,EAAYrE,GAAZ,KAAoB;AACpC,MAAI;AACF,UAAM;AAAE+L;AAAF,QAAqB1H,GAAG,CAACK,KAA/B;AACA,UAAMzE,MAAM,GAAG,MAAMkL,mBAAmB,CAACa,OAApB,CAA4BD,cAA5B,CAArB;AACA/L,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GAJD,CAIE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CARD;;AAUAkB,OAAO,CAAC0K,aAAR,GAAwB,OAAO5H,GAAP,EAAYrE,GAAZ,KAAoB;AAC1C,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAY4H;AAAZ,QAAwB7H,GAAG,CAACK,KAAlC;AACA,UAAMzE,MAAM,GAAG,MAAMkL,mBAAmB,CAACc,aAApB,CAAkC3H,QAAlC,EAA4C4H,OAA5C,CAArB;AACAlM,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GAJD,CAIE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CARD;;AAUAkB,OAAO,CAAC4K,WAAR,GAAsB,OAAO9H,GAAP,EAAYrE,GAAZ,KAAoB;AACxC,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYqB,YAAZ;AAAoBuG;AAApB,QAAgC7H,GAAG,CAACK,KAA1C;AACA,UAAMzE,MAAM,GAAG,MAAMkL,mBAAmB,CAACgB,WAApB,CACnB7H,QADmB,EAEnBqB,MAFmB,EAGnBuG,OAHmB,CAArB;AAKAlM,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GARD,CAQE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAZD,C;;;;;;;;;;;AC1EA,MAAM+L,iBAAiB,GAAGhN,mBAAO,CAAC,oEAAD,CAAjC;;AAEAmC,OAAO,CAAC8K,iBAAR,GAA4B,OAAOhI,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAClD,MAAI;AACA,QAAI5K,MAAM,GAAG,MAAMmM,iBAAiB,CAACE,SAAlB,CAA4BjI,GAAG,CAACK,KAAJ,CAAU4E,UAAtC,CAAnB;AACAtJ,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACH,GAHD,CAIA,OAAOI,GAAP,EAAY;AACRL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACH;AACJ,CARD,C;;;;;;;;;;;ACFA,MAAMkM,uBAAuB,GAAGnN,mBAAO,CAAC,gFAAD,CAAvC;;AACA,MAAM;AACJoN,iBADI;AAEJC,eAFI;AAGJC,qBAHI;AAIJC;AAJI,IAKFvN,mBAAO,CAAC,wDAAD,CALX;;AAMA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM+L,mBAAmB,GAAG/L,mBAAO,CAAC,wEAAD,CAAnC;;AAEA,MAAMyN,0BAA0B,GAAG,SAAnC;AACA,MAAMC,uBAAuB,GAAG,MAAhC;AACA,MAAMC,yBAAyB,GAAG,qCAAlC;AACA,MAAMC,iCAAiC,GACrC,uCADF;AAEA,MAAMC,iCAAiC,GACrC,uCADF;AAEA,MAAMC,+BAA+B,GACnC,8CADF;AAEA,MAAMC,uBAAuB,GAAG,gCAAhC;;AAEA5L,OAAO,CAAC6L,oBAAR,GAA+B,OAAO/I,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AACvD,MAAI;AACF,QAAI5K,MAAM,GAAG,MAAMsM,uBAAuB,CAACc,oBAAxB,CACjB,CAAC,2CAAD,CADiB,EAEjB;AACEC,WAAK,EAAE,SADT;AAEElI,UAAI,EAAE,gCAFR;AAGEvF,UAAI,EAAE;AAAE0N,gBAAQ,EAAE;AAAZ,OAHR;AAIEhC,WAAK,EAAE,oBAJT;AAKEiC,cAAQ,EAAE;AALZ,KAFiB,CAAnB;AAUAxN,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GAZD,CAYE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAhBD;;AAkBAkB,OAAO,CAACkM,sBAAR,GAAiC,OAAOpJ,GAAP,EAAYrE,GAAZ,KAAoB;AACnD,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYqB,YAAZ;AAAoBnC;AAApB,QAA8Ba,GAAG,CAACe,IAAxC;AACA,UAAM+C,IAAI,GAAG,MAAMqE,eAAe,CAAC7G,MAAD,CAAlC;AACA,UAAM+H,UAAU,GAAGvF,IAAI,CAACuF,UAAL,CAAgBtD,GAAhB,CAAqBuD,CAAD,IAAOA,CAAC,CAAC9G,KAA7B,CAAnB;AAEA,UAAM+G,QAAQ,GAAG;AACfN,WAAK,EAAET,0BADQ;AAEfzH,UAAI,EAAE5B,KAAK,CAACqK,SAAN,GACD,eAAcrK,KAAK,CAACR,IAAK,cADxB,GAED,eAAcQ,KAAK,CAACR,IAAK,cAJf;AAKfnD,UAAI,EAAE;AAAEiO,gBAAQ,EAAE;AAAZ,OALS;AAMfvC,WAAK,EAAG,QAAOpD,IAAI,CAACnF,IAAK;AANV,KAAjB;AASA,UAAMmI,mBAAmB,CAACG,IAApB,CAAyB;AAC7BhH,cAD6B;AAE7BiH,WAAK,EAAEwB,yBAFsB;AAG7B3H,UAAI,EAAEwI,QAAQ,CAACxI,IAHc;AAI7BoG,WAAK,EAAEsB,uBAJsB;AAK7BrB,WAAK,EAAE,CAACtD,IAAI,CAACuC,GAAN,CALsB;AAM7BkD;AAN6B,KAAzB,CAAN;AASA,UAAM3N,MAAM,GAAG,MAAMsM,uBAAuB,CAACc,oBAAxB,CACnBK,UADmB,EAEnB,EACE,GAAGE;AADL,KAFmB,CAArB;AAMA5N,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GA9BD,CA8BE,OAAOI,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,8BAAZ,EAA4ChF,GAA5C;AACAL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAnCD;;AAqCAkB,OAAO,CAACwM,6BAAR,GAAwC,OAAO1J,GAAP,EAAYrE,GAAZ,KAAoB;AAC1D,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYqB,YAAZ;AAAoBqI;AAApB,QAAoC3J,GAAG,CAACe,IAA9C;AACA,UAAMqG,KAAK,GAAG,MAAMgB,aAAa,CAACnI,QAAD,CAAjC,CAFE,CAGF;AACA;;AAEA,UAAM6D,IAAI,GAAG,MAAMqE,eAAe,CAAC7G,MAAD,CAAlC;AACA,UAAMiI,QAAQ,GAAG;AACfN,WAAK,EAAET,0BADQ;AAEfzH,UAAI,EAAG,cAAa+C,IAAI,CAACnF,IAAK,qBAAoBmF,IAAI,CAAC8F,MAAO,IAAG9F,IAAI,CAAC+F,YAAa,uBAAsBF,WAAY,GAFtG;AAGfnO,UAAI,EAAE;AACJiO,gBAAQ,EAAE;AAAEK,eAAK,EAAE,iBAAT;AAA4BC,gBAAM,EAAE;AAApC,SADN;AAEJC,aAAK,EAAE;AAAEJ,gBAAM,EAAE9F,IAAI,CAAC8F,MAAf;AAAuBC,sBAAY,EAAE/F,IAAI,CAAC+F;AAA1C;AAFH,OAHS;AAOf3C,WAAK,EAAG;AAPO,KAAjB;AASA,UAAMJ,mBAAmB,CAACG,IAApB,CAAyB;AAC7BhH,cAD6B;AAE7BiH,WAAK,EAAEyB,iCAFsB;AAG7B5H,UAAI,EAAEwI,QAAQ,CAACxI,IAHc;AAI7BoG,WAAK,EAAEsB,uBAJsB;AAK7BrB,WAAK,EAAE,CAACtD,IAAI,CAACuC,GAAN,CALsB;AAM7BkD;AAN6B,KAAzB,CAAN;AAQA,QAAIU,QAAQ,GAAG,EAAf;AACA7C,SAAK,CAAC1D,OAAN,CAAewG,CAAD,IAAO;AACnBD,cAAQ,CAACtG,IAAT,CACEuE,uBAAuB,CAACc,oBAAxB,CACEkB,CAAC,CAACb,UAAF,CAAatD,GAAb,CAAkBuD,CAAD,IAAOA,CAAC,CAAC9G,KAA1B,CADF,EAEE,EAAE,GAAG+G;AAAL,OAFF,CADF;AAMD,KAPD;AAQA,UAAMY,iBAAiB,GAAG,MAAMtO,OAAO,CAAC4J,GAAR,CAAYwE,QAAZ,CAAhC;AACAtO,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB6L,iBAArB;AACD,GAnCD,CAmCE,OAAOnO,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,8BAAZ,EAA4ChF,GAA5C;AACAL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAxCD;;AA0CAkB,OAAO,CAACkN,sCAAR,GAAiD,OAAOpK,GAAP,EAAYrE,GAAZ,KAAoB;AACnE,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYoK,eAAZ;AAAuBhN,YAAvB;AAA+BiN,aAA/B;AAAwCC;AAAxC,QAAwDvK,GAAG,CAACe,IAAlE;AACA,UAAMqG,KAAK,GAAG,MAAMiB,mBAAmB,CAACpI,QAAD,EAAWoK,SAAX,CAAvC;AAEA,UAAMd,QAAQ,GAAG;AACfN,WAAK,EAAET,0BADQ;AAEfzH,UAAI,EACF1D,MAAM,KAAK,UAAX,GACK,cAAakN,WAAY,mBAD9B,GAEIlN,MAAM,KAAK,UAAX,GACC,cAAakN,WAAY,8CAA6CD,OAAQ,EAD/E,GAEC,WAAUC,WAAY,yBAPd;AAQf/O,UAAI,EAAE;AACJiO,gBAAQ,EAAE;AACRK,eAAK,EAAE,UADC;AAERC,gBAAM,EAAE;AAFA,SADN;AAKJC,aAAK,EAAE;AACLQ,gBAAM,EAAEnN;AADH;AALH,OARS;AAiBf6J,WAAK,EACH7J,MAAM,KAAK,UAAX,GACI,eADJ,GAEIA,MAAM,KAAK,UAAX,GACA,gBADA,GAEA;AAtBS,KAAjB;AAwBA,UAAMyJ,mBAAmB,CAACG,IAApB,CAAyB;AAC7BhH,cAD6B;AAE7BiH,WAAK,EAAE0B,iCAFsB;AAG7B7H,UAAI,EAAEwI,QAAQ,CAACxI,IAHc;AAI7BoG,WAAK,EAAEsB,uBAJsB;AAK7BrB,WAAK,EAAEA,KAAK,CAACrB,GAAN,CAAWjC,IAAD,IAAUA,IAAI,CAACuC,GAAzB,CALsB;AAM7BkD;AAN6B,KAAzB,CAAN;AASA,QAAIU,QAAQ,GAAG,EAAf;AACA7C,SAAK,CAAC1D,OAAN,CAAewG,CAAD,IAAO;AACnBD,cAAQ,CAACtG,IAAT,CACEuE,uBAAuB,CAACc,oBAAxB,CACEkB,CAAC,CAACb,UAAF,CAAatD,GAAb,CAAkBuD,CAAD,IAAOA,CAAC,CAAC9G,KAA1B,CADF,EAEE,EACE,GAAG+G;AADL,OAFF,CADF;AAQD,KATD;AAWA,UAAMY,iBAAiB,GAAG,MAAMtO,OAAO,CAAC4J,GAAR,CAAYwE,QAAZ,CAAhC;AACAtO,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB6L,iBAArB;AACD,GAnDD,CAmDE,OAAOnO,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,8BAAZ,EAA4ChF,GAA5C;AACAL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAxDD;;AA0DAkB,OAAO,CAACuN,mCAAR,GAA8C,OAAOzK,GAAP,EAAYrE,GAAZ,KAAoB;AAChE,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYqB,YAAZ;AAAoBoJ;AAApB,QAAsC1K,GAAG,CAACe,IAAhD;AACA,UAAM4J,UAAU,GAAG,MAAMvC,aAAa,CAACnI,QAAD,CAAtC;AAEA,UAAM6D,IAAI,GAAG,MAAMqE,eAAe,CAAC7G,MAAD,CAAlC;AACA,UAAMiI,QAAQ,GAAG;AACfN,WAAK,EAAET,0BADQ;AAEfzH,UAAI,EAAG,cAAa+C,IAAI,CAACnF,IAAK,qBAAoBmF,IAAI,CAAC8F,MAAO,IAAG9F,IAAI,CAAC+F,YAAa,6CAFpE;AAGfrO,UAAI,EAAE;AACJiO,gBAAQ,EAAE;AAAEK,eAAK,EAAE,aAAT;AAAwBC,gBAAM,EAAE;AAAhC,SADN;AAEJC,aAAK,EAAE;AACLJ,gBAAM,EAAE9F,IAAI,CAAC8F,MADR;AAELC,sBAAY,EAAE/F,IAAI,CAAC+F,YAFd;AAGLa;AAHK;AAFH,OAHS;AAWfxD,WAAK,EAAG;AAXO,KAAjB;AAaA,UAAMJ,mBAAmB,CAACG,IAApB,CAAyB;AAC7BhH,cAD6B;AAE7BiH,WAAK,EAAE2B,+BAFsB;AAG7B9H,UAAI,EAAEwI,QAAQ,CAACxI,IAHc;AAI7BoG,WAAK,EAAEsB,uBAJsB;AAK7BrB,WAAK,EAAEuD,UAAU,CAAC5E,GAAX,CAAgBjC,IAAD,IAAUA,IAAI,CAACuC,GAA9B,CALsB;AAM7BkD;AAN6B,KAAzB,CAAN;AAQA,QAAIU,QAAQ,GAAG,EAAf;AACAU,cAAU,CAACjH,OAAX,CAAoBwG,CAAD,IAAO;AACxBD,cAAQ,CAACtG,IAAT,CACEuE,uBAAuB,CAACc,oBAAxB,CACEkB,CAAC,CAACb,UAAF,CAAatD,GAAb,CAAkBuD,CAAD,IAAOA,CAAC,CAAC9G,KAA1B,CADF,EAEE,EAAE,GAAG+G;AAAL,OAFF,CADF;AAMD,KAPD;AASA,QAAIY,iBAAiB,GAAG,MAAMtO,OAAO,CAAC4J,GAAR,CAAYwE,QAAZ,CAA9B;AACAtO,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB6L,iBAArB;AACD,GAtCD,CAsCE,OAAOnO,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,8BAAZ,EAA4ChF,GAA5C;AACAL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CA3CD;;AA6CA,MAAM4O,2BAA2B,GAAG,CAACvN,MAAD,EAASiN,OAAT,KAAqB;AACvD,UAAQjN,MAAR;AACE,SAAK,UAAL;AACE,aAAO,iCAAP;;AACF,SAAK,UAAL;AACE,aAAQ,4DAA2DiN,OAAQ,EAA3E;;AACF,SAAK,SAAL;AACE,aAAO,sCAAP;;AACF;AACE,aAAO,0CAAP;AARJ;AAUD,CAXD;;AAaApN,OAAO,CAAC2N,0CAAR,GAAqD,OAAO7K,GAAP,EAAYrE,GAAZ,KAAoB;AACvE,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYoK,eAAZ;AAAuBhN,YAAvB;AAA+BiN,aAA/B;AAAwCI;AAAxC,QAA0D1K,GAAG,CAACe,IAApE;AACA,QAAIkJ,QAAQ,GAAG,EAAf;AACA,UAAM7C,KAAK,GAAG,MAAMiB,mBAAmB,CAACpI,QAAD,EAAWoK,SAAX,CAAvC;AACA,UAAMd,QAAQ,GAAG;AACfN,WAAK,EAAET,0BADQ;AAEfzH,UAAI,EAAE6J,2BAA2B,CAACvN,MAAD,EAASiN,OAAT,CAFlB;AAGfpD,WAAK,EAAE,wCAHQ;AAIf1L,UAAI,EAAE;AACJiO,gBAAQ,EAAE;AAAEK,eAAK,EAAE,aAAT;AAAwBC,gBAAM,EAAE;AAAhC,SADN;AAEJC,aAAK,EAAE;AACLJ,gBAAM,EAAExC,KAAK,CAAC,CAAD,CAAL,CAASwC,MADZ;AAELC,sBAAY,EAAEzC,KAAK,CAAC,CAAD,CAAL,CAASyC,YAFlB;AAGLa;AAHK;AAFH;AAJS,KAAjB;AAaA,UAAM5D,mBAAmB,CAACG,IAApB,CAAyB;AAC7BhH,cAD6B;AAE7BiH,WAAK,EAAE2B,+BAFsB;AAG7B9H,UAAI,EAAEwI,QAAQ,CAACxI,IAHc;AAI7BoG,WAAK,EAAEsB,uBAJsB;AAK7BrB,WAAK,EAAEA,KAAK,CAACrB,GAAN,CAAWjC,IAAD,IAAUA,IAAI,CAACuC,GAAzB,CALsB;AAM7BkD;AAN6B,KAAzB,CAAN;AAQAnC,SAAK,CAAC1D,OAAN,CAAeI,IAAD,IAAU;AACtBmG,cAAQ,CAACtG,IAAT,CACEuE,uBAAuB,CAACc,oBAAxB,CACElF,IAAI,CAACuF,UAAL,CAAgBtD,GAAhB,CAAqBuD,CAAD,IAAOA,CAAC,CAAC9G,KAA7B,CADF,EAEE,EACE,GAAG+G;AADL,OAFF,CADF;AAQD,KATD;AAWA,QAAIY,iBAAiB,GAAG,MAAMtO,OAAO,CAAC4J,GAAR,CAAYwE,QAAZ,CAA9B;AACAtO,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB6L,iBAArB;AACD,GAtCD,CAsCE,OAAOnO,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,8BAAZ,EAA4ChF,GAA5C;AACAL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CA3CD;;AA6CAkB,OAAO,CAAC4N,yBAAR,GAAoC,OAAO9K,GAAP,EAAYrE,GAAZ,KAAoB;AACtD,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAY8K,gBAAZ;AAAwBC;AAAxB,QAA2ChL,GAAG,CAACe,IAArD;AACA,UAAMqG,KAAK,GAAG,MAAMkB,gBAAgB,CAACrI,QAAD,CAApC;;AACA,QAAImH,KAAJ,EAAW;AACT,YAAM6D,WAAW,GAAG7D,KAAK,CAACoD,MAAN,CAAc1G,IAAD,IAAUA,IAAI,CAAC8B,MAA5B,CAApB;AACA,YAAMsF,oBAAoB,GAAGD,WAAW,CAAClF,GAAZ,CAAiBjC,IAAD,IAAUA,IAAI,CAACuF,UAA/B,CAA7B;AACA,YAAM8B,iBAAiB,GAAG,GAAGlK,MAAH,CAAUmK,KAAV,CAAgB,EAAhB,EAAoBF,oBAApB,CAA1B;AACA,YAAMG,cAAc,GAAGF,iBAAiB,CAACG,MAAlB,CAAyB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5D,YAAID,GAAG,CAACE,OAAJ,CAAYD,GAAZ,MAAqB,CAAC,CAA1B,EAA6B;AAC3BD,aAAG,CAAC5H,IAAJ,CAAS6H,GAAT;AACD;;AACD,eAAOD,GAAP;AACD,OALsB,EAKpB,EALoB,CAAvB;AAMA,YAAMhC,QAAQ,GAAG;AACfN,aAAK,EAAET,0BADQ;AAEfzH,YAAI,EAAG,6BAA4BgK,UAAW,uDAAsDxC,MAAM,CACxGyC,cADwG,CAAN,CAElGU,MAFkG,CAE3F,YAF2F,CAE7E,EAJR;AAKfxE,aAAK,EAAE,2BALQ;AAMf1L,YAAI,EAAE;AACJiO,kBAAQ,EAAE;AAAEK,iBAAK,EAAE,mBAAT;AAA8BC,kBAAM,EAAE;AAAtC,WADN;AAEJC,eAAK,EAAE;AACLe;AADK;AAFH;AANS,OAAjB;AAaA,YAAMjE,mBAAmB,CAACG,IAApB,CAAyB;AAC7BhH,gBAD6B;AAE7BiH,aAAK,EAAE4B,uBAFsB;AAG7B/H,YAAI,EAAEwI,QAAQ,CAACxI,IAHc;AAI7BoG,aAAK,EAAEsB,uBAJsB;AAK7BrB,aAAK,EAAEA,KAAK,CAACrB,GAAN,CAAWjC,IAAD,IAAUA,IAAI,CAACuC,GAAzB,CALsB;AAM7BkD;AAN6B,OAAzB,CAAN;AAQA,YAAMY,iBAAiB,GAAGjC,uBAAuB,CAACc,oBAAxB,CACxBqC,cAAc,CAACtF,GAAf,CAAoB4F,SAAD,IAAeA,SAAS,CAACnJ,KAA5C,CADwB,EAExB,EACE,GAAG+G;AADL,OAFwB,CAA1B;AAMA5N,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB6L,iBAArB;AACD,KAtCD,MAsCO;AACLxO,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AAAEkC,eAAO,EAAE;AAAX,OAArB;AACD;AACF,GA5CD,CA4CE,OAAOxE,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,4BAAZ,EAA0ChF,GAA1C;AACAL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBtC,GAArB;AACD;AACF,CAjDD,C;;;;;;;;;;;ACvRA,MAAM8H,IAAI,GAAG/I,mBAAO,CAAC,mDAAD,CAApB;;AAEAmC,OAAO,CAAC0O,MAAR,GAAiB,CAAC5L,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AACnC,MACExG,GAAG,CAACe,IAAJ,CAASyB,KAAT,KAAmBqJ,SAAnB,IACA7L,GAAG,CAACe,IAAJ,CAASyB,KAAT,KAAmB,EADnB,IAEAxC,GAAG,CAACe,IAAJ,CAASyB,KAAT,KAAmB,IAHrB,EAIE;AACA7G,OAAG,CAAC8I,IAAJ,CAAS;AACPlE,aAAO,EAAE,KADF;AAEPC,aAAO,EAAE;AAFF,KAAT;AAIA;AACD;;AACD,MAAI;AACFwE,SADE;AAEFrG,QAFE;AAGFmG,YAHE;AAIFC,aAJE;AAKF+G,cALE;AAMFC,YANE;AAOFC,WAPE;AAQFC,YARE;AASFzJ;AATE,MAUAxC,GAAG,CAACe,IAVR;;AAWA,MAAI+K,UAAJ,EAAgB;AACd9L,OAAG,CAACe,IAAJ,GAAW;AACTiE,WADS;AAETrG,UAFS;AAGTmG,cAHS;AAIToH,eAAS,EAAEJ,UAJF;AAKT/G,eALS;AAMT+G,gBANS;AAOTC,cAPS;AAQTC,aARS;AASTC,cATS;AAUTzJ;AAVS,KAAX;AAYAsB,QAAI,CAACqI,gBAAL,CAAsBnM,GAAtB,EAA2BrE,GAA3B,EAAgC6K,IAAhC;AACD,GAdD,MAcO,IAAIuF,QAAJ,EAAc;AACnB/L,OAAG,CAACe,IAAJ,GAAW;AACTiE,WADS;AAETrG,UAFS;AAGTmG,cAHS;AAIToH,eAAS,EAAEH,QAJF;AAKThH,eALS;AAMT+G,gBANS;AAOTC,cAPS;AAQTC,aARS;AASTC,cATS;AAUTzJ;AAVS,KAAX;AAYAsB,QAAI,CAACsI,cAAL,CAAoBpM,GAApB,EAAyBrE,GAAzB,EAA8B6K,IAA9B;AACD,GAdM,MAcA,IAAIwF,OAAJ,EAAa;AAClBhM,OAAG,CAACe,IAAJ,GAAW;AACTiE,WADS;AAETrG,UAFS;AAGTmG,cAHS;AAIToH,eAAS,EAAEF,OAJF;AAKTjH,eALS;AAMT+G,gBANS;AAOTC,cAPS;AAQTC,aARS;AASTC,cATS;AAUTzJ;AAVS,KAAX;AAYAsB,QAAI,CAACuI,aAAL,CAAmBrM,GAAnB,EAAwBrE,GAAxB,EAA6B6K,IAA7B;AACD,GAdM,MAcA;AACLxG,OAAG,CAACe,IAAJ,GAAW;AACTiE,WADS;AAETrG,UAFS;AAGTmG,cAHS;AAIToH,eAAS,EAAElH,KAJF;AAKTD,eALS;AAMT+G,gBANS;AAOTC,cAPS;AAQTC,aARS;AASTC,cATS;AAUTzJ;AAVS,KAAX;AAYAsB,QAAI,CAACwI,aAAL,CAAmBtM,GAAnB,EAAwBrE,GAAxB,EAA6B6K,IAA7B;AACD,GA/EkC,CAgFnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACD,CA3HD,C;;;;;;;;;;;ACFA,MAAM5F,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AACA,MAAMwR,eAAe,GAAGxR,mBAAO,CAAC,gEAAD,CAA/B;;AACA,MAAMD,KAAK,GAAGC,mBAAO,CAAC,oBAAD,CAAP,CAAiByR,OAA/B;;AACA,MAAMlH,iBAAiB,GAAGvK,mBAAO,CAAC,0CAAD,CAAP,CAAyBuK,iBAAnD;;AAEA,MAAMmH,kBAAkB,GAAI3I,IAAD,IAAU;AACnC,SAAOA,IAAI,CAAC8B,MAAZ;AACD,CAFD;;AAIA,MAAM8G,YAAY,GAAG,CAACC,SAAD,EAAYV,QAAZ,EAAsBW,WAAW,GAAG,KAApC,KAA8C;AACjE,SAAO,IAAI/Q,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC2E,QAAI,CAACiM,QAAL,CAAcF,SAAd,EAAyBjR,IAAzB,CAA8B,CAACoR,KAAD,EAAQ9Q,GAAR,KAAgB;AAC5C,UAAI8Q,KAAJ,EAAW;AACT,YAAIC,SAAS,GAAGD,KAAK,CAACE,gBAAN,CAAuBf,QAAvB,EAAiCW,WAAjC,CAAhB;AACAG,iBAAS,CAACrR,IAAV,CACGE,MAAD,IAAY;AACV;AACA,cAAI4G,KAAK,GAAGsK,KAAK,CAACG,iBAAN,EAAZ;AACAnR,iBAAO,CAAC;AAAEyE,mBAAO,EAAE,IAAX;AAAiBC,mBAAO,EAAEgC;AAA1B,WAAD,CAAP;AACD,SALH,EAMGxG,GAAD,IAAS;AACPC,gBAAM,CAAC;AACLsE,mBAAO,EAAE,KADJ;AAELC,mBAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFnB,WAAD,CAAN;AAID,SAXH;AAaD,OAfD,MAgBEvE,MAAM,CAAC;AACLiR,cAAM,EAAE,KADH;AAEL1M,eAAO,EAAE;AAFJ,OAAD,CAAN;AAIH,KArBD;AAsBD,GAvBM,CAAP;AAwBD,CAzBD;;AA2BAtD,OAAO,CAACiQ,YAAR,GAAuB,OAAOnN,GAAP,EAAYrE,GAAZ,KAAoB;AACzC,MAAI;AACF,UAAM;AAAEmI,UAAF;AAAQmI;AAAR,QAAqBjM,GAAG,CAACe,IAA/B;AACA,UAAM6L,WAAW,GAAG,KAApB;AACA,UAAMhR,MAAM,GAAG,MAAM8Q,YAAY,CAAC5I,IAAD,EAAOmI,QAAP,EAAiBW,WAAjB,CAAjC;AACAjR,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GALD,CAKE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE;AAA/B,KAArB;AACD;AACF,CATD;;AAWAtD,OAAO,CAACkQ,SAAR,GAAoB,OAAOpN,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC5C,MAAI;AACF;AACA,QAAI;AAAE1C,UAAF;AAAQmI,cAAR;AAAkBoB,kBAAlB;AAAgCT,iBAAW,GAAG;AAA9C,QAAwD5M,GAAG,CAACe,IAAhE;AAEA,QAAIsE,YAAY,GAAG,MAAMC,iBAAiB,CAAC+H,YAAD,CAA1C;;AACA,QAAIhI,YAAJ,EAAkB;AAChB,UAAIiI,GAAG,GAAG,MAAMZ,YAAY,CAAC5I,IAAD,EAAOmI,QAAP,EAAiBW,WAAjB,CAA5B,CADgB,CAC2C;;AAE3D,UAAIU,GAAJ,EAAS;AACP,YAAIA,GAAG,CAAC/M,OAAR,EAAiB;AACf;AACA;AACA;AACA,cAAIgN,QAAQ,GAAG,CAAC,MAAM3M,IAAI,CAACiM,QAAL,CAAc/I,IAAd,CAAP,EAA4B0J,QAA5B,EAAf;AAEA7R,aAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB,EACrB,GAAGgP,GADkB;AAErBtI,iBAAK,EAAEuI,QAAQ,CAACvI,KAFK;AAGrBrG,gBAAI,EAAE4O,QAAQ,CAAC5O,IAHM;AAIrB8O,qBAAS,EAAEF,QAAQ,CAACG,SAJC;AAKrBpH,cAAE,EAAEiH,QAAQ,CAAClH,GAAT,CAAa3J,QAAb;AALiB,WAAvB;AAOD,SAbD,MAcEf,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,iBAAO,EAAE,KAAX;AAAkBC,iBAAO,EAAE;AAA3B,SAAvB;AACH,OAhBD,MAgBO;AACL7E,WAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,iBAAO,EAAE,KAAX;AAAkBC,iBAAO,EAAE;AAA3B,SAAvB;AACD;AACF,KAtBD,MAsBO7E,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAE;AAA3B,KAAvB;AACR,GA5BD,CA4BE,OAAOxE,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,OAAZ,EAAqBhF,GAArB;AACAL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,WAAK,EAAE,IAAT;AAAehC,aAAO,EAAExE;AAAxB,KAAvB;AACD;AACF,CAjCD;;AAmCAkB,OAAO,CAACyQ,oBAAR,GAA+B,OAAO3N,GAAP,EAAYrE,GAAZ,KAAoB;AACjD,MAAI;AACF,QAAI;AAAE2K,QAAF;AAAM+G;AAAN,QAAuBrN,GAAG,CAACK,KAA/B,CADE,CAEF;AACA;;AACA,QAAIiN,GAAG,GAAG,MAAM1M,IAAI,CAACgN,mBAAL,CAAyBtH,EAAzB,CAAhB;;AACA,QAAIgH,GAAJ,EAAS;AACP,UAAIb,kBAAkB,CAACa,GAAG,CAACO,IAAL,CAAtB,EAAkC;AAChC,YAAIrL,KAAK,GAAG8K,GAAG,CAACL,iBAAJ,EAAZ;AACAtR,WAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE;AAAF,SAAvB;AACD,OAHD,MAIE7G,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkE,aAAK,EAAE,IADc;AAErBhC,eAAO,EACL;AAHmB,OAAvB;AAKH,KAVD,MAUO;AACL7E,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,aAAK,EAAE;AAAT,OAAvB;AACD,KAjBC,CAkBF;;AACD,GAnBD,CAmBE,OAAOxG,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,OAAZ,EAAqBhF,GAArB;AACAL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,WAAK,EAAE;AAAT,KAAvB;AACD;AACF,CAxBD;;AA0BAtF,OAAO,CAAC4Q,kBAAR,GAA6B,OAAO9N,GAAP,EAAYrE,GAAZ,KAAoB;AAC/C,MAAI;AACF,QAAI;AAAE2K,QAAF;AAAM+G;AAAN,QAAuBrN,GAAG,CAACK,KAA/B;AACA,QAAIgF,YAAY,GAAG,MAAMC,iBAAiB,CAAC+H,YAAD,CAA1C;;AACA,QAAIhI,YAAJ,EAAkB;AAChB,UAAIiI,GAAG,GAAG,MAAM1M,IAAI,CAACmN,iBAAL,CAAuBzH,EAAvB,CAAhB;;AACA,UAAIgH,GAAJ,EAAS;AACP,YAAIb,kBAAkB,CAACa,GAAG,CAACO,IAAL,CAAtB,EAAkC;AAChC,cAAIrL,KAAK,GAAG8K,GAAG,CAACL,iBAAJ,EAAZ;AACAtR,aAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE;AAAF,WAAvB;AACD,SAHD,MAIE7G,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkE,eAAK,EAAE,IADc;AAErBhC,iBAAO,EACL;AAHmB,SAAvB;AAKH,OAVD,MAUO;AACL7E,WAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,eAAK,EAAE;AAAT,SAAvB;AACD;AACF,KAfD,MAeO7G,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,WAAK,EAAE;AAAT,KAAvB;AACR,GAnBD,CAmBE,OAAOxG,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,OAAZ,EAAqBhF,GAArB;AACAL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,WAAK,EAAE;AAAT,KAAvB;AACD;AACF,CAxBD;;AA0BAtF,OAAO,CAAC8Q,iBAAR,GAA4B,OAAOhO,GAAP,EAAYrE,GAAZ,KAAoB;AAC9C,MAAI;AACF,QAAI;AAAE2K,QAAF;AAAM+G;AAAN,QAAuBrN,GAAG,CAACK,KAA/B;AACA,QAAIgF,YAAY,GAAG,MAAMC,iBAAiB,CAAC+H,YAAD,CAA1C;;AACA,QAAIhI,YAAJ,EAAkB;AAChB,UAAIiI,GAAG,GAAG,MAAM1M,IAAI,CAACqN,gBAAL,CAAsB3H,EAAtB,CAAhB;;AACA,UAAIgH,GAAJ,EAAS;AACP,YAAIb,kBAAkB,CAACa,GAAG,CAACO,IAAL,CAAtB,EAAkC;AAChC,cAAIrL,KAAK,GAAG8K,GAAG,CAACL,iBAAJ,EAAZ;AACAtR,aAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE;AAAF,WAAvB;AACD,SAHD,MAIE7G,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkE,eAAK,EAAE,IADc;AAErBhC,iBAAO,EACL;AAHmB,SAAvB;AAKH,OAVD,MAUO;AACL7E,WAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,eAAK,EAAE;AAAT,SAAvB;AACD;AACF,KAfD,MAeO7G,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,WAAK,EAAE;AAAT,KAAvB;AACR,GAnBD,CAmBE,OAAOxG,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,OAAZ,EAAqBhF,GAArB;AACAL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEkE,WAAK,EAAE;AAAT,KAAvB;AACD;AACF,CAxBD;;AA0BAtF,OAAO,CAACgR,YAAR,GAAuB,CAAClO,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AACzC,MAAIhE,KAAK,GAAGxC,GAAG,CAACvE,OAAJ,CAAY,eAAZ,CAAZ;AACA,SAAO,IAAII,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC2E,QAAI,CAACsN,YAAL,CAAkB1L,KAAlB,EAAyB9G,IAAzB,CACGyS,OAAD,IAAa;AACX,UAAIA,OAAJ,EACExS,GAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAE8P,aAAK,EAAE,IAAT;AAAe5N,eAAO,EAAE;AAAxB,OAFR,EADF,KAKE7E,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkB;AAChB+Q,aAAK,EAAE,KADS;AAEhB5N,eAAO,EAAE;AAFO,OAAlB;AAIH,KAXH,EAYGxE,GAAD,IAASL,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBrB,GAAlB,CAZX;AAcD,GAfM,CAAP;AAgBD,CAlBD;;AAoBAkB,OAAO,CAACmR,iBAAR,GAA4B,CAACrO,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC9C,MAAI;AAAEhE,SAAF;AAASsB,QAAT;AAAelF;AAAf,MAAwBoB,GAAG,CAACe,IAAhC,CAD8C,CAE9C;;AACAwL,iBAAe,CAAC+B,eAAhB,CAAgC1P,IAAhC,EAAsC4D,KAAtC,EAA6CsB,IAA7C,EAAmDpI,IAAnD,CACGE,MAAD,IAAY;AACVD,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAE8P,WAAK,EAAE,IAAT;AAAe5N,aAAO,EAAE;AAAxB,KAAvB;AACD,GAHH,EAIGxE,GAAD,IAAS;AACPL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBtC,GAAvB;AACD,GANH;AAQD,CAXD;;AAaAkB,OAAO,CAACqR,MAAR,GAAiB,CAACvO,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AACnC,MAAIxG,GAAG,CAACwO,OAAR,EACExO,GAAG,CAACwO,OAAJ,CAAYC,OAAZ,CAAqBzS,GAAD,IAAS;AAC3B,QAAIA,GAAJ,EACEL,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,aAAO,EAAE,KADY;AAErBC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHI,KAAvB;AAKF7E,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,aAAO,EAAE,IAAX;AAAiBC,aAAO,EAAE;AAA1B,KAAvB;AACD,GARD;AASH,CAXD,C;;;;;;;;;;;ACjMA,MAAMkB,aAAa,GAAG3G,mBAAO,CAAC,4DAAD,CAA7B;;AACA,MAAM2T,cAAc,GAAG3T,mBAAO,CAAC,8DAAD,CAA9B;;AACA,MAAM4T,WAAW,GAAG5T,mBAAO,CAAC,wDAAD,CAA3B;;AACA,MAAM0D,SAAS,GAAG1D,mBAAO,CAAC,oDAAD,CAAP,CAA8B0D,SAAhD;;AACA,MAAM8J,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM6T,QAAQ,GAAG7T,mBAAO,CAAC,0BAAD,CAAP,CAAoB8T,KAApB,CAA0BD,QAA3C;;AACA,MAAMtJ,iBAAiB,GAAGvK,mBAAO,CAAC,0CAAD,CAAP,CAAyBuK,iBAAnD;;AAEApI,OAAO,CAAC4R,aAAR,GAAwB,OAAO9O,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAChD,MAAI;AACF,QAAI;AAAEvG,cAAF;AAAY8O,eAAZ;AAAuBC;AAAvB,QAAmChP,GAAG,CAACe,IAA3C;AACA,QAAIgD,MAAM,GAAG,MAAMrC,aAAa,CAACuN,aAAd,CAA4BhP,QAA5B,CAAnB;AACA,QAAI5C,MAAM,GAAGqE,aAAa,CAACoE,eAAd,CAA8BiJ,SAA9B,CAAb;;AACA,QAAIhL,MAAM,IAAI1G,MAAd,EAAsB;AACpB,UAAI6R,SAAS,GAAG,MAAMxN,aAAa,CAACyN,eAAd,CAA8BlP,QAA9B,EAAwC,EAC5D,GAAG5C,MADyD;AAE5D2R,eAF4D;AAG5DtB,iBAAS,EAAEnF,MAAM,CAAC6G,GAAP;AAHiD,OAAxC,CAAtB;;AAKA,UAAIF,SAAJ,EAAe;AACb,YAAI7R,MAAM,CAACA,MAAP,KAAkB,UAAtB,EACE,MAAMsR,WAAW,CAACvI,UAAZ,CAAuB;AAC3BC,aAAG,EAAEtC,MAAM,CAAC8B,UAAP,CAAkB,CAAlB,EAAqBS,EADC;AAE3B9H,kBAAQ,EAAEC,SAAS,CAACQ,WAFO;AAG3ByO,mBAAS,EAAEnF,MAAM,CAAC6G,GAAP;AAHgB,SAAvB,CAAN;AAKFzT,WAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,iBAAO,EAAE,IADU;AAEnBC,iBAAO,EAAG,uEAAsEnD,MAAM,CAACA,MAAO;AAF3E,SAArB;AAID;AACF,KAlBD,MAmBE1B,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GA3BD,CA2BE,OAAOkE,EAAP,EAAW;AACX/I,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAEkE,EAAE,CAAClE,OAAH,IAAc;AAFJ,KAArB;AAID;AACF,CAlCD;;AAoCAtD,OAAO,CAACmS,kBAAR,GAA6B,CAACrP,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC/C,MAAIlF,MAAM,GAAGtB,GAAG,CAACK,KAAJ,CAAUiG,EAAvB;AACA5E,eAAa,CAAC4N,oBAAd,CAAmChO,MAAnC,EAA2C5F,IAA3C,CACGE,MAAD,IAAY;AACVD,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB1C,MAAvB;AACD,GAHH,EAIGI,GAAD,IAAS;AACPL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHE,KAArB;AAKD,GAVH;AAYD,CAdD;;AAgBAtD,OAAO,CAAC+R,aAAR,GAAwB,CAACjP,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC1C,MAAIvG,QAAQ,GAAGD,GAAG,CAACK,KAAJ,CAAUJ,QAAzB;AACAyB,eAAa,CAACuN,aAAd,CAA4BhP,QAA5B,EAAsCvE,IAAtC,CACGE,MAAD,IAAY;AACVD,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GAHH,EAIGI,GAAD,IAAS;AACPL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFL,KAArB;AAID,GATH;AAWD,CAbD;;AAeAtD,OAAO,CAACqS,eAAR,GAA0B,CAACvP,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC5C,MAAI;AAAEvG,YAAF;AAAYtB,QAAZ;AAAkBiL,UAAlB;AAA0BC,gBAA1B;AAAwCrL;AAAxC,MAAqDwB,GAAG,CAACe,IAA7D;AACAW,eAAa,CACV6N,eADH,CACmBtP,QADnB,EAC6BtB,IAD7B,EACmCiL,MADnC,EAC2CC,YAD3C,EACyDrL,QADzD,EAEG9C,IAFH,CAGKE,MAAD,IAAY;AACVD,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB1C,MAArB;AACD,GALL,EAMKI,GAAD,IAAS;AACPL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHE,KAArB;AAKD,GAZL;AAcD,CAhBD;;AAkBAtD,OAAO,CAACsS,eAAR,GAA0B,OAAOxP,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAClD,MAAI;AACF,QAAI;AAAElG,UAAF;AAAQ+M;AAAR,QAAyBrN,GAAG,CAACK,KAAjC;AACA,QAAIoP,MAAM,GAAG,MAAM/N,aAAa,CAAC8N,eAAd,CAA8BlP,IAA9B,CAAnB;AACA,QAAI+E,YAAY,GAAG,MAAMC,iBAAiB,CAAC+H,YAAD,CAA1C;;AACA,QAAIhI,YAAJ,EAAkB;AAChB1J,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBmR,MAArB;AACD,KAFD,MAEO9T,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAE;AAA3B,KAArB;AACR,GAPD,CAOE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFL,KAArB;AAID;AACF,CAdD;;AAgBAtD,OAAO,CAACwS,UAAR,GAAqB,CAAC1P,GAAD,EAAMrE,GAAN,KAAc;AACjC,MAAIsE,QAAQ,GAAGD,GAAG,CAACK,KAAJ,CAAUJ,QAAzB;;AACA,MAAIA,QAAJ,EAAc;AACZ0O,eAAW,CAACrG,gBAAZ,CAA6BrI,QAA7B,EAAuCvE,IAAvC,CACG0L,KAAD,IAAW;AACT,UAAIuI,OAAO,GAAGvI,KAAK,CAACrB,GAAN,CAAWuH,GAAD,IAASA,GAAG,CAAC1D,MAAvB,CAAd;AACA,YAAMgG,eAAe,GAAG,CAAC,GAAG,IAAIC,GAAJ,CAAQF,OAAR,CAAJ,CAAxB;AACAhU,SAAG,CACA0B,MADH,CACU,GADV,EAEGiB,IAFH,CAGIsR,eAAe,CACZpF,MADH,CACWN,CAAD,IAAO,OAAOA,CAAP,KAAa,WAD9B,EAEGnE,GAFH,CAEQ+J,CAAD,KAAQ;AAAElG,cAAM,EAAEkG;AAAV,OAAR,CAFP,CAHJ;AAOD,KAXH,EAYG9T,GAAD,IAAS;AACPL,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,KADU;AAEnBC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJiB,OAArB;AAMD,KAnBH;AAqBD,GAtBD,MAuBE7E,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,WAAO,EAAE,KADU;AAEnBC,WAAO,EAAE;AAFU,GAArB;AAIH,CA7BD;;AA+BAtD,OAAO,CAAC6S,gBAAR,GAA2B,CAAC/P,GAAD,EAAMrE,GAAN,KAAc;AACvC,MAAI;AAAEsE,YAAF;AAAY2J;AAAZ,MAAuB5J,GAAG,CAACK,KAA/B;;AACA,MAAIJ,QAAJ,EAAc;AACZ0O,eAAW,CAACqB,sBAAZ,CAAmC/P,QAAnC,EAA6C2J,MAA7C,EAAqDlO,IAArD,CACG0L,KAAD,IAAW;AACT,UAAI6I,aAAa,GAAG7I,KAAK,CAACrB,GAAN,CAAWuH,GAAD,IAASA,GAAG,CAACzD,YAAvB,CAApB;AACA,YAAMqG,qBAAqB,GAAG,CAAC,GAAG,IAAIL,GAAJ,CAAQI,aAAR,CAAJ,CAA9B;AACAtU,SAAG,CACA0B,MADH,CACU,GADV,EAEGiB,IAFH,CAGI4R,qBAAqB,CAClB1F,MADH,CACWN,CAAD,IAAO,OAAOA,CAAP,KAAa,WAD9B,EAEGnE,GAFH,CAEQ+J,CAAD,KAAQ;AAAEjG,oBAAY,EAAEiG;AAAhB,OAAR,CAFP,CAHJ;AAOD,KAXH,EAYG9T,GAAD,IAAS;AACPL,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,KADU;AAEnBC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHE,OAArB;AAKD,KAlBH;AAoBD,GArBD,MAsBE7E,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,WAAO,EAAE,KADU;AAEnBC,WAAO,EAAE;AAFU,GAArB;AAIH,CA5BD;;AA8BAtD,OAAO,CAACiT,gBAAR,GAA2B,CAACnQ,GAAD,EAAMrE,GAAN,KAAc;AACvC,MAAI;AAAEsE,YAAF;AAAYlC;AAAZ,MAAuBiC,GAAG,CAACe,IAA/B;;AACA,MAAI6N,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9ByB,iBAAa,CACVyO,gBADH,CACoBlQ,QADpB,EAC8BlC,MAD9B,EAEGrC,IAFH,CAES0U,GAAD,IAAS;AACbzU,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,IADU;AAEnBC,eAAO,EACL;AAHiB,OAArB;AAKD,KARH,EASGzE,KATH,CASUC,GAAD,IAAS;AACdL,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,KADU;AAEnBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFL,OAArB;AAID,KAdH;AAeD,GAhBD,MAiBE7E,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,WAAO,EAAE,KADU;AAEnBC,WAAO,EAAE;AAFU,GAArB;AAIH,CAvBD;;AAyBAtD,OAAO,CAACmT,eAAR,GAA0B,CAACrQ,GAAD,EAAMrE,GAAN,KAAc;AACtC,MAAI;AAAEsE;AAAF,MAAeD,GAAG,CAACK,KAAvB;;AACA,MAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9ByB,iBAAa,CACV2O,eADH,CACmBpQ,QADnB,EAEGvE,IAFH,CAESqC,MAAD,IAAY;AAChBpC,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB,EAAE,GAAGP;AAAL,OAArB;AACD,KAJH,EAKGhC,KALH,CAKUC,GAAD,IAAS;AACdL,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,KADU;AAEnBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFL,OAArB;AAID,KAVH;AAWD,GAZD,MAaE7E,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,WAAO,EAAE,KADU;AAEnBC,WAAO,EAAE;AAFU,GAArB;AAIH,CAnBD;;AAqBAtD,OAAO,CAACoT,gBAAR,GAA2B,OAAOtQ,GAAP,EAAYrE,GAAZ,KAAoB;AAC7C,MAAI;AACF,QAAI;AAAEsE,cAAF;AAAY2J;AAAZ,QAAuB5J,GAAG,CAACe,IAA/B;;AACA,QAAI6N,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,UAAImQ,GAAG,GAAG,MAAM1B,cAAc,CAAC4B,gBAAf,CAAgCrQ,QAAhC,EAA0C2J,MAA1C,CAAhB;AAEAjO,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,IADU;AAEnBC,eAAO,EAAE;AAFU,OAArB;AAID,KAPD,MAQE7E,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GAdD,CAcE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFL,KAArB;AAID;AACF,CArBD;;AAuBAtD,OAAO,CAACqT,gBAAR,GAA2B,OAAOvQ,GAAP,EAAYrE,GAAZ,KAAoB;AAC7C,MAAI;AACF,QAAI;AAAEsE;AAAF,QAAeD,GAAG,CAACK,KAAvB;;AACA,QAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,UAAI0P,OAAO,GAAG,MAAMjB,cAAc,CAAC6B,gBAAf,CAAgCtQ,QAAhC,CAApB;AACAtE,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB,EAAE,GAAGqR;AAAL,OAArB;AACD,KAHD,MAIEhU,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GAVD,CAUE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHE,KAArB;AAKD;AACF,CAlBD;;AAoBAtD,OAAO,CAACoL,gBAAR,GAA2B,OAAOtI,GAAP,EAAYrE,GAAZ,KAAoB;AAC7C,MAAI;AACF,QAAI;AAAEsE;AAAF,QAAeD,GAAG,CAACK,KAAvB;;AACA,QAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,UAAImH,KAAK,GAAG,MAAM1F,aAAa,CAAC4G,gBAAd,CAA+BrI,QAA/B,CAAlB;AACAtE,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB8I,KAArB;AACD,KAHD,MAIEzL,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GAVD,CAUE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBkC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAFE,KAArB;AAID;AACF,CAjBD;;AAmBAtD,OAAO,CAACsT,gBAAR,GAA2B,OAAOxQ,GAAP,EAAYrE,GAAZ,KAAoB;AAC7C,MAAI;AACF,QAAI;AAAEsE;AAAF,QAAeD,GAAG,CAACK,KAAvB;;AACA,QAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,UAAIwQ,IAAI,GAAG,MAAM/B,cAAc,CAAC8B,gBAAf,CAAgCvQ,QAAhC,CAAjB,CAD8B,CAE9B;;AACAtE,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBmS,IAArB;AACD,KAJD,MAKE9U,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GAXD,CAWE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBkC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAFE,KAArB;AAID;AACF,CAlBD;;AAoBAtD,OAAO,CAACwT,sBAAR,GAAiC,OAAO1Q,GAAP,EAAYrE,GAAZ,KAAoB;AACnD,MAAI;AACF,QAAI;AAAEsE;AAAF,QAAeD,GAAG,CAACK,KAAvB;;AACA,QAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,UAAIwQ,IAAI,GAAG,MAAM/B,cAAc,CAACgC,sBAAf,CAAsCzQ,QAAtC,CAAjB;AACAtE,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBmS,IAArB;AACD,KAHD,MAIE9U,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GAVD,CAUE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBkC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAFE,KAArB;AAID;AACF,CAjBD;;AAmBAtD,OAAO,CAACyT,2BAAR,GAAsC,OAAO3Q,GAAP,EAAYrE,GAAZ,KAAoB;AACxD,MAAI;AACF,UAAM;AAAEsE;AAAF,QAAeD,GAAG,CAACK,KAAzB;;AACA,QAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,YAAM2Q,SAAS,GAAG,MAAMlC,cAAc,CAACgC,sBAAf,CAAsCzQ,QAAtC,CAAxB;AACA,YAAMmH,KAAK,GAAG,MAAMuH,WAAW,CAACrG,gBAAZ,CAA6BrI,QAA7B,CAApB;AAEA,YAAM4Q,aAAa,GAAGD,SAAS,CAAC7K,GAAV,CAAe+K,CAAD,IAAO;AACzC,YAAIC,YAAY,GAAG3J,KAAK,CAACoD,MAAN,CAAcN,CAAD,IAC9BA,CAAC,CAACG,SAAF,GAAcH,CAAC,CAACG,SAAF,CAAY3N,QAAZ,OAA2BoU,CAAC,CAACzK,GAAF,CAAM3J,QAAN,EAAzC,GAA4D,KAD3C,CAAnB;AAGA,eAAO;AACLsU,iBAAO,EAAE,EAAE,GAAGF;AAAL,WADJ;AAEL1J,eAAK,EAAE2J,YAAY,CAAChL,GAAb,CAAkBkL,EAAD,KAAS;AAC/B3K,cAAE,EAAE2K,EAAE,CAAC5K,GAAH,CAAO3J,QAAP,EAD2B;AAE/BiC,gBAAI,EAAEsS,EAAE,CAACtS,IAFsB;AAG/BiH,kBAAM,EAAEqL,EAAE,CAACrL,MAHoB;AAI/BsL,mBAAO,EAAE,OAAOD,EAAE,CAACC,OAAV,KAAsB,WAAtB,GAAoCD,EAAE,CAACC,OAAvC,GAAiD;AAJ3B,WAAT,CAAjB;AAFF,SAAP;AASD,OAbqB,CAAtB;AAeAvV,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBuS,aAArB;AACD,KApBD,MAqBElV,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GA3BD,CA2BE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBkC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAFE,KAArB;AAID;AACF,CAlCD;;AAoCAtD,OAAO,CAACiU,wBAAR,GAAmC,OAAOnR,GAAP,EAAYrE,GAAZ,KAAoB;AACrD,MAAI;AACF,UAAM;AAAEsE,cAAF;AAAYoK,eAAZ;AAAuB6G;AAAvB,QAAmClR,GAAG,CAACe,IAA7C;;AACA,QAAI6N,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,YAAMmH,KAAK,GAAG,MAAMuH,WAAW,CAACtG,mBAAZ,CAAgCpI,QAAhC,EAA0CoK,SAA1C,CAApB;AAEA,UAAI9E,KAAK,GAAG,EAAZ;AACA6B,WAAK,CAAC1D,OAAN,CAAewG,CAAD,IAAO;AACnB3E,aAAK,CAAC5B,IAAN,CAAWgL,WAAW,CAACyC,aAAZ,CAA0BlH,CAAC,CAAC7D,GAAF,CAAM3J,QAAN,EAA1B,EAA4CwU,OAA5C,CAAX;AACD,OAFD;AAGA,YAAMrV,OAAO,CAAC4J,GAAR,CAAYF,KAAZ,CAAN;AACA5J,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB8I,KAAK,CAACrB,GAAN,CAAWmE,CAAD,KAAQ,EAAE,GAAGA,CAAL;AAAQgH;AAAR,OAAR,CAAV,CAArB;AACD,KATD,MAUEvV,GAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,aAAO,EAAE,KADU;AAEnBC,aAAO,EAAE;AAFU,KAArB;AAIH,GAhBD,CAgBE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBkC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAHiB,KAArB;AAKD;AACF,CAxBD;;AA0BAtD,OAAO,CAACmU,uBAAR,GAAkC,OAAOrR,GAAP,EAAYrE,GAAZ,KAAoB;AACpD,MAAI;AACF,UAAM;AAAEsE;AAAF,QAAeD,GAAG,CAACK,KAAzB;;AACA,QAAIuO,QAAQ,CAACT,OAAT,CAAiBlO,QAAjB,CAAJ,EAAgC;AAC9B,YAAM2Q,SAAS,GAAG,MAAMlC,cAAc,CAACgC,sBAAf,CAAsCzQ,QAAtC,CAAxB;AACA,YAAMmH,KAAK,GAAG,MAAMuH,WAAW,CAACrG,gBAAZ,CAA6BrI,QAA7B,CAApB;AACA,YAAM4Q,aAAa,GAAGD,SAAS,CAAC7K,GAAV,CAAe+K,CAAD,IAAO;AACzC,YAAIC,YAAY,GAAG3J,KAAK,CAACoD,MAAN,CAAcN,CAAD,IAC9BA,CAAC,CAACG,SAAF,GAAcH,CAAC,CAACG,SAAF,CAAY3N,QAAZ,OAA2BoU,CAAC,CAACzK,GAAF,CAAM3J,QAAN,EAAzC,GAA4D,KAD3C,CAAnB;AAGA,eAAO;AACLsU,iBAAO,EAAE,EAAE,GAAGF;AAAL,WADJ;AAELzT,gBAAM,EAAE;AACNuI,kBAAM,EAAEmL,YAAY,CAACO,IAAb,CAAmBpH,CAAD,IAAOA,CAAC,CAACtE,MAA3B,CADF;AAENsL,mBAAO,EAAEH,YAAY,CAClBvG,MADM,CACEN,CAAD,IAAOA,CAAC,CAACtE,MADV,EAEN0L,IAFM,CAEApH,CAAD,IACJ,OAAOA,CAAC,CAACgH,OAAT,KAAqB,WAArB,GAAmChH,CAAC,CAACgH,OAArC,GAA+C,KAH1C,CAFH;AAONK,iBAAK,EAAER,YAAY,CAAChL,GAAb,CAAkBmE,CAAD,IAAOA,CAAC,CAACqH,KAAF,IAAW,EAAnC,EAAuCC,IAAvC;AAPD;AAFH,SAAP;AAYD,OAhBqB,CAAtB;AAkBA7V,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqBuS,aAArB;AACD,KAtBD,MAsBO;AACLlV,SAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBiC,eAAO,EAAE,KADU;AAEnBC,eAAO,EAAE;AAFU,OAArB;AAID;AACF,GA9BD,CA8BE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,GAAX,EAAgBiB,IAAhB,CAAqB;AACnBkC,aAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAHiB,KAArB;AAKD;AACF,CAtCD,C;;;;;;;;;;;AC3XA,MAAMmO,WAAW,GAAG5T,mBAAO,CAAC,wDAAD,CAA3B;;AACA,MAAM0D,SAAS,GAAG1D,mBAAO,CAAC,oDAAD,CAAP,CAA8B0D,SAAhD;;AACA,MAAMgT,YAAY,GAAG1W,mBAAO,CAAC,4DAAD,CAA5B;;AACA,MAAMuK,iBAAiB,GAAGvK,mBAAO,CAAC,0CAAD,CAAP,CAAyBuK,iBAAnD;;AACA,MAAMoM,UAAU,GAAG3W,mBAAO,CAAC,kEAAD,CAA1B;;AACAmC,OAAO,CAACkP,cAAR,GAAyB,CAACpM,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC3C;AACA,MAAI;AACF7H,QADE;AAEFmG,YAFE;AAGFoH,aAHE;AAIFlH,SAJE;AAKFiH,YALE;AAMFlH,aANE;AAOF+G,cAPE;AAQFC,YARE;AASFC,WATE;AAUFxJ;AAVE,MAWAxC,GAAG,CAACe,IAXR,CAF2C,CAc3C;;AACA4N,aAAW,CAACrJ,iBAAZ,CAA8B9C,KAA9B,EAAqC9G,IAArC,CACGiW,IAAD,IAAU;AACR;AACAhD,eAAW,CACRiD,QADH,CACY;AACRjT,UADQ;AAERmG,cAFQ;AAGRoH,eAHQ;AAIRlH,WAJQ;AAKRiH,cALQ;AAMRlH,eANQ;AAOR+G,gBAPQ;AAQRC,cARQ;AASRC,aATQ;AAUR6F,mBAAa,EAAE;AAVP,KADZ,EAaGnW,IAbH,CAcKoW,OAAD,IAAa;AACXnW,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,eAAO,EAAE,IADY;AAErBC,eAAO,EAAE7E,GAAG,CAAC6E,OAAJ,IAAe;AAFH,OAAvB;AAID,KAnBL,EAoBKxE,GAAD,IAAS;AACPL,SAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,OAFR;AAGD,KAxBL;AA0BD,GA7BH,EA8BGxE,GAAD,IAAS;AACPL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD,GAlCH;AAoCD,CAnDD;;AAqDAtD,OAAO,CAACiP,gBAAR,GAA2B,CAACnM,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC7C,MAAI;AACF7H,QADE;AAEFmG,YAFE;AAGFoH,aAHE;AAIFlH,SAJE;AAKFiH,YALE;AAMFlH,aANE;AAOF+G,cAPE;AAQFC,YARE;AASFC,WATE;AAUFxJ;AAVE,MAWAxC,GAAG,CAACe,IAXR,CAD6C,CAa7C;;AACA4N,aAAW,CAACrJ,iBAAZ,CAA8B9C,KAA9B,EAAqC9G,IAArC,CACGiW,IAAD,IAAU;AACR;AACAhD,eAAW,CACRiD,QADH,CACY;AACRjT,UADQ;AAERmG,cAFQ;AAGRoH,eAHQ;AAIRlH,WAJQ;AAKRiH,cALQ;AAMRlH,eANQ;AAOR+G,gBAPQ;AAQRE,aARQ;AASRD,cATQ;AAUR8F,mBAAa,EAAE;AAVP,KADZ,EAaGnW,IAbH,CAcKoW,OAAD,IAAa;AACXnW,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,eAAO,EAAE,IADY;AAErBC,eAAO,EAAE7E,GAAG,CAAC6E,OAAJ,IAAe;AAFH,OAAvB;AAID,KAnBL,EAoBKxE,GAAD,IAAS;AACPL,SAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,OAFR;AAGD,KAxBL;AA0BD,GA7BH,EA8BGxE,GAAD,IAAS;AACPL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD,GAlCH;AAoCD,CAlDD;;AAoDAtD,OAAO,CAACmP,aAAR,GAAwB,CAACrM,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC1C,MAAI;AACF7H,QADE;AAEFmG,YAFE;AAGFoH,aAHE;AAIFlH,SAJE;AAKFiH,YALE;AAMFlH,aANE;AAOF+G,cAPE;AAQFC,YARE;AASFC,WATE;AAUFxJ;AAVE,MAWAxC,GAAG,CAACe,IAXR,CAD0C,CAa1C;;AACA4N,aAAW,CAACrJ,iBAAZ,CAA8B9C,KAA9B,EAAqC9G,IAArC,CACGiW,IAAD,IAAU;AACR;AACAhD,eAAW,CACRiD,QADH,CACY;AACRjT,UADQ;AAERmG,cAFQ;AAGRoH,eAHQ;AAIRlH,WAJQ;AAKRiH,cALQ;AAMRlH,eANQ;AAOR+G,gBAPQ;AAQRC,cARQ;AASRC,aATQ;AAUR6F,mBAAa,EAAE;AAVP,KADZ,EAaGnW,IAbH,CAcKoW,OAAD,IAAa;AACXnW,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,eAAO,EAAE,IADY;AAErBC,eAAO,EAAE7E,GAAG,CAAC6E,OAAJ,IAAe;AAFH,OAAvB;AAID,KAnBL,EAoBKxE,GAAD,IAAS;AACPL,SAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,OAFR;AAGD,KAxBL;AA0BD,GA7BH,EA8BGxE,GAAD,IAAS;AACPL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD,GAlCH;AAoCD,CAlDD;;AAoDAtD,OAAO,CAACmE,iBAAR,GAA4B,CAACrB,GAAD,EAAMrE,GAAN,KAAc;AACxC,MAAI;AAAE2F,UAAF;AAAUyQ;AAAV,MAAuB/R,GAAG,CAACe,IAA/B;AACA4N,aAAW,CACRtN,iBADH,CACqBC,MADrB,EAC6ByQ,QAD7B,EAEGrW,IAFH,CAESsW,OAAD,IAAa;AACjBrW,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,IAAX;AAAiBC,aAAO,EAAE;AAA1B,KAFR;AAGD,GANH,EAOGzE,KAPH,CAOUC,GAAD,IAAS;AACdL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD,GAXH;AAYD,CAdD;;AAgBAtD,OAAO,CAACoP,aAAR,GAAwB,CAACtM,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AAC1C,MAAI;AACF7H,QADE;AAEFmG,YAFE;AAGFoH,aAHE;AAIFlH,SAJE;AAKFiH,YALE;AAMFlH,aANE;AAOF+G,cAPE;AAQFC,YARE;AASFC,WATE;AAUFxJ;AAVE,MAWAxC,GAAG,CAACe,IAXR,CAD0C,CAa1C;;AACA4N,aAAW,CAACrJ,iBAAZ,CAA8B9C,KAA9B,EAAqC9G,IAArC,CACGiW,IAAD,IAAU;AACR;AACAhD,eAAW,CACRsD,oBADH,CACwB;AACpBtT,UADoB;AAEpBmG,cAFoB;AAGpBoH,eAHoB;AAIpBlH,WAJoB;AAKpBiH,cAAQ,EAAEA,QALU;AAMpBlH,eANoB;AAOpB+G,gBAPoB;AAQpBC,cARoB;AASpBC,aAToB;AAUpB6F,mBAAa,EAAE;AAVK,KADxB,EAaGnW,IAbH,CAcKoW,OAAD,IAAa;AACXnW,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,eAAO,EAAE,IADY;AAErBC,eAAO,EAAE7E,GAAG,CAAC6E,OAAJ,IAAe;AAFH,OAAvB;AAID,KAnBL,EAoBKxE,GAAD,IAAS;AACPL,SAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,OAFR;AAGD,KAxBL;AA0BD,GA7BH,EA8BGxE,GAAD,IAAS;AACPL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD,GAlCH;AAoCD,CAlDD;;AAoDAtD,OAAO,CAACgV,oBAAR,GAA+B,OAAOlS,GAAP,EAAYrE,GAAZ,KAAoB;AACjD,MAAI;AACF,QAAI;AAAEqJ,WAAF;AAASqI;AAAT,QAA0BrN,GAAG,CAACe,IAAlC;AACA,QAAIsE,YAAY,GAAG,MAAMC,iBAAiB,CAAC+H,YAAD,CAA1C;;AAEA,QAAIhI,YAAJ,EAAkB;AAChB,UAAI8M,QAAQ,GAAG,MAAMxD,WAAW,CAACyD,kBAAZ,CAA+BpN,KAA/B,CAArB;;AAEA,UAAImN,QAAJ,EAAc;AACZ,YAAIE,QAAQ,GAAG,MAAMX,UAAU,CAAChL,iBAAX,CAA6B1B,KAA7B,EAAoCmN,QAApC,CAArB;AAEAxW,WAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkC,iBAAO,EAAE;AADY,SAAvB;AAGD,OAND,MAMO;AACL7E,WAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkC,iBAAO,EAAE;AADY,SAAvB;AAGD;AACF,KAdD,MAeE7E,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkC,aAAO,EAAE;AADY,KAAvB;AAGH,GAtBD,CAsBE,OAAOxE,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,OAAZ,EAAqBhF,GAArB;AACAL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBkC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AADH,KAAvB;AAGD;AACF,CA7BD;;AA+BAtD,OAAO,CAACoV,gBAAR,GAA2B,OAAOtS,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AACnD,MAAI;AACF,UAAM;AAAE7H,UAAF;AAAQmG,cAAR;AAAkBoH,eAAlB;AAA6BlH,WAA7B;AAAoCD;AAApC,QAAkD/E,GAAG,CAACe,IAA5D;AACA,UAAMvC,QAAQ,GAAGC,SAAS,CAACuB,GAAG,CAACuS,MAAJ,CAAW/T,QAAZ,CAA1B;;AACA,QAAI,CAACA,QAAL,EAAe;AACb7C,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAE;AAA3B,OAAvB;AACA;AACD;;AACD,UAAM5E,MAAM,GAAG,MAAM+S,WAAW,CAACiD,QAAZ,CAAqB;AACxCjT,UADwC;AAExCmG,cAFwC;AAGxCoH,eAHwC;AAIxClH,WAJwC;AAKxCD,eALwC;AAMxC8M,mBAAa,EAAE,KANyB;AAOxCrT;AAPwC,KAArB,CAArB;AASA7C,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,aAAO,EAAE,IADY;AAErBC,aAAO,EAAE5E,MAAM,CAAC4E,OAAP,IAAkB;AAFN,KAAvB;AAID,GApBD,CAoBE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CA1BD;;AA4BAtD,OAAO,CAACsV,kBAAR,GAA6B,OAAOxS,GAAP,EAAYrE,GAAZ,KAAoB;AAC/C,MAAI;AACF,QAAI;AACFgD,UADE;AAEFmG,cAFE;AAGFoH,eAHE;AAIFlH,WAJE;AAKFiH,cALE;AAMFlH,eANE;AAOF+G,gBAPE;AAQFC,cARE;AASFC,aATE;AAUF+F,cAVE;AAWF9R,cAXE;AAYF2J,YAZE;AAaFC,kBAbE;AAcFvJ,UAdE;AAeF9B,cAfE;AAgBF6O,kBAhBE,CAgBY;;AAhBZ,QAiBArN,GAAG,CAACe,IAjBR;AAkBA,QAAIsE,YAAY,GAAG,MAAMC,iBAAiB,CAAC+H,YAAD,CAA1C;;AACA,QAAIhI,YAAJ,EAAkB;AAChB,UAAIoN,OAAO,GAAG,MAAMhB,YAAY,CAACiB,eAAb,CAA6BpS,IAA7B,CAApB;AACA,UAAIqS,IAAI,GAAG,IAAX;;AACA,UAAI1G,QAAQ,IAAIA,QAAQ,CAAC2G,IAAT,OAAoB,EAApC,EAAwC;AACtCD,YAAI,GAAG,MAAMhE,WAAW,CAACsD,oBAAZ,CAAiC;AAC5CtT,cAD4C;AAE5CmG,kBAF4C;AAG5CoH,mBAH4C;AAI5ClH,eAJ4C;AAK5CiH,kBAL4C;AAM5ClH,mBAN4C;AAO5CgN,kBAP4C;AAQ5CjG,oBAR4C;AAS5CC,kBAT4C;AAU5CC,iBAV4C;AAW5CjI,gBAAM,EAAE9D,QAXoC;AAY5C2J,gBAZ4C;AAa5CC,sBAb4C;AAc5CrL,kBAd4C;AAe5CqT,uBAAa,EAAE,KAf6B,CAetB;;AAfsB,SAAjC,CAAb;AAiBD,OAlBD,MAkBO;AACLc,YAAI,GAAG,MAAMhE,WAAW,CAACiD,QAAZ,CAAqB;AAChCjT,cADgC;AAEhCmG,kBAFgC;AAGhCoH,mBAHgC;AAIhClH,eAJgC;AAKhCiH,kBALgC;AAMhClH,mBANgC;AAOhCgN,kBAPgC;AAQhCjG,oBARgC;AAShCC,kBATgC;AAUhCC,iBAVgC;AAWhCjI,gBAAM,EAAE9D,QAXwB;AAYhC2J,gBAZgC;AAahCC,sBAbgC;AAchCrL,kBAdgC;AAehCqT,uBAAa,EAAE;AAfiB,SAArB,CAAb;AAiBD;;AACD,UAAIgB,UAAU,GAAG,MAAMpB,YAAY,CAACqB,sBAAb,CACrBxS,IADqB,EAErBqS,IAAI,CAACpF,QAAL,CAAcM,IAAd,CAAmBxH,GAAnB,CAAuB3J,QAAvB,EAFqB,CAAvB;AAKAf,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,eAAO,EAAE,IADY;AAErBC,eAAO,EAAEqS,UAAU,CAACrS,OAAX,IAAsB;AAFV,OAAvB;AAID,KAjDD,MAiDO7E,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAE;AAA3B,KAAvB;AACR,GAtED,CAsEE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CA5ED;;AA8EAtD,OAAO,CAAC6V,aAAR,GAAwB,OAAO/S,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAChD,MAAI;AACF,UAAMhI,QAAQ,GAAGC,SAAS,CAACuB,GAAG,CAACuS,MAAJ,CAAW/T,QAAZ,CAA1B;;AACA,QAAI,CAACA,QAAL,EAAe;AACb7C,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAE;AAA3B,OAAvB;AACA;AACD;;AACD,UAAM5E,MAAM,GAAG,MAAM+S,WAAW,CAACoE,aAAZ,CAA0BvU,QAA1B,CAArB;AACA7C,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AAAEiC,aAAO,EAAE,IAAX;AAAiB/E,UAAI,EAAEI;AAAvB,KAAvB;AACD,GARD,CAQE,OAAOI,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAdD;;AAgBAtD,OAAO,CAAC8V,WAAR,GAAsB,OAAOhT,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC9C,MAAI;AACFmI,eAAW,CAACsE,cAAZ,CAA2BjT,GAAG,CAACK,KAAJ,CAAUmC,KAArC,EAA4C9G,IAA5C,CACGE,MAAD,IAAY;AACVD,SAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB1C,MAAvB;AACD,KAHH,EAIGI,GAAD,IAAS;AACPL,SAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,OAFR;AAGD,KARH;AAUD,GAXD,CAWE,OAAOxE,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAjBD;;AAmBAtD,OAAO,CAACgW,WAAR,GAAsB,OAAOlT,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC9C,MAAI;AACF,QAAI5K,MAAM,GAAG,MAAM+S,WAAW,CAACuE,WAAZ,CAAwBlT,GAAG,CAACK,KAAJ,CAAUiG,EAAlC,CAAnB;AACA3K,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB1C,MAAvB;AACD,GAHD,CAGE,OAAOI,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CATD;;AAWAtD,OAAO,CAACiW,WAAR,GAAsB,OAAOnT,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC9C,MAAI;AACF,QAAI4M,QAAQ,GAAG,MAAMzE,WAAW,CAAC0E,gBAAZ,CAA6BrT,GAAG,CAACK,KAAJ,CAAUiB,MAAvC,CAArB;AACA3F,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB8U,QAAvB;AACD,GAHD,CAGE,OAAOpX,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CATD;;AAWAtD,OAAO,CAACoW,WAAR,GAAsB,OAAOtT,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AAC9C,MAAI;AACF,QAAI;AAAE+M,UAAF;AAAQjS;AAAR,QAAmBtB,GAAG,CAACe,IAA3B;AACA,QAAIqS,QAAQ,GAAG,MAAMzE,WAAW,CAAC6E,iBAAZ,CAA8BlS,MAA9B,EAAsCiS,IAAtC,CAArB;AACA5X,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB8U,QAAvB;AACD,GAJD,CAIE,OAAOpX,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAACuW,cAAR,GAAyB,OAAOzT,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AACjD,MAAI;AACF,QAAI;AAAE+M,UAAF;AAAQjS;AAAR,QAAmBtB,GAAG,CAACe,IAA3B;AACA,QAAIqS,QAAQ,GAAG,MAAMzE,WAAW,CAAC+E,mBAAZ,CAAgCpS,MAAhC,EAAwCiS,IAAxC,CAArB;AACA5X,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB8U,QAAvB;AACD,GAJD,CAIE,OAAOpX,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAACyW,gBAAR,GAA2B,OAAO3T,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AACnD,MAAI;AACF,QAAI;AAAEmF,eAAF;AAAarK;AAAb,QAAwBtB,GAAG,CAACe,IAAhC;AACA,QAAIsI,UAAU,GAAG,MAAMsF,WAAW,CAACgF,gBAAZ,CAA6BrS,MAA7B,EAAqCqK,SAArC,CAAvB;AACAhQ,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB+K,UAAvB;AACD,GAJD,CAIE,OAAOrN,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAAC0W,iBAAR,GAA4B,OAAO5T,GAAP,EAAYrE,GAAZ,KAAoB;AAC9C,MAAI;AACF,QAAI;AAAEsE,cAAF;AAAY2J,YAAZ;AAAoBC;AAApB,QAAqC7J,GAAG,CAACK,KAA7C;AACA,QAAI+G,KAAK,GAAG,MAAMuH,WAAW,CAACiF,iBAAZ,CAChB3T,QADgB,EAEhB2J,MAFgB,EAGhBC,YAHgB,CAAlB;AAKAlO,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB8I,KAAvB;AACD,GARD,CAQE,OAAOpL,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAdD;;AAgBAtD,OAAO,CAAC2W,cAAR,GAAyB,OAAO7T,GAAP,EAAYrE,GAAZ,EAAiB6K,IAAjB,KAA0B;AACjD,MAAI;AACF,QAAI;AAAElF;AAAF,QAAatB,GAAG,CAACe,IAArB;AACA,QAAI+S,cAAc,GAAG,MAAMnF,WAAW,CAACkF,cAAZ,CAA2BvS,MAA3B,CAA3B;AACA3F,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBwV,cAAvB;AACD,GAJD,CAIE,OAAO9X,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAAC6W,kBAAR,GAA6B,OAAO/T,GAAP,EAAYrE,GAAZ,KAAoB;AAC/C,MAAI;AACF,QAAI;AAAE2F;AAAF,QAAatB,GAAG,CAACK,KAArB;AACA,QAAI2T,eAAe,GAAG,MAAMrF,WAAW,CAACoF,kBAAZ,CAA+BzS,MAA/B,CAA5B;AACA3F,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB0V,eAAvB;AACD,GAJD,CAIE,OAAOhY,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAAC+W,cAAR,GAAyB,OAAOjU,GAAP,EAAYrE,GAAZ,KAAoB;AAC3C,MAAI;AACF,QAAI;AAAEmI,UAAF;AAAQmI;AAAR,QAAqBjM,GAAG,CAACK,KAA7B;AACA,QAAI6T,IAAI,GAAG7Q,MAAM,CAACC,IAAP,CAAY2I,QAAZ,EAAsB,QAAtB,CAAX;AACA,QAAIkI,eAAe,GAAGD,IAAI,CAACxX,QAAL,CAAc,OAAd,CAAtB;AACA,QAAI0X,UAAU,GAAG,MAAMzF,WAAW,CAACsF,cAAZ,CAA2BnQ,IAA3B,EAAiCqQ,eAAjC,CAAvB;AACAxY,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB8V,UAAvB;AACD,GAND,CAME,OAAOpY,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,aAAO,EAAE,KADY;AAErBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFH,KAAvB;AAID;AACF,CAbD;;AAeAtD,OAAO,CAACmX,cAAR,GAAyB,OAAOrU,GAAP,EAAYrE,GAAZ,KAAoB;AAC3C,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAU2K,cAAV;AAAoBtF;AAApB,QAAqC3G,GAAG,CAACe,IAA7C;AACA,QAAImT,IAAI,GAAG7Q,MAAM,CAACC,IAAP,CAAY2I,QAAZ,EAAsB,QAAtB,CAAX;AACA,QAAIkI,eAAe,GAAGD,IAAI,CAACxX,QAAL,CAAc,OAAd,CAAtB;AAEA,QAAI4X,KAAK,GAAGjR,MAAM,CAACC,IAAP,CAAYqD,YAAZ,EAA0B,QAA1B,CAAZ;AACA,QAAI4N,mBAAmB,GAAGD,KAAK,CAAC5X,QAAN,CAAe,OAAf,CAA1B;AAEA,QAAI0X,UAAU,GAAG,MAAMzF,WAAW,CAAC0F,cAAZ,CACrB/S,MADqB,EAErB6S,eAFqB,EAGrBI,mBAHqB,CAAvB;AAKA5Y,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB8V,UAAvB;AACD,GAdD,CAcE,OAAOpY,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,aAAO,EAAE,KADY;AAErBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFH,KAAvB;AAID;AACF,CArBD;;AAuBAtD,OAAO,CAACsX,qBAAR,GAAgC,OAAOxU,GAAP,EAAYrE,GAAZ,KAAoB;AAClD,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAUmT,qBAAV;AAA2BC;AAA3B,QAA2C1U,GAAG,CAACe,IAAnD;AACA0T,mBAAe,GAAGpR,MAAM,CAACC,IAAP,CAAYmR,eAAZ,EAA6B,QAA7B,EAAuC/X,QAAvC,CAAgD,OAAhD,CAAlB;AACAgY,eAAW,GAAGrR,MAAM,CAACC,IAAP,CAAYoR,WAAZ,EAAyB,QAAzB,EAAmChY,QAAnC,CAA4C,OAA5C,CAAd;AACA,QAAId,MAAM,GAAG,MAAM+S,WAAW,CAAC6F,qBAAZ,CACjBlT,MADiB,EAEjBmT,eAFiB,EAGjBC,WAHiB,CAAnB;AAKA/Y,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB1C,MAAvB;AACD,GAVD,CAUE,OAAOI,GAAP,EAAY;AACZL,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,aAAO,EAAE,KADY;AAErBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFH,KAAvB;AAID;AACF,CAjBD;;AAmBAtD,OAAO,CAACyX,aAAR,GAAwB,OAAO3U,GAAP,EAAYrE,GAAZ,KAAoB;AAC1C,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAUsT;AAAV,QAA2B5U,GAAG,CAACe,IAAnC;AACA,QAAI8T,MAAM,GAAG,MAAMlG,WAAW,CAACgG,aAAZ,CAA0BrT,MAA1B,EAAkCsT,YAAlC,CAAnB;AACAjZ,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBuW,MAAvB;AACD,GAJD,CAIE,OAAO7Y,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAAC4X,cAAR,GAAyB,OAAO9U,GAAP,EAAYrE,GAAZ,KAAoB;AAC3C,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAU9C;AAAV,QAAuBwB,GAAG,CAACe,IAA/B;AACA,QAAI8T,MAAM,GAAG,MAAMlG,WAAW,CAACmG,cAAZ,CAA2BxT,MAA3B,EAAmC9C,QAAnC,CAAnB;AACA7C,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBuW,MAAvB;AACD,GAJD,CAIE,OAAO7Y,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAAC6X,iBAAR,GAA4B,OAAO/U,GAAP,EAAYrE,GAAZ,KAAoB;AAC9C,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAU0T;AAAV,QAAsBhV,GAAG,CAACe,IAA9B;AACA,QAAI8T,MAAM,GAAG,MAAMlG,WAAW,CAACoG,iBAAZ,CAA8BzT,MAA9B,EAAsC0T,OAAtC,CAAnB;AACArZ,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBuW,MAAvB;AACD,GAJD,CAIE,OAAO7Y,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAACkU,aAAR,GAAwB,OAAOpR,GAAP,EAAYrE,GAAZ,KAAoB;AAC1C,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAU4P;AAAV,QAAsBlR,GAAG,CAACe,IAA9B;AACA,QAAI8T,MAAM,GAAG,MAAMlG,WAAW,CAACyC,aAAZ,CAA0B9P,MAA1B,EAAkC4P,OAAlC,CAAnB;AACAvV,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBuW,MAAvB;AACD,GAJD,CAIE,OAAO7Y,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAAC+X,kBAAR,GAA6B,OAAOjV,GAAP,EAAYrE,GAAZ,KAAoB;AAC/C,MAAI;AACF,QAAI;AAAE2F;AAAF,QAAatB,GAAG,CAACK,KAArB;AACA,QAAI6U,SAAS,GAAG,MAAMvG,WAAW,CAACsG,kBAAZ,CAA+B3T,MAA/B,CAAtB;AACA3F,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB4W,SAAvB;AACD,GAJD,CAIE,OAAOlZ,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAACiY,WAAR,GAAsB,OAAOnV,GAAP,EAAYrE,GAAZ,KAAoB;AACxC,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAU8T;AAAV,QAAmBpV,GAAG,CAACe,IAA3B;AACA,QAAI8T,MAAM,GAAG,MAAMlG,WAAW,CAACwG,WAAZ,CAAwB7T,MAAxB,EAAgC8T,IAAhC,CAAnB;AACAzZ,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBuW,MAAvB;AACD,GAJD,CAIE,OAAO7Y,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD;;AAYAtD,OAAO,CAACmY,cAAR,GAAyB,OAAOrV,GAAP,EAAYrE,GAAZ,KAAoB;AAC3C,MAAI;AACF,QAAI;AAAE2F,YAAF;AAAU8T;AAAV,QAAmBpV,GAAG,CAACe,IAA3B;AACA,QAAI8T,MAAM,GAAG,MAAMlG,WAAW,CAAC0G,cAAZ,CAA2B/T,MAA3B,EAAmC8T,IAAnC,CAAnB;AACAzZ,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBuW,MAAvB;AACD,GAJD,CAIE,OAAO7Y,GAAP,EAAY;AACZL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CAVD,C;;;;;;;;;;;ACrnBA,MAAM;AACJ8U;AADI,IAEFva,mBAAO,CAAC,wFAAD,CAFX;;AAGA,MAAM;AAAEwa;AAAF,IAAmCxa,mBAAO,CAAC,wDAAD,CAAhD;;AACA,MAAMya,iBAAiB,GAAG9V,OAAO,CAACC,GAAR,CAAY8V,UAAtC;AACA,MAAMC,sBAAsB,GAAGhW,OAAO,CAACC,GAAR,CAAYgW,eAA3C;;AAEAzY,OAAO,CAAC0Y,UAAR,GAAqB,OAAO5V,GAAP,EAAYrE,GAAZ,KAAoB;AACvC,MAAI;AACF,QAAIH,IAAI,GAAGwE,GAAG,CAACwD,KAAJ,CAAU,CAAV,CAAX;AACA,UAAMqS,2BAA2B,GAAG,IAAIN,4BAAJ,CAClCC,iBADkC,CAApC;AAGA,UAAMM,MAAM,GAAG,IAAIR,oBAAJ,CACbO,2BADa,EAEbH,sBAFa,CAAf;AAKA,UAAMK,OAAO,GAAG,CACd;AACA;AAFc,KAAhB;AAIA,QAAI3Y,QAAQ,GAAG,MAAM0Y,MAAM,CAACE,4BAAP,CACnB,IADmB,EAEnBxa,IAAI,CAAC+L,MAFc,EAGnBwO,OAHmB,CAArB;AAKApa,OAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuBlB,QAAvB;AACD,GApBD,CAoBE,OAAOpB,GAAP,EAAY;AACZyB,WAAO,CAACF,KAAR,CAAcvB,GAAd;AACAL,OAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBC,aAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,KAFR;AAGD;AACF,CA3BD,C;;;;;;;;;;;ACPA,MAAMyV,OAAO,GAAGlb,mBAAO,CAAC,kDAAD,CAAvB;;AACA,MAAMmb,MAAM,GAAGnb,mBAAO,CAAC,gDAAD,CAAtB;;AACA,MAAM6F,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AAEA,MAAMyV,gBAAgB,GAAG,MAAOvQ,QAAP,IAAoB;AAC3C,MAAI;AACF,QAAIkW,eAAe,GAAG,MAAMD,MAAM,CAACE,gBAAP,CAAwBnW,QAAxB,CAA5B;AACA,QAAIgK,QAAQ,GAAG,EAAf;AACAkM,mBAAe,CAACxG,OAAhB,CAAwBjM,OAAxB,CAAiCsN,OAAD,IAAa;AAC3C/G,cAAQ,CAACtG,IAAT,CACEsS,OAAO,CAACI,gBAAR,CAAyBpW,QAAzB,EAAmC+Q,OAAO,CAACpH,MAA3C,EAAmDoH,OAAO,CAACsF,OAA3D,CADF;AAGD,KAJD;AAKA,QAAIC,cAAc,GAAG,MAAM1a,OAAO,CAAC4J,GAAR,CAAYwE,QAAZ,CAA3B;AACA,QAAIuM,WAAW,GAAG,MAAM5V,IAAI,CAAC0H,gBAAL,CAAsBrI,QAAtB,CAAxB;AACAxC,WAAO,CAACuD,GAAR,CAAYwV,WAAZ;AACA,QAAIC,kBAAkB,GAAG,EAAzB;AACAF,kBAAc,GAAG,GAAGtV,MAAH,CAAU,GAAGsV,cAAb,CAAjB;AACAC,eAAW,CAAC9S,OAAZ,CAAqBI,IAAD,IAAU;AAC5B,UAAIkN,OAAO,GAAGuF,cAAc,CAAC/L,MAAf,CACXsG,CAAD,IAAOA,CAAC,CAACnS,IAAF,KAAWmF,IAAI,CAAC8F,MAAhB,IAA0BkH,CAAC,CAAC4F,MAAF,KAAa5S,IAAI,CAAC+F,YADvC,CAAd;AAGAmH,aAAO,GAAGA,OAAO,CAAC1U,MAAR,GAAiB,CAAjB,GAAqB0U,OAAO,CAAC,CAAD,CAAP,CAAW3K,GAAX,CAAe3J,QAAf,EAArB,GAAiD,EAA3D;AACA,UAAIsU,OAAJ,EACEyF,kBAAkB,CAAC9S,IAAnB,CACE/C,IAAI,CAACwF,UAAL,CAAgB,EACd,GAAGtC,IADW;AAEduC,WAAG,EAAEvC,IAAI,CAACuC,GAAL,CAAS3J,QAAT,EAFS;AAGd2N,iBAAS,EAAE2G;AAHG,OAAhB,CADF;AAOH,KAbD;AAcA,QAAI2F,SAAS,GAAG,MAAM9a,OAAO,CAAC4J,GAAR,CAAYgR,kBAAZ,CAAtB;AACA,WAAOF,cAAP;AACD,GA7BD,CA6BE,OAAOva,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAjCD;;AAmCA,MAAMuU,gBAAgB,GAAG,MAAOtQ,QAAP,IAAoB;AAC3C,MAAI;AACF,WAAO,MAAMgW,OAAO,CAACW,kBAAR,CAA2B3W,QAA3B,CAAb;AACD,GAFD,CAEE,OAAOjE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMsU,gBAAgB,GAAG,OAAOrQ,QAAP,EAAiB2J,MAAjB,KAA4B;AACnD,MAAI;AACF,WAAO,MAAMqM,OAAO,CAACI,gBAAR,CACXpW,QADW,EAEX2J,MAAM,CAACA,MAFI,EAGXA,MAAM,CAAC0M,OAHI,CAAb;AAKD,GAND,CAME,OAAOta,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAVD;;AAYA,MAAM6a,yBAAyB,GAAG,OAAOC,UAAP,EAAmBJ,MAAnB,KAA8B;AAC9D,MAAI;AACF,WAAO,MAAMT,OAAO,CAACc,yBAAR,CAAkCD,UAAlC,EAA8CJ,MAA9C,CAAb;AACD,GAFD,CAEE,OAAO1a,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAM0U,sBAAsB,GAAG,MAAOzQ,QAAP,IAAoB;AACjD,MAAI;AACF,WAAO,MAAMgW,OAAO,CAACe,oBAAR,CAA6B/W,QAA7B,CAAb;AACD,GAFD,CAEE,OAAOjE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQAiB,MAAM,CAACC,OAAP,GAAiB;AACfsT,kBADe;AAEfD,kBAFe;AAGfD,kBAHe;AAIfuG,2BAJe;AAKfnG;AALe,CAAjB,C;;;;;;;;;;;AC3EA,MAAM9P,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AACA,MAAM0D,SAAS,GAAG1D,mBAAO,CAAC,oDAAD,CAAP,CAA8B0D,SAAhD;;AACA,MAAM3D,KAAK,GAAGC,mBAAO,CAAC,oBAAD,CAAP,CAAiByR,OAA/B;;AAEA,MAAMyK,OAAO,GAAG,CACd,gBADc,EAEd,mBAFc,EAGd,uBAHc,EAId,sBAJc,EAKd,qBALc,EAMd,uBANc,EAOd,oBAPc,EAQd,oBARc,EASd,2BATc,EAUd,uBAVc,EAWd,aAXc,EAYd,wBAZc,EAad,mBAbc,EAcd,kBAdc,EAed,6BAfc,EAgBd,wBAhBc,EAiBd,2BAjBc,EAkBd,uBAlBc,EAkBW;AACzB,8BAnBc,CAAhB;AAyBA,MAAMC,UAAU,GAAG,CACjB,8BADiB,EACe;AAChC,wCAFiB,EAEyB;AAC1C,oCAHiB,EAGqB;AACtC,qCAJiB,EAKjB,yBALiB,EAMjB,kCANiB,EAOjB,4CAPiB,EAQjB,6BARiB,CAAnB;AAWA,MAAMC,YAAY,GAAG,CAAC,2BAAD,CAArB;AAEAja,OAAO,CAACka,IAAR,GAAe,MAAMA,IAAN,CAAW;AACxBC,eAAa,CAAC7U,KAAD,EAAQ;AACnB,QAAIsB,IAAI,GAAGlD,IAAX;AAEA,QAAI0W,GAAG,GAAGxT,IAAI,CAACoK,YAAL,CAAkB1L,KAAlB,CAAV;AACA,WAAO,IAAI3G,OAAJ,CACL,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACnBqb,SAAG,CAAC5b,IAAJ,CAAS,UAAUyS,OAAV,EAAmB;AAC1B,YAAIA,OAAJ,EAAarS,OAAO,CAAC;AAAEsS,eAAK,EAAE,IAAT;AAAe5N,iBAAO,EAAE;AAAxB,SAAD,CAAP,CAAb,KAEE1E,OAAO,CAAC;AACNsS,eAAK,EAAE,KADD;AAEN5N,iBAAO,EAAE;AAFH,SAAD,CAAP;AAIH,OAPD;AAQD,KAVI,EAWJxE,GAAD,IAASC,MAAM,CAAC;AAAEmS,WAAK,EAAE,KAAT;AAAgB5N,aAAO,EAAE;AAAzB,KAAD,CAXV,CAAP;AAaD;;AAED+W,mBAAiB,CAAC/U,KAAD,EAAQ;AACvB,QAAIsB,IAAI,GAAGlD,IAAX;AACA,QAAI4W,UAAU,GAAG1T,IAAI,CAAC2T,eAAL,CAAqBjV,KAArB,CAAjB;AACA,WAAO,IAAI3G,OAAJ,CACL,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACnBub,gBAAU,CAAC9b,IAAX,CAAiBgc,OAAD,IAAa;AAC3B,YAAIA,OAAO,CAAClZ,QAAR,KAAqBC,SAAS,CAACS,KAAnC,EACEjD,MAAM,CAAC;AACLmS,eAAK,EAAE,KADF;AAEL5N,iBAAO,EACL;AAHG,SAAD,CAAN,CADF,KAMK1E,OAAO,CAAC;AAAEsS,eAAK,EAAE,IAAT;AAAe5N,iBAAO,EAAE;AAAxB,SAAD,CAAP;AACN,OARD;AASD,KAXI,EAYJxE,GAAD,IAAS;AACPyB,aAAO,CAACuD,GAAR,CAAYhF,GAAZ;AACAC,YAAM,CAAC;AACLmS,aAAK,EAAE,KADF;AAEL5N,eAAO,EAAE;AAFJ,OAAD,CAAN;AAID,KAlBI,CAAP;AAoBD;;AAEDmX,WAAS,CAACC,OAAD,EAAU;AACjB,WAAOX,OAAO,CAACxL,OAAR,CAAgBmM,OAAhB,MAA6B,CAAC,CAArC;AACD;;AAEDC,cAAY,CAACD,OAAD,EAAU;AACpB,WAAOV,UAAU,CAACzL,OAAX,CAAmBmM,OAAnB,MAAgC,CAAC,CAAxC;AACD;;AAEDE,gBAAc,CAACF,OAAD,EAAU;AACtB,WAAOT,YAAY,CAAC1L,OAAb,CAAqBmM,OAArB,MAAkC,CAAC,CAAnC,GAAuC,IAAvC,GAA8C,KAArD;AACD;;AAEDG,oBAAkB,CAACH,OAAD,EAAUpV,KAAV,EAAiB3C,MAAjB,EAAyB;AACzC,QAAI,KAAK8X,SAAL,CAAeC,OAAf,CAAJ,EACE,OAAO,IAAI/b,OAAJ,CAAaC,OAAD,IACjBA,OAAO,CAAC;AAAEsS,WAAK,EAAE,IAAT;AAAe5N,aAAO,EAAE;AAAxB,KAAD,CADF,CAAP,CADF,KAIK,IAAI,KAAKqX,YAAL,CAAkBD,OAAlB,CAAJ,EAAgC;AACnC;AACA,aAAO,IAAI/b,OAAJ,CAAaC,OAAD,IAAa;AAC9B4D,eAAO,CAACC,GAAR,CAAYqY,iBAAZ,KAAkCnY,MAAlC,GACI/D,OAAO,CAAC;AAAEsS,eAAK,EAAE,IAAT;AAAe5N,iBAAO,EAAE;AAAxB,SAAD,CADX,GAEIvE,MAAM,CAAC;AAAEmS,eAAK,EAAE,KAAT;AAAgB5N,iBAAO,EAAE;AAAzB,SAAD,CAFV;AAGD,OAJM,CAAP;AAKD,KAPI,MAOE,IAAI,KAAKsX,cAAL,CAAoBF,OAApB,CAAJ,EAAkC;AACvC,aAAO,IAAI/b,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,aAAKsb,iBAAL,CAAuB/U,KAAvB,EACG9G,IADH,CACSC,GAAD,IAAS;AACb,cAAI0b,aAAa,GAAG,KAAKA,aAAL,CAAmB7U,KAAnB,CAApB;AACA6U,uBAAa,CACV3b,IADH,CACSC,GAAD,IAASG,OAAO,CAACH,GAAD,CADxB,EAEGI,KAFH,CAEUC,GAAD,IAASC,MAAM,CAACD,GAAD,CAFxB;AAGD,SANH,EAOGD,KAPH,CAOUC,GAAD,IAAS;AACdC,gBAAM,CAACD,GAAD,CAAN;AACD,SATH;AAUD,OAXM,CAAP;AAYD,KAbM,MAaA;AACL,aAAO,KAAKqb,aAAL,CAAmB7U,KAAnB,CAAP;AACD;AACF;;AArFuB,CAA1B;;AAwFAtF,OAAO,CAACoI,iBAAR,GAA4B,MAAO9C,KAAP,IAAiB;AAC3C,MAAI;AACF,UAAMyV,SAAS,GAAGvY,OAAO,CAACC,GAAR,CAAYuY,gBAA9B;AACA,UAAMC,eAAe,GAAI,0DAAyDF,SAAU,aAAYzV,KAAM,EAA9G;AACA,QAAIpF,QAAQ,GAAG,MAAMtC,KAAK,CAAC8B,IAAN,CACnBub,eADmB,EAEnB,EAFmB,EAGnB;AACE1c,aAAO,EAAE;AACP,wBAAgB;AADT;AADX,KAHmB,CAArB;AAUA,QAAI2c,aAAa,GAAGhb,QAAQ,CAAC5B,IAA7B;AACA,WAAO4c,aAAa,CAAC7X,OAArB;AACD,GAfD,CAeE,OAAOvE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAnBD,C;;;;;;;;;;;AClIA,MAAMqc,UAAU,GAAG3Y,OAAO,CAACC,GAAR,CAAYe,YAA/B;AACA,MAAM4X,UAAU,GAAG5Y,OAAO,CAACC,GAAR,CAAYgB,YAA/B;;AAEA,MAAM;AAAE/D;AAAF,IAAW7B,mBAAO,CAAC,kDAAD,CAAxB;;AAGA,MAAMgM,UAAU,GAAG,OAAOvD,KAAP,EAAc+U,SAAd,KAA4B;AAC7C,MAAI;AACF,WAAO,MAAM3b,IAAI,CACd,GAAEyb,UAAW,eAAcC,UAAU,GAAI,SAAQA,UAAW,EAAvB,GAA2B,EAAG,EADrD,EAEf;AAAE9U,WAAF;AAAS+U;AAAT,KAFe,CAAjB;AAID,GALD,CAKE,OAAOvc,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CATD;;AAWAiB,MAAM,CAACC,OAAP,GAAiB;AACf6J;AADe,CAAjB,C;;;;;;;;;;;ACjBA,MAAMnG,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AACA,MAAM2D,KAAK,GAAG3D,mBAAO,CAAC,gEAAD,CAAP,CAAoC2D,KAAlD;AAEA;;;;;AAGAxB,OAAO,CAAC2J,cAAR,GAAyB,MAAO2R,SAAP,IAAqB;AAC5C,SAAO,IAAI3c,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,QAAIub,UAAU,GAAG5W,IAAI,CAAC6W,eAAL,CAAqBe,SAArB,CAAjB;AACAhB,cAAU,CAAC9b,IAAX,CAAgBgc,OAAO,IAAI;AACzB,YAAM;AAAElZ,gBAAF;AAAY0N;AAAZ,UAA0BwL,OAAhC;AAEA,UAAIe,SAAS,GAAG/Z,KAAK,CAAC8L,MAAN,CAAakO,IAAI,IAAI;AACnC,YAAIC,KAAK,GAAGD,IAAI,CAAC3Z,cAAL,CAAoByL,MAApB,CAA2BoO,CAAC,IAAIA,CAAC,CAACC,WAAF,OAAoBra,QAAQ,CAACqa,WAAT,EAApD,CAAZ;AACA,eAAOF,KAAK,CAACrc,MAAN,GAAe,CAAtB;AACD,OAHe,EAGbyJ,GAHa,CAGT+S,IAAI,KAAK;AAAEna,YAAI,EAAEma,IAAI,CAACna,IAAb;AAAmBC,YAAI,EAAEka,IAAI,CAACla,IAA9B;AAAoCE,eAAO,EAAEga,IAAI,CAACha,OAAlD;AAA2DD,YAAI,EAAEia,IAAI,CAACja,IAAtE;AAA4EQ,aAAK,EAAEyZ,IAAI,CAACzZ;AAAxF,OAAL,CAHK,CAAhB;AAMAvD,aAAO,CAAC2c,SAAD,CAAP;AACD,KAVD,EAUGM,IAAI,IAAI;AACT9c,YAAM,CAAC;AAAEmS,aAAK,EAAE,KAAT;AAAgB5N,eAAO,EAAE;AAAzB,OAAD,CAAN;AACD,KAZD;AAaD,GAfM,CAAP;AAgBD,CAjBD,C;;;;;;;;;;;ACNA,MAAMwY,iBAAiB,GAAGje,mBAAO,CAAC,4DAAD,CAAjC;;AACA,MAAM;AAAEuN;AAAF,IAAuBvN,mBAAO,CAAC,iDAAD,CAApC;;AACA,MAAM;AAAEiO;AAAF,IAA2BjO,mBAAO,CAAC,yEAAD,CAAxC;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAMyN,0BAA0B,GAAG,SAAnC;;AAEA,MAAMvB,IAAI,GAAG,OAAO;AAClBhH,UADkB;AAElBiH,OAFkB;AAGlBnG,MAHkB;AAIlBoG,OAJkB;AAKlB1D,aALkB;AAMlB2D,OANkB;AAOlBmC;AAPkB,CAAP,KAQP;AACJ,MAAI;AACF,WAAO,MAAMyP,iBAAiB,CAAC/R,IAAlB,CAAuB;AAClChH,cADkC;AAElCiH,WAFkC;AAGlCnG,UAHkC;AAIlCoG,WAJkC;AAKlC1D,iBALkC;AAMlC2D,WANkC;AAOlCmC,cAPkC;AAQlCmE,eAAS,EAAEnF,MAAM,CAAC6G,GAAP;AARuB,KAAvB,CAAb;AAUD,GAXD,CAWE,OAAOpT,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAvBD;;AAyBA,MAAMwL,sBAAsB,GAAG,OAAO;AACpCvH,UADoC;AAEpCiH,OAFoC;AAGpCnG,MAHoC;AAIpCoG,OAJoC;AAKpC1D;AALoC,CAAP,KAMzB;AACJ,MAAI;AACF,UAAM+S,WAAW,GAAG,CAAC,MAAMlO,gBAAgB,CAACrI,QAAD,CAAvB,EAAmCuK,MAAnC,CACjB1G,IAAD,IAAUA,IAAI,CAAC8B,MADG,CAApB;AAGA,UAAMsF,oBAAoB,GAAGsL,WAAW,CAACzQ,GAAZ,CAAiBjC,IAAD,IAAUA,IAAI,CAACuF,UAA/B,CAA7B;AACA,UAAM8B,iBAAiB,GAAG,GAAGlK,MAAH,CAAUmK,KAAV,CAAgB,EAAhB,EAAoBF,oBAApB,CAA1B;AACA,UAAMG,cAAc,GAAGF,iBAAiB,CAACG,MAAlB,CAAyB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC5D,UAAID,GAAG,CAACE,OAAJ,CAAYD,GAAZ,MAAqB,CAAC,CAA1B,EAA6B;AAC3BD,WAAG,CAAC5H,IAAJ,CAAS6H,GAAT;AACD;;AACD,aAAOD,GAAP;AACD,KALsB,EAKpB,EALoB,CAAvB;AAMA,WAAO,MAAMvC,oBAAoB,CAC/BqC,cAAc,CAACtF,GAAf,CAAoB4F,SAAD,IAAeA,SAAS,CAACnJ,KAA5C,CAD+B,EAE/B;AACEyG,WAAK,EAAET,0BADT;AAEEzH,UAFF;AAGEmG,WAHF;AAIE1L,UAAI,EAAE;AACJ2L,aADI;AAEJ1D;AAFI;AAJR,KAF+B,CAAjC;AAYD,GAxBD,CAwBE,OAAOzH,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAlCD;;AAoCA,MAAMyL,MAAM,GAAG,MAAOC,cAAP,IAA0B;AACvC,MAAI;AACF,WAAO,MAAMsR,iBAAiB,CAACvR,MAAlB,CAAyBC,cAAzB,CAAb;AACD,GAFD,CAEE,OAAO1L,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAM2L,OAAO,GAAG,MAAOD,cAAP,IAA0B;AACxC,MAAI;AACF,WAAO,MAAMsR,iBAAiB,CAACrR,OAAlB,CAA0BD,cAA1B,CAAb;AACD,GAFD,CAEE,OAAO1L,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAM4L,aAAa,GAAG,OAAO3H,QAAP,EAAiB4H,OAAjB,KAA6B;AACjD,MAAI;AACF,WAAO,MAAMmR,iBAAiB,CAACpR,aAAlB,CAAgC3H,QAAhC,EAA0C4H,OAA1C,CAAb;AACD,GAFD,CAEE,OAAO7L,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAM8L,WAAW,GAAG,OAAO7H,QAAP,EAAiBqB,MAAjB,EAAyBuG,OAAzB,KAAqC;AACvD,MAAI;AACF,UAAMoR,mBAAmB,GAAG,MAAMD,iBAAiB,CAACpR,aAAlB,CAChC3H,QADgC,EAEhC4H,OAFgC,CAAlC;AAIA,UAAMqR,iBAAiB,GAAG,MAAMF,iBAAiB,CAAClR,WAAlB,CAC9B7H,QAD8B,EAE9BqB,MAF8B,EAG9BuG,OAH8B,CAAhC;AAKA,UAAMsR,gBAAgB,GAAG,CAAC,GAAGF,mBAAJ,EAAyB,GAAGC,iBAA5B,CAAzB;AACA,UAAME,yBAAyB,GAAGD,gBAAgB,CAACpT,GAAjB,CAChC,CAAC;AAAEqB,WAAF;AAAS,SAAGiS;AAAZ,KAAD,MAAyB,EAAE,GAAGA;AAAL,KAAzB,CADgC,CAAlC;AAGA,WAAOD,yBAAyB,CAACE,IAA1B,CAA+B,CAACxI,CAAD,EAAIyI,CAAJ,KAAUA,CAAC,CAAC7L,SAAF,GAAcoD,CAAC,CAACpD,SAAzD,CAAP;AACD,GAfD,CAeE,OAAO1R,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAnBD;;AAqBAiB,MAAM,CAACC,OAAP,GAAiB;AACf+J,MADe;AAEfQ,QAFe;AAGfE,SAHe;AAIfC,eAJe;AAKfE,aALe;AAMfN;AANe,CAAjB,C;;;;;;;;;;;ACjHA,MAAMgS,UAAU,GAAGze,mBAAO,CAAC,wDAAD,CAA1B;;AAGAmC,OAAO,CAAC+K,SAAR,GAAoB,MAAOhD,UAAP,IAAsB;AACtC,SAAO,IAAIpJ,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACpC,QAAIgJ,UAAU,CAAC3I,MAAX,GAAoB,CAAxB,EAA2B;AACvBmd,aAAO,GAAGD,UAAU,CAACvR,SAAX,CAAqBhD,UAArB,CAAV;AACAwU,aAAO,CAAC/d,IAAR,CAAage,EAAE,IAAI;AACf5d,eAAO,CAAC4d,EAAD,CAAP;AACH,OAFD,EAEG1d,GAAG,IAAI;AACNC,cAAM,CAAC;AAAEmS,eAAK,EAAE,KAAT;AAAgB5N,iBAAO,EAAE;AAAzB,SAAD,CAAN;AACH,OAJD;AAKH,KAPD,MAQK;AACDvE,YAAM,CAAC;AAAEmS,aAAK,EAAE,KAAT;AAAgB5N,eAAO,EAAE;AAAzB,OAAD,CAAN;AACH;AACJ,GAZM,CAAP;AAaH,CAdD,C;;;;;;;;;;;ACHA,MAAMmZ,IAAI,GAAG5e,mBAAO,CAAC,wCAAD,CAAP,CAA2B4e,IAAxC;;AAEA,MAAMC,IAAI,GAAG,IAAID,IAAJ,EAAb;AAEA,MAAME,gCAAgC,GAAG,8BAAzC;;AAEA,MAAMC,kBAAkB,GAAG,CAACzQ,UAAD,EAAa7I,OAAb,KAAyB;AAClD,QAAMuZ,WAAW,GAAG1Q,UAAU,CAACiC,MAAX,CAAkB,CAAC0O,MAAD,EAASC,YAAT,KAA0B;AAC9D,QAAIN,IAAI,CAACO,eAAL,CAAqBD,YAArB,CAAJ,EAAwC;AACtCD,YAAM,CAACrW,IAAP,CAAYsW,YAAZ;AACD;;AACD,WAAOD,MAAP;AACD,GALmB,EAKjB,EALiB,CAApB;AAMA,QAAMG,QAAQ,GAAGJ,WAAW,CAAChU,GAAZ,CAAiBvD,KAAD,KAAY,EAAE,GAAGhC,OAAL;AAAc2D,MAAE,EAAE3B;AAAlB,GAAZ,CAAhB,CAAjB;AACA,SAAOoX,IAAI,CAACQ,sBAAL,CAA4BD,QAA5B,CAAP;AACD,CATD;;AAWA,MAAME,oBAAoB,GAAG,MAAOC,MAAP,IAAkB;AAC7C,MAAI;AACF;AACA;AACA;AACA;AACA,QAAIC,OAAO,GAAG,EAAd;;AACA,SAAK,MAAMC,KAAX,IAAoBF,MAApB,EAA4B;AAC1B,UAAI;AACF,cAAMG,WAAW,GAAG,MAAMb,IAAI,CAACc,0BAAL,CAAgCF,KAAhC,CAA1B;AACA/c,eAAO,CAACuD,GAAR,CAAYyZ,WAAZ;AACAF,eAAO,CAAC5W,IAAR,CAAa,GAAG8W,WAAhB,EAHE,CAIF;AACA;AACA;AACA;AACD,OARD,CAQE,OAAOld,KAAP,EAAc;AACdE,eAAO,CAACF,KAAR,CAAcA,KAAd;;AACA,YAAIA,KAAK,CAAC+C,IAAN,KAAeuZ,gCAAnB,EAAqD;AACnD,gBAAMc,mBAAmB,GACvB,MAAMC,4CAA4C,CAChDrd,KAAK,CAACyR,OAD0C,EAEhDwL,KAFgD,CADpD;AAKAD,iBAAO,CAAC5W,IAAR,CAAa,GAAG1C,MAAH,CAAUmK,KAAV,CAAgB,EAAhB,EAAoBuP,mBAApB,CAAb;AACD;AACF;AACF;;AACD,WAAOJ,OAAP,CA3BE,CA4BF;AACD,GA7BD,CA6BE,OAAOve,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAY,8BAAZ,EAA4ChF,GAA5C;AACA,UAAMA,GAAN;AACD;AACF,CAlCD;;AAoCA,MAAM4e,4CAA4C,GAAG,OACnDC,QADmD,EAEnDC,aAFmD,KAGhD;AACH,MAAI;AACF,UAAMC,aAAa,GAAG3e,MAAM,CAACC,IAAP,CAAYwe,QAAZ,EAAsB9U,GAAtB,CAA2BtJ,GAAD,IAAS;AACvD,YAAMue,aAAa,GAAGH,QAAQ,CAACpe,GAAD,CAA9B;AACA,YAAMwe,oBAAoB,GAAGD,aAAa,CAACjV,GAAd,CAAmBvD,KAAD,IAAW;AACxD,eAAOsY,aAAa,CAACI,IAAd,CAAoBC,YAAD,IAAkBA,YAAY,CAAChX,EAAb,KAAoB3B,KAAzD,CAAP;AACD,OAF4B,CAA7B;AAGA,aAAOyY,oBAAP;AACD,KANqB,CAAtB;AAOA,QAAIV,OAAO,GAAG,EAAd;;AACA,SAAK,MAAMa,YAAX,IAA2BL,aAA3B,EAA0C;AACxC,UAAI;AACF,cAAMN,WAAW,GAAG,MAAMb,IAAI,CAACc,0BAAL,CAAgCU,YAAhC,CAA1B;AACAb,eAAO,CAAC5W,IAAR,CAAa8W,WAAb;AACD,OAHD,CAGE,OAAOze,GAAP,EAAY;AACZyB,eAAO,CAACuD,GAAR,CAAYhF,GAAZ;AACD;AACF;;AACD,WAAOue,OAAP;AACD,GAlBD,CAkBE,OAAOve,GAAP,EAAY;AACZyB,WAAO,CAACuD,GAAR,CAAYhF,GAAZ;AACA,UAAMA,GAAN;AACD;AACF,CA1BD;;AA4BA,MAAMqf,YAAY,GAAG,MAAOd,OAAP,IAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAIe,UAAU,GAAG,EAAjB;;AACA,OAAK,IAAIC,MAAT,IAAmBhB,OAAnB,EAA4B;AAC1B;AACA;AACA,QAAIgB,MAAM,CAACjV,EAAX,EAAe;AACbgV,gBAAU,CAAC3X,IAAX,CAAgB4X,MAAM,CAACjV,EAAvB;AACD;AACF;;AAED,MAAIkV,eAAe,GAAG5B,IAAI,CAAC6B,+BAAL,CAAqCH,UAArC,CAAtB,CAzBsC,CA0BtC;AACA;AACA;;AACA,OAAK,IAAId,KAAT,IAAkBgB,eAAlB,EAAmC;AACjC,QAAI;AACF,UAAIE,QAAQ,GAAG,MAAM9B,IAAI,CAAC+B,gCAAL,CAAsCnB,KAAtC,CAArB;AACA/c,aAAO,CAACuD,GAAR,CAAY0a,QAAZ,EAFE,CAIF;AACA;;AACA,WAAK,IAAIE,SAAT,IAAsBF,QAAtB,EAAgC;AAC9B,YAAI;AAAEre,gBAAF;AAAUmD,iBAAV;AAAmBwO;AAAnB,YAA+B0M,QAAQ,CAACE,SAAD,CAA3C;;AACA,YAAIve,MAAM,KAAK,IAAf,EAAqB,CACnB;AACD,SAFD,MAEO,IAAIA,MAAM,KAAK,OAAf,EAAwB;AAC7BI,iBAAO,CAACF,KAAR,CACG,8CAA6CiD,OAAQ,EADxD;;AAGA,cAAIwO,OAAO,IAAIA,OAAO,CAACzR,KAAvB,EAA8B;AAC5B;AACA;AACA;AACAE,mBAAO,CAACF,KAAR,CAAe,qBAAoByR,OAAO,CAACzR,KAAM,EAAjD;AACD;AACF;AACF;AACF,KAtBD,CAsBE,OAAOA,KAAP,EAAc;AACdE,aAAO,CAACF,KAAR,CAAcA,KAAd;AACD;AACF,GAvDqC,CAwDtC;;AACD,CAzDD;;AA2DA,MAAMyL,oBAAoB,GAAG,OAAOK,UAAP,EAAmB7I,OAAnB,KAA+B;AAC1D,MAAI;AACF/C,WAAO,CAACuD,GAAR,CAAY,mBAAZ;AACA,QAAIsZ,MAAM,GAAGR,kBAAkB,CAACzQ,UAAD,EAAa7I,OAAb,CAA/B;AACA/C,WAAO,CAACuD,GAAR,CAAY,QAAZ,EAAsBsZ,MAAtB;AAEA7c,WAAO,CAACuD,GAAR,CAAY,yBAAZ;AACA,QAAIuZ,OAAO,GAAG,MAAMF,oBAAoB,CAACC,MAAD,CAAxC;AACA7c,WAAO,CAACuD,GAAR,CAAY,qBAAZ;AACA,UAAMqa,YAAY,CAACd,OAAD,CAAlB;AACD,GATD,CASE,OAAO7V,EAAP,EAAW;AACXjH,WAAO,CAACuD,GAAR,CAAY,6BAAZ,EAA2C0D,EAA3C;AACA,UAAMA,EAAN;AACD;AACF,CAdD;;AAgBAzH,MAAM,CAACC,OAAP,GAAiB;AACf8L;AADe,CAAjB,C;;;;;;;;;;;AC5JA,MAAMkN,MAAM,GAAGnb,mBAAO,CAAC,gDAAD,CAAtB;;AACA,MAAMuE,YAAY,GAAGvE,mBAAO,CAAC,oDAAD,CAAP,CAA8BuE,YAAnD;;AACA,MAAMmS,YAAY,GAAG1W,mBAAO,CAAC,4DAAD,CAA5B;;AACA,MAAM6F,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AACA,MAAM8gB,YAAY,GAAG9gB,mBAAO,CAAC,4DAAD,CAA5B;;AACA,MAAM+gB,YAAY,GAAG/gB,mBAAO,CAAC,4DAAD,CAA5B;;AACA,MAAM6T,QAAQ,GAAG7T,mBAAO,CAAC,0BAAD,CAAP,CAAoB8T,KAApB,CAA0BD,QAA3C;;AAEA,MAAMmN,QAAQ,GAAGhhB,mBAAO,CAAC,4BAAD,CAAxB;;AAEA,IAAIihB,KAAK,GAAGjhB,mBAAO,CAAC,0CAAD,CAAnB;;AACA,MAAM;AAAEkhB;AAAF,IAAelhB,mBAAO,CAAC,0BAAD,CAA5B;;AAEA,MAAM+K,eAAe,GAAIoW,UAAD,IAAgB;AACtC,MAAI7e,MAAM,GAAGiC,YAAY,CAACkL,MAAb,CAAqB2R,EAAD,IAAQA,EAAE,CAAC9e,MAAH,KAAc6e,UAA1C,CAAb;AACA,SAAO7e,MAAM,CAAC,CAAD,CAAb;AACD,CAHD;;AAKA,MAAM+e,UAAU,GAAI5gB,IAAD,IAAU;AAC3B,MAAI,CAACA,IAAL,EAAW,OAAO,EAAP;AACX,SAAOugB,QAAQ,CAACM,GAAT,CAAaC,OAAb,CAAqB9gB,IAArB,EAA2BwgB,KAAK,CAACO,SAAjC,EAA4C7f,QAA5C,EAAP;AACD,CAHD;;AAKA,MAAM8f,UAAU,GAAIhhB,IAAD,IAAU;AAC3B,MAAI,CAACA,IAAL,EAAW,OAAO,EAAP;AACX,MAAIihB,KAAK,GAAGV,QAAQ,CAACM,GAAT,CAAaK,OAAb,CAAqBlhB,IAArB,EAA2BwgB,KAAK,CAACO,SAAjC,CAAZ;AACA,SAAOE,KAAK,CAAC/f,QAAN,CAAeqf,QAAQ,CAACY,GAAT,CAAaC,IAA5B,CAAP;AACD,CAJD;;AAMA,MAAMlX,UAAU,GAAImX,SAAD,IAAe;AAChC,SAAO,IAAIhhB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCia,UAAM,CAAC4G,UAAP,CAAkBD,SAAlB,EAA6BnhB,IAA7B,CAAkC,CAAC0U,GAAD,EAAMpU,GAAN,KAAc;AAC9C,UAAI,CAACA,GAAL,EACEF,OAAO,CAAC;AACNyE,eAAO,EAAE,IADH;AAENC,eAAO,EAAE,wCAFH;AAGN8F,UAAE,EAAE8J,GAAG,CAAC9J;AAHF,OAAD,CAAP,CADF,KAOErK,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHZ,OAAD,CAAN;AAKH,KAbD;AAcD,GAfM,CAAP;AAgBD,CAjBD;;AAmBA,MAAM2O,eAAe,GAAG,CAAC7I,EAAD,EAAKjJ,MAAL,KAAgB;AACtC,SAAO,IAAIxB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCia,UAAM,CAAC6G,YAAP,CAAoBzW,EAApB,EAAwBjJ,MAAxB,EAAgC3B,IAAhC,CAAqC,CAAC0U,GAAD,EAAMpU,GAAN,KAAc;AACjD,UAAI,CAACA,GAAL,EACEF,OAAO,CAAC;AACNyE,eAAO,EAAE,IADH;AAENC,eAAO,EAAE;AAFH,OAAD,CAAP,CADF,KAMEvE,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,OAAD,CAAN;AAMH,KAbD;AAcD,GAfM,CAAP;AAgBD,CAjBD;;AAmBA,MAAMwc,qBAAqB,GAAG,CAACre,IAAD,EAAOsG,UAAP,EAAmB5H,MAAnB,KAA8B;AAC1D,SAAO,IAAIxB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCia,UAAM,CAAC+G,kBAAP,CAA0Bte,IAA1B,EAAgCsG,UAAhC,EAA4C5H,MAA5C,EAAoD3B,IAApD,CAAyD,CAAC0U,GAAD,EAAMpU,GAAN,KAAc;AACrE,UAAI,CAACA,GAAL,EACEF,OAAO,CAAC;AACNyE,eAAO,EAAE,IADH;AAENC,eAAO,EAAE;AAFH,OAAD,CAAP,CADF,KAMEvE,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,OAAD,CAAN;AAMH,KAbD;AAcD,GAfM,CAAP;AAgBD,CAjBD;;AAmBA,MAAM8O,oBAAoB,GAAIhO,MAAD,IAAY;AACvC,SAAO,IAAIzF,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCia,UAAM,CAACgH,iBAAP,CAAyB5b,MAAzB,EAAiC5F,IAAjC,CAAsC,CAAC0U,GAAD,EAAMpU,GAAN,KAAc;AAClD,UAAI,CAACA,GAAL,EAAUF,OAAO,CAACsU,GAAD,CAAP,CAAV,KAEEnU,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,OAAD,CAAN;AAMH,KATD;AAUD,GAXM,CAAP;AAYD,CAbD;;AAeA,MAAMyO,aAAa,GAAIhP,QAAD,IAAc;AAClC,SAAO,IAAIpE,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCia,UAAM,CAACiH,SAAP,CAAiBld,QAAjB,EACGvE,IADH,CACQ,CAAC0U,GAAD,EAAMpU,GAAN,KAAc;AAClB,UAAI,CAACA,GAAL,EAAUF,OAAO,CAACsU,GAAD,CAAP,CAAV,KAEEnU,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHZ,OAAD,CAAN;AAKH,KATH,EAUGzE,KAVH,CAUUC,GAAD,IAASC,MAAM,CAACD,GAAD,CAVxB;AAWD,GAZM,CAAP;AAaD,CAdD;;AAgBA,MAAMuT,eAAe,GAAG,CAACtP,QAAD,EAAWtB,IAAX,EAAiBiL,MAAjB,EAAyBC,YAAzB,EAAuCrL,QAAvC,KAAoD;AAC1E,SAAO,IAAI3C,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,QAAImhB,KAAK,GACPC,IAAI,CAACC,MAAL,GAAc5gB,QAAd,CAAuB,EAAvB,EAA2ByF,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,EAA2Cob,WAA3C,KACAF,IAAI,CAACC,MAAL,GAAc5gB,QAAd,CAAuB,EAAvB,EAA2ByF,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,EAA2Cob,WAA3C,EAFF;;AAGA9f,WAAO,CAACuD,GAAR,CAAYob,UAAU,CAACxS,MAAD,CAAtB;AACA6H,gBAAY,CAAC+L,gBAAb,CAA8B;AAC5Bld,UAAI,EAAE8c,KADsB;AAE5Bnd,cAF4B;AAG5BtB,UAH4B;AAI5BiL,YAAM,EAAEwS,UAAU,CAACxS,MAAD,CAJU;AAK5BC,kBAAY,EAAEuS,UAAU,CAACvS,YAAD,CALI;AAM5BrL;AAN4B,KAA9B,EAOG9C,IAPH,CAOQ,CAAC+hB,MAAD,EAASzhB,GAAT,KAAiB;AACvB,UAAI,CAACA,GAAL,EAAU;AACRka,cAAM,CAACwH,eAAP,CAAuBzd,QAAvB,EAAiCwd,MAAM,CAACpX,GAAP,CAAW3J,QAAX,EAAjC,EAAwDhB,IAAxD,CACE,CAAC0U,GAAD,EAAMpU,GAAN,KAAc;AACZ,cAAI,CAACA,GAAL,EAAUF,OAAO,CAAC2hB,MAAD,CAAP,CAAV,KAEExhB,MAAM,CAAC;AACLsE,mBAAO,EAAE,KADJ;AAELC,mBAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,WAAD,CAAN;AAMH,SAVH;AAYD,OAbD,MAcEvE,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,OAAD,CAAN;AAMH,KA5BD;AA6BD,GAlCM,CAAP;AAmCD,CApCD;;AAsCA,MAAMgP,eAAe,GAAIlP,IAAD,IAAU;AAChC,SAAO,IAAIzE,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCwV,gBAAY,CAACiB,eAAb,CAA6BpS,IAA7B,EACG5E,IADH,CACQ,CAACiiB,SAAD,EAAY3hB,GAAZ,KAAoB;AACxB,UAAI,CAACA,GAAL,EAAU;AACRka,cAAM,CAAC0H,kBAAP,CAA0BD,SAAS,CAAC1d,QAAV,CAAmBvD,QAAnB,EAA1B,EAAyDhB,IAAzD,CACE,CAACqI,MAAD,EAAS/H,GAAT,KAAiB;AACf,cAAI,CAACA,GAAL,EAAU;AACR,kBAAM;AAAE4N,oBAAF;AAAUC,0BAAV;AAAwB,iBAAGG;AAA3B,gBAAqC2T,SAAS,CAAC9P,IAArD;AACA,kBAAMjS,MAAM,GAAG;AACbmI,oBAAM,EAAE,EACN,GAAGA;AADG,eADK;AAIb0L,oBAAM,EAAE;AACN7F,sBAAM,EAAE4S,UAAU,CAAC5S,MAAD,CADZ;AAENC,4BAAY,EAAE2S,UAAU,CAAC3S,YAAD,CAFlB;AAGN,mBAAGG;AAHG;AAJK,aAAf;AAUAlO,mBAAO,CAACF,MAAD,CAAP;AACD,WAbD,MAaO;AACLK,kBAAM,CAAC;AACLsE,qBAAO,EAAE,KADJ;AAELC,qBAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,aAAD,CAAN;AAMD;AACF,SAvBH;AAyBD,OA1BD,MA2BEvE,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,OAAD,CAAN;AAMH,KAnCH,EAoCGzE,KApCH,CAoCUC,GAAD,IAAS;AACdC,YAAM,CAAC;AACL4hB,cAAM,EAAE,KADH;AAELrd,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IACA;AAJG,OAAD,CAAN;AAMD,KA3CH;AA4CD,GA7CM,CAAP;AA8CD,CA/CD;;AAiDA,MAAM2P,gBAAgB,GAAG,OAAOlQ,QAAP,EAAiBlC,MAAjB,KAA4B;AACnD,MAAI;AACF,QAAI+f,UAAU,GAAG,MAAM5H,MAAM,CAACiH,SAAP,CAAiBld,QAAjB,CAAvB;;AACA,QAAI,CAAC2O,QAAQ,CAACT,OAAT,CAAiB2P,UAAU,CAAC/f,MAA5B,CAAL,EAA0C;AACxC,UAAIggB,UAAU,GAAG,MAAMlC,YAAY,CAACmC,UAAb,CAAwBjgB,MAAxB,CAAvB;AACA,YAAMmY,MAAM,CAAC+H,gBAAP,CAAwBhe,QAAxB,EAAkC8d,UAAU,CAAC1X,GAA7C,CAAN;AACA,aAAO;AACL9F,eAAO,EAAE,IADJ;AAELC,eAAO,EAAE,0CAFJ;AAGL8F,UAAE,EAAEyX,UAAU,CAACzX;AAHV,OAAP;AAKD,KARD,MAQO;AACL,UAAI4X,YAAY,GAAG,MAAMrC,YAAY,CAACsC,YAAb,CACvBL,UAAU,CAAC/f,MAAX,CAAkBrB,QAAlB,EADuB,EAEvBqB,MAFuB,CAAzB;AAIA,aAAO;AACLwC,eAAO,EAAE,IADJ;AAELC,eAAO,EAAE;AAFJ,OAAP;AAID;AACF,GApBD,CAoBE,OAAOxE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAxBD;;AA0BA,MAAMqU,eAAe,GAAG,MAAOpQ,QAAP,IAAoB;AAC1C,MAAI;AACF,WAAO,MAAMiW,MAAM,CAACkI,eAAP,CAAuBne,QAAvB,CAAb;AACD,GAFD,CAEE,OAAOjE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMsU,gBAAgB,GAAG,OAAOrQ,QAAP,EAAiB2J,MAAjB,KAA4B;AACnD,MAAI;AACF,QAAIkU,UAAU,GAAG,MAAM5H,MAAM,CAACE,gBAAP,CAAwBnW,QAAxB,CAAvB;AACA,QAAIoe,cAAc,GAAGP,UAAU,CAACnO,OAAX,GACjBmO,UAAU,CAACnO,OAAX,CAAmBnF,MAAnB,CACG2R,EAAD,IAAQA,EAAE,CAACvS,MAAH,CAAUiP,WAAV,OAA4BjP,MAAM,CAACA,MAAP,CAAciP,WAAd,EADtC,CADiB,GAIjB,EAJJ;;AAKA,QAAIwF,cAAc,CAAC/hB,MAAf,KAA0B,CAA9B,EAAiC;AAC/B,UAAIgiB,UAAU,GAAG,MAAMxC,YAAY,CAACyC,UAAb,CAAwB3U,MAAxB,CAAvB;AACA,YAAMsM,MAAM,CAACG,gBAAP,CAAwBpW,QAAxB,EAAkCqe,UAAU,CAACjY,GAA7C,CAAN;AACA,aAAO;AACL9F,eAAO,EAAE,IADJ;AAELC,eAAO,EAAE,kCAFJ;AAGL8F,UAAE,EAAEgY,UAAU,CAAChY;AAHV,OAAP;AAKD,KARD,MAQO;AACL,UAAIkY,YAAY,GAAG,MAAM1C,YAAY,CAAC2C,YAAb,CACvBJ,cAAc,CAAC,CAAD,CAAd,CAAkBhY,GADK,EAEvBuD,MAFuB,CAAzB;AAIA,aAAO;AAAErJ,eAAO,EAAE,IAAX;AAAiBC,eAAO,EAAE;AAA1B,OAAP;AACD;AACF,GAtBD,CAsBE,OAAOxE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CA1BD;;AA4BA,MAAMuU,gBAAgB,GAAG,MAAOtQ,QAAP,IAAoB;AAC3C,MAAI;AACF,WAAO,MAAMiW,MAAM,CAACE,gBAAP,CAAwBnW,QAAxB,CAAb;AACD,GAFD,CAEE,OAAOjE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMsM,gBAAgB,GAAG,MAAOrI,QAAP,IAAoB;AAC3C,MAAI;AACF,WAAO,MAAMW,IAAI,CAAC0H,gBAAL,CAAsBrI,QAAtB,CAAb;AACD,GAFD,CAEE,OAAOjE,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQAiB,MAAM,CAACC,OAAP,GAAiB;AACfwI,YADe;AAEfyJ,iBAFe;AAGf6N,uBAHe;AAIf1N,sBAJe;AAKfL,eALe;AAMfnJ,iBANe;AAOfyJ,iBAPe;AAQfC,iBARe;AASfW,kBATe;AAUfE,iBAVe;AAWfC,kBAXe;AAYfC,kBAZe;AAafjI;AAbe,CAAjB,C;;;;;;;;;;;AC1RA,MAAM1H,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AACA,MAAMM,OAAO,GAAGN,mBAAO,CAAC,wBAAD,CAAvB;;AACA,MAAM2jB,YAAY,GAAG3jB,mBAAO,CAAC,4DAAD,CAA5B;;AACA,MAAM0D,SAAS,GAAG1D,mBAAO,CAAC,oDAAD,CAAP,CAA8B0D,SAAhD;;AACA,MAAMkgB,cAAc,GAAG5jB,mBAAO,CAAC,8DAAD,CAA9B;;AAEA,MAAM6W,QAAQ,GAAIgN,OAAD,IAAa;AAC5B,SAAO,IAAI/iB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC2E,QAAI,CAACiM,QAAL,CAAc+R,OAAO,CAAC1S,SAAtB,EAAiCxQ,IAAjC,CACE,MAAOoR,KAAP,IAAiB;AACf,UAAIA,KAAJ,EAAW;AACT7Q,cAAM,CAAC;AACLsE,iBAAO,EAAE,KADJ;AAELC,iBAAO,EAAE;AAFJ,SAAD,CAAN;AAID,OALD,MAKO;AACL,YAAI6J,SAAS,GAAG,CACd,MAAMsU,cAAc,CAAC9H,yBAAf,CACJ+H,OAAO,CAAChV,MADJ,EAEJgV,OAAO,CAAC/U,YAFJ,CADQ,EAKdxD,GALc,CAKV3J,QALU,EAAhB,CADK,CAOL;;;AACAkE,YAAI,CAACgR,QAAL,CACEgN,OAAO,CAACpgB,QAAR,GACI,EAAE,GAAGogB,OAAL;AAAcvU;AAAd,SADJ,GAEI,EAAE,GAAGuU,OAAL;AAAcpgB,kBAAQ,EAAEC,SAAS,CAACU,KAAlC;AAAyCkL;AAAzC,SAHN,EAIE3O,IAJF,CAKE,CAAC4R,GAAD,EAAMtR,GAAN,KAAc;AACZ;AACA,cAAI,CAACA,GAAL,EACEF,OAAO,CAAC;AACNyE,mBAAO,EAAE,IADH;AAENC,mBAAO,EAAE,oCAFH;AAGN+M,oBAAQ,EAAE,EAAE,GAAGD;AAAL;AAHJ,WAAD,CAAP,CADF,KAOErR,MAAM,CAAC;AACLsE,mBAAO,EAAE,KADJ;AAELC,mBAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFnB,WAAD,CAAN;AAIH,SAlBH,EAmBGxE,GAAD,IAAS;AACPC,gBAAM,CAAC;AAAEsE,mBAAO,EAAE,KAAX;AAAkBC,mBAAO,EAAExE,GAAG,CAACwE;AAA/B,WAAD,CAAN;AACD,SArBH;AAuBD;AACF,KAvCH,EAwCGxE,GAAD,IAAS;AACPC,YAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACLxE,GAAG,CAACwE,OAAJ,IAAe;AAHZ,OAAD,CAAN;AAKD,KA9CH;AAgDD,GAjDM,CAAP;AAkDD,CAnDD;;AAqDA,MAAM4F,UAAU,GAAG,MAAOwY,OAAP,IAAmB;AACpC,SAAO,IAAI/iB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC2E,QAAI,CAACwF,UAAL,CAAgBwY,OAAhB,EAAyBljB,IAAzB,CACE,CAAC4R,GAAD,EAAMtR,GAAN,KAAc;AACZ,UAAI,CAACA,GAAL,EACEF,OAAO,CAAC;AACNyE,eAAO,EAAE,IADH;AAENC,eAAO,EAAE;AAFH,OAAD,CAAP,CADF,KAMEvE,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFnB,OAAD,CAAN;AAIH,KAZH,EAaGxE,GAAD,IAAS;AACPC,YAAM,CAAC;AAAEsE,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE;AAA/B,OAAD,CAAN;AACD,KAfH;AAiBD,GAlBM,CAAP;AAmBD,CApBD;;AAsBA,MAAMa,iBAAiB,GAAG,OAAOC,MAAP,EAAeyQ,QAAf,KAA4B;AACpD,MAAI;AACF,WAAO,MAAMnR,IAAI,CAACS,iBAAL,CAAuBC,MAAvB,EAA+ByQ,QAA/B,CAAb;AACD,GAFD,CAEE,OAAO/V,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMsJ,iBAAiB,GAAG,MAAO9C,KAAP,IAAiB;AACzC,QAAMyV,SAAS,GAAGvY,OAAO,CAACC,GAAR,CAAYuY,gBAA9B;AACA,QAAMC,eAAe,GAAI,0DAAyDF,SAAU,aAAYzV,KAAM,EAA9G;AAEA,SAAO,IAAI3G,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCZ,WAAO,CAACuB,IAAR,CAAaub,eAAb,EAA8B,CAAC5a,KAAD,EAAQshB,IAAR,EAAc9d,IAAd,KAAuB;AACnD,UAAIxD,KAAJ,EACEtB,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EACL;AAHG,OAAD,CAAN;AAKF,UAAInD,MAAM,GAAGkE,IAAI,CAACC,KAAL,CAAWT,IAAX,CAAb;AACA,UAAI,CAAC1D,MAAM,CAACkD,OAAZ,EACEtE,MAAM,CAAC;AAAEsE,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAE;AAA3B,OAAD,CAAN,CADF,KAEK,IAAInD,MAAM,CAACyhB,KAAP,IAAgB,GAApB,EACH7iB,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EAAE;AAFJ,OAAD,CAAN,CADG,KAKA1E,OAAO,CAAC;AAAEyE,eAAO,EAAE,IAAX;AAAiBC,eAAO,EAAE;AAA1B,OAAD,CAAP;AACN,KAhBD;AAiBD,GAlBM,CAAP;AAmBD,CAvBD;;AAyBA,MAAMyR,oBAAoB,GAAG,MAAO2M,OAAP,IAAmB;AAC9C,QAAM;AAAE3S;AAAF,MAAe2S,OAArB;AACA,SAAO,IAAI/iB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC2E,QAAI,CAACme,eAAL,CAAqB9S,QAArB,EAA+BvQ,IAA/B,CACE,MAAOsjB,UAAP,IAAsB;AACpB,UAAI;AACF,YAAIC,iBAAiB,GAAGD,UAAU,CAACE,IAAnC;AACAN,eAAO,CAAC3S,QAAR,GAAmBgT,iBAAnB;;AAEA,YAAI5U,SAAS,GAAG,CACd,MAAMsU,cAAc,CAAC9H,yBAAf,CACJ+H,OAAO,CAAChV,MADJ,EAEJgV,OAAO,CAAC/U,YAFJ,CADQ,EAKdxD,GALc,CAKV3J,QALU,EAAhB;;AAMAkV,gBAAQ,CAAC,EAAE,GAAGgN,OAAL;AAAcvU;AAAd,SAAD,CAAR,CAAoC3O,IAApC,CACGE,MAAD,IAAY;AACVE,iBAAO,CAACF,MAAD,CAAP;AACD,SAHH,EAIGI,GAAD,IAAS;AACPC,gBAAM,CAACD,GAAD,CAAN;AACD,SANH;AAQD,OAlBD,CAkBE,OAAOA,GAAP,EAAY;AACZC,cAAM,CAAC;AACLsE,iBAAO,EAAE,KADJ;AAELC,iBAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAFnB,SAAD,CAAN;AAID;AACF,KA1BH,EA2BGxE,GAAD,IAAS;AACPC,YAAM,CAAC;AAAEsE,eAAO,EAAE,KAAX;AAAkBC,eAAO,EAAExE,GAAG,CAACwE,OAAJ,IAAe;AAA1C,OAAD,CAAN;AACD,KA7BH;AA+BD,GAhCM,CAAP;AAiCD,CAnCD;;AAqCA,MAAMuS,aAAa,GAAG,MAAOvU,QAAP,IAAoB;AACxC,MAAI;AACF,WAAO,MAAMoC,IAAI,CAACsa,IAAL,CAAU;AACrB1c,cAAQ,EAAEA;AADW,KAAV,CAAb;AAGD,GAJD,CAIE,OAAOkG,EAAP,EAAW;AACX,WAAOA,EAAP;AACD;AACF,CARD;;AAUA,MAAMuO,cAAc,GAAG,MAAOzQ,KAAP,IAAiB;AACtC,MAAI;AACF,QAAIkV,OAAO,GAAG,MAAM9W,IAAI,CAAC6W,eAAL,CAAqBjV,KAArB,CAApB;AACA,WAAO,MAAM5B,IAAI,CAACue,QAAL,CAAczH,OAAO,CAACpW,MAAtB,CAAb;AACD,GAHD,CAGE,OAAOoD,EAAP,EAAW;AACX,WAAOA,EAAP;AACD;AACF,CAPD;;AASA,MAAMwO,WAAW,GAAG,MAAO5M,EAAP,IAAc;AAChC,MAAI;AACF,WAAO,MAAM1F,IAAI,CAACsS,WAAL,CAAiB5M,EAAjB,CAAb;AACD,GAFD,CAEE,OAAO5B,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAND;;AAQA,MAAM2O,gBAAgB,GAAG,MAAO/R,MAAP,IAAkB;AACzC,MAAI;AACF,QAAIoW,OAAO,GAAG,MAAM9W,IAAI,CAACuS,WAAL,CAAiB7R,MAAjB,CAApB;AACA,WAAOoW,OAAP;AACD,GAHD,CAGE,OAAOhT,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAM8O,iBAAiB,GAAG,OAAOlS,MAAP,EAAeiS,IAAf,KAAwB;AAChD,MAAI;AACF,QAAImE,OAAO,GAAG,MAAM9W,IAAI,CAAC0S,WAAL,CAAiBhS,MAAjB,EAAyBiS,IAAzB,CAApB;AACA,WAAOmE,OAAP;AACD,GAHD,CAGE,OAAOhT,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAMgP,mBAAmB,GAAG,OAAOpS,MAAP,EAAeiS,IAAf,KAAwB;AAClD,MAAI;AACF,QAAImE,OAAO,GAAG,MAAM9W,IAAI,CAAC6S,cAAL,CAAoBnS,MAApB,EAA4BiS,IAA5B,CAApB;AACA,WAAOmE,OAAP;AACD,GAHD,CAGE,OAAOhT,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAMiP,gBAAgB,GAAG,OAAOrS,MAAP,EAAeqK,SAAf,KAA6B;AACpD,MAAI;AACF,QAAI+L,OAAO,GAAG,MAAM9W,IAAI,CAAC+S,gBAAL,CAAsBrS,MAAtB,EAA8BqK,SAA9B,CAApB;AACA,WAAO+L,OAAP;AACD,GAHD,CAGE,OAAOhT,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAM4D,gBAAgB,GAAG,MAAOrI,QAAP,IAAoB;AAC3C,MAAI;AACF,QAAImH,KAAK,GAAG,MAAMxG,IAAI,CAAC0H,gBAAL,CAAsBrI,QAAtB,CAAlB;AACA,WAAOmH,KAAP;AACD,GAHD,CAGE,OAAOpL,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAPD;;AASA,MAAMgU,sBAAsB,GAAG,OAAO/P,QAAP,EAAiB2J,MAAjB,KAA4B;AACzD,MAAI;AACF,QAAIxC,KAAK,GAAG,MAAMxG,IAAI,CAACoP,sBAAL,CAA4B/P,QAA5B,EAAsC2J,MAAtC,CAAlB;AACA,WAAOxC,KAAP;AACD,GAHD,CAGE,OAAOpL,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAPD;;AASA,MAAM4X,iBAAiB,GAAG,OAAO3T,QAAP,EAAiB2J,MAAjB,EAAyBC,YAAzB,KAA0C;AAClE,MAAI;AACF,QAAIQ,SAAS,GAAG,CACd,MAAMsU,cAAc,CAAC9H,yBAAf,CAAyCjN,MAAzC,EAAiDC,YAAjD,CADQ,EAEdxD,GAFc,CAEV3J,QAFU,EAAhB;;AAGA,QAAI0K,KAAK,GAAG,MAAMxG,IAAI,CAACgT,iBAAL,CAAuB3T,QAAvB,EAAiCoK,SAAjC,CAAlB;AACA,WAAOjD,KAAP;AACD,GAND,CAME,OAAOpL,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAVD;;AAYA,MAAMqM,mBAAmB,GAAG,OAAOpI,QAAP,EAAiBoK,SAAjB,KAA+B;AACzD,MAAI;AACF,WAAO,MAAMzJ,IAAI,CAACgT,iBAAL,CAAuB3T,QAAvB,EAAiCoK,SAAjC,CAAb;AACD,GAFD,CAEE,OAAOrO,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMoM,aAAa,GAAG,MAAOnI,QAAP,IAAoB;AACxC,MAAI;AACF,QAAI0K,UAAU,GAAG,MAAM/J,IAAI,CAACwH,aAAL,CAAmBnI,QAAnB,CAAvB;AACA,WAAO0K,UAAP;AACD,GAHD,CAGE,OAAO3O,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAPD;;AASA,MAAMiY,cAAc,GAAG,OAAOnQ,IAAP,EAAamI,QAAb,KAA0B;AAC/C,MAAI;AACF,QAAImT,SAAS,GAAG,MAAMxe,IAAI,CAACqT,cAAL,CAAoBnQ,IAApB,EAA0BmI,QAA1B,CAAtB;AACA,WAAOmT,SAAP;AACD,GAHD,CAGE,OAAOpjB,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAPD;;AASA,MAAMqY,cAAc,GAAG,OAAOvQ,IAAP,EAAamI,QAAb,EAAuBtF,YAAvB,KAAwC;AAC7D,MAAI;AACF,QAAI0Y,UAAU,GAAG,MAAMze,IAAI,CAACyT,cAAL,CAAoBvQ,IAApB,EAA0BmI,QAA1B,EAAoCtF,YAApC,CAAvB;AACA,WAAO0Y,UAAP;AACD,GAHD,CAGE,OAAOrjB,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAPD;;AASA,MAAM6X,cAAc,GAAG,MAAOvS,MAAP,IAAkB;AACvC,MAAI;AACF,QAAIoW,OAAO,GAAG,MAAM9W,IAAI,CAACiT,cAAL,CAAoBvS,MAApB,CAApB;AACA,WAAOoW,OAAP;AACD,GAHD,CAGE,OAAOhT,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAMqP,kBAAkB,GAAG,MAAOzS,MAAP,IAAkB;AAC3C,MAAI;AACF,QAAIwC,IAAI,GAAG,MAAMlD,IAAI,CAACuH,eAAL,CAAqB7G,MAArB,CAAjB;AACA,QAAIge,KAAK,GAAG,MAAMZ,YAAY,CAACa,eAAb,EAAlB;AACA,QAAIC,SAAS,GAAG1b,IAAI,CAAC2b,WAAL,IAAoB,EAApC,CAHE,CAIF;;AACA,QAAIC,WAAW,GAAGJ,KAAK,CACpBvZ,GADe,CACVuD,CAAD,IAAOqW,UAAU,CAACrW,CAAD,CADN,EAEfgC,MAFe,CAER,CAACsU,CAAD,EAAIC,CAAJ,KAAWD,CAAC,GAAGC,CAAJ,GAAQD,CAAR,GAAYC,CAFf,CAAlB;AAGA,WAAO;AACLC,YAAM,EAAEN,SAAS,CAAC/T,OAAV,CAAkBiU,WAAlB,MAAmC,CAAC,CADvC;AAEL9K,kBAAY,EAAE8K;AAFT,KAAP;AAID,GAZD,CAYE,OAAOhb,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAhBD;;AAkBA,MAAMiQ,aAAa,GAAG,OAAOrT,MAAP,EAAesT,YAAf,KAAgC;AACpD,MAAI;AACF,QAAImL,WAAW,GAAG,MAAMnf,IAAI,CAACof,eAAL,CAAqB1e,MAArB,EAA6BsT,YAA7B,CAAxB;AACA,WAAOmL,WAAP;AACD,GAHD,CAGE,OAAOrb,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAM0N,kBAAkB,GAAG,MAAOpN,KAAP,IAAiB;AAC1C,MAAI;AACF,QAAIqa,UAAU,GAAG,MAAMze,IAAI,CAACwR,kBAAL,CAAwBpN,KAAxB,CAAvB;AAEA,WAAOqa,UAAP;AACD,GAJD,CAIE,OAAO3a,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CARD;;AAUA,MAAM8P,qBAAqB,GAAG,OAAOlT,MAAP,EAAemT,eAAf,EAAgCC,WAAhC,KAAgD;AAC5E,MAAI;AACF,WAAO,MAAM9T,IAAI,CAAC4T,qBAAL,CACXlT,MADW,EAEXmT,eAFW,EAGXC,WAHW,CAAb;AAKD,GAND,CAME,OAAOhQ,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAVD;;AAYA,MAAMoQ,cAAc,GAAG,OAAOxT,MAAP,EAAe9C,QAAf,KAA4B;AACjD,MAAI;AACF,QAAI,CAAC,UAAD,EAAa,OAAb,EAAsB,aAAtB,EAAqCiN,OAArC,CAA6CjN,QAA7C,MAA2D,CAAC,CAAhE,EACE,MAAO,iBAAgBA,QAAS,gBAAhC;AACF,WAAO,MAAMoC,IAAI,CAACkU,cAAL,CAAoBxT,MAApB,EAA4B9C,QAA5B,CAAb;AACD,GAJD,CAIE,OAAOkG,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CARD;;AAUA,MAAMqQ,iBAAiB,GAAG,OAAOzT,MAAP,EAAe0T,OAAf,KAA2B;AACnD,MAAI;AACF,UAAMpU,IAAI,CAACmU,iBAAL,CAAuBzT,MAAvB,EAA+B0T,OAA/B,CAAN;AACA,WAAO;AAAE1T,YAAF;AAAUsE,YAAM,EAAEoP;AAAlB,KAAP;AACD,GAHD,CAGE,OAAOtQ,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAPD;;AASA,MAAM0M,aAAa,GAAG,OAAO9P,MAAP,EAAe4P,OAAf,KAA2B;AAC/C,MAAI;AACF,WAAO,MAAMtQ,IAAI,CAACwQ,aAAL,CAAmB9P,MAAnB,EAA2B4P,OAA3B,CAAb;AACD,GAFD,CAEE,OAAOxM,EAAP,EAAW;AACX,UAAMA,EAAN;AACD;AACF,CAND;;AAQA,MAAMyD,eAAe,GAAG,MAAO7G,MAAP,IAAkB;AACxC,MAAI;AACF,WAAO,MAAMV,IAAI,CAACuH,eAAL,CAAqB7G,MAArB,CAAb;AACD,GAFD,CAEE,OAAOtF,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMiZ,kBAAkB,GAAG,MAAO3T,MAAP,IAAkB;AAC3C,MAAI;AACF,WAAO,MAAMV,IAAI,CAACqU,kBAAL,CAAwB3T,MAAxB,CAAb;AACD,GAFD,CAEE,OAAOtF,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMmZ,WAAW,GAAG,OAAO7T,MAAP,EAAe8T,IAAf,KAAwB;AAC1C,MAAI;AACF,WAAO,MAAMxU,IAAI,CAACuU,WAAL,CAAiB7T,MAAjB,EAAyB8T,IAAzB,CAAb;AACD,GAFD,CAEE,OAAOpZ,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQA,MAAMqZ,cAAc,GAAG,OAAO/T,MAAP,EAAe8T,IAAf,KAAwB;AAC7C,MAAI;AACF,WAAO,MAAMxU,IAAI,CAACyU,cAAL,CAAoB/T,MAApB,EAA4B8T,IAA5B,CAAb;AACD,GAFD,CAEE,OAAOpZ,GAAP,EAAY;AACZ,UAAMA,GAAN;AACD;AACF,CAND;;AAQAiB,MAAM,CAACC,OAAP,GAAiB;AACf0U,UADe;AAEftM,mBAFe;AAGf2M,sBAHe;AAIfc,eAJe;AAKfE,gBALe;AAMf7M,YANe;AAOfiN,kBAPe;AAQfG,mBARe;AASfE,qBATe;AAUfR,aAVe;AAWfS,kBAXe;AAYfrL,kBAZe;AAaf0H,wBAbe;AAcf4D,mBAde;AAefvL,qBAfe;AAgBfhH,mBAhBe;AAiBfwS,gBAjBe;AAkBfE,oBAlBe;AAmBfY,eAnBe;AAoBfvC,oBApBe;AAqBf6B,gBArBe;AAsBfI,gBAtBe;AAuBfS,gBAvBe;AAwBfC,mBAxBe;AAyBf3D,eAzBe;AA0BfhJ,eA1Be;AA2BfD,iBA3Be;AA4Bf8M,oBA5Be;AA6BfT,uBA7Be;AA8BfW,aA9Be;AA+BfE;AA/Be,CAAjB,C;;;;;;;;;;;AC5YA,MAAMzU,IAAI,GAAG7F,mBAAO,CAAC,4CAAD,CAApB;;AACA,MAAMklB,WAAW,GAAGllB,mBAAO,CAAC,gEAAD,CAAP,CAAoC2D,KAAxD;;AAIA,MAAMwhB,mBAAmB,GAAG,CAACthB,IAAD,EAAO8Y,OAAP,KAAmB;AAC3C,MAAItJ,KAAK,GAAI;AAAEA,SAAK,EAAE,KAAT;AAAgB5N,WAAO,EAAE;AAAzB,GAAb;AACA,MAAG,CAACkX,OAAD,IAAY,CAACA,OAAO,CAAClZ,QAAxB,EACI,OAAO4P,KAAP;AAEJ,QAAM;AAAE5P;AAAF,MAAekZ,OAArB;AACA,MAAIyI,SAAS,GAAGF,WAAW,CAACzV,MAAZ,CAAmB4V,CAAC,IAAI;AACpC,QAAIzH,KAAK,GAAGyH,CAAC,CAACrhB,cAAF,CAAiByL,MAAjB,CAAwBoO,CAAC,IAAIA,CAAC,CAACC,WAAF,OAAoBra,QAAQ,CAACqa,WAAT,EAAjD,CAAZ;AACA,WAAOF,KAAK,CAACrc,MAAN,GAAe,CAAf,IAAoB8jB,CAAC,CAACxhB,IAAF,CAAOia,WAAP,OAAyBja,IAAI,CAACyhB,iBAAL,EAApD;AAEH,GAJe,CAAhB;AAMA,MAAIF,SAAS,CAAC7jB,MAAV,GAAmB,CAAvB,EACI8R,KAAK,GAAG;AAAEA,SAAK,EAAE,IAAT;AAAe5N,WAAO,EAAE;AAAxB,GAAR;AACJ,SAAO4N,KAAP;AACH,CAfD;;AAkBAlR,OAAO,CAACoR,eAAR,GAA0B,CAAC1P,IAAD,EAAO0hB,GAAP,KAAe;AACrC,SAAO,IAAIzkB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACpC,QAAI6H,IAAI,GAAGlD,IAAX;AACA,QAAIuN,OAAO,GAAGrK,IAAI,CAACoK,YAAL,CAAkBoS,GAAlB,CAAd;AACAnS,WAAO,CAACzS,IAAR,CAAaC,GAAG,IAAI;AAChB,UAAI6b,UAAU,GAAG1T,IAAI,CAAC2T,eAAL,CAAqB6I,GAArB,CAAjB;AACA9I,gBAAU,CAAC9b,IAAX,CAAgBgc,OAAO,IAAI;AACvB,YAAItJ,KAAK,GAAG8R,mBAAmB,CAACthB,IAAD,EAAO8Y,OAAP,CAA/B;AACA,YAAItJ,KAAK,CAACA,KAAV,EACItS,OAAO,CAACsS,KAAD,CAAP,CADJ,KAGInS,MAAM,CAACmS,KAAD,CAAN;AACP,OAND,EAMG2K,IAAI,IAAI;AACP9c,cAAM,CAAC;AAAEmS,eAAK,EAAE,KAAT;AAAgB5N,iBAAO,EAAE;AAAzB,SAAD,CAAN;AACH,OARD;AASH,KAXD,EAWGxE,GAAG,IAAI;AACNC,YAAM,CAAC;AAAEmS,aAAK,EAAE,KAAT;AAAgB5N,eAAO,EAAE;AAAzB,OAAD,CAAN;AACH,KAbD;AAcH,GAjBM,CAAP;AAkBH,CAnBD,C;;;;;;;;;;;ACvBA,MAAM4W,IAAI,GAAGrc,mBAAO,CAAC,0CAAD,CAAP,CAAyBqc,IAAtC;;AAEA,MAAMmJ,eAAe,GAAG,CAAC3I,OAAD,EAAUpV,KAAV,EAAiB3C,MAAjB,KAA4B;AAClD,SAAO,IAAIhE,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,QAAIukB,IAAI,GAAG,IAAIpJ,IAAJ,EAAX;AACAoJ,QAAI,CAACzI,kBAAL,CAAwBH,OAAxB,EAAiCpV,KAAjC,EAAwC3C,MAAxC,EAAgDnE,IAAhD,CACGC,GAAD,IAAS;AACPG,aAAO,CAACH,GAAD,CAAP;AACD,KAHH,EAIGK,GAAD,IACEC,MAAM,CAAC;AACLmS,WAAK,EAAE,KADF;AAEL5N,aAAO,EAAExE,GAAG,CAACwE,OAAJ,GAAcxE,GAAG,CAACwE,OAAlB,GAA6B,UAASe,IAAI,CAACkf,SAAL,CAAezkB,GAAf,CAAoB;AAF9D,KAAD,CALV;AAUD,GAZM,CAAP;AAaD,CAdD;;AAgBAkB,OAAO,CAACwjB,YAAR,GAAuB,CAAC1gB,GAAD,EAAMrE,GAAN,EAAW6K,IAAX,KAAoB;AACzC/I,SAAO,CAACuD,GAAR,CAAa,6CAAb,EADyC,CAEzC;;AACA,MAAI4W,OAAO,GAAG5X,GAAG,CAAC2gB,OAAlB;AAAA,MACEne,KAAK,GAAGxC,GAAG,CAACvE,OAAJ,CAAY,eAAZ,CADV;AAAA,MAEEoE,MAAM,GACJG,GAAG,CAACvE,OAAJ,CAAY,SAAZ,KAA0BuE,GAAG,CAACK,KAAJ,CAAU,SAAV,CAA1B,IAAkDL,GAAG,CAACe,IAAJ,CAAS,SAAT,CAHtD;AAKAwf,iBAAe,CAAC3I,OAAD,EAAUpV,KAAV,EAAiB3C,MAAjB,CAAf,CAAwCnE,IAAxC,CACGE,MAAD,IAAY;AACV,QAAIA,MAAM,CAACwS,KAAX,EAAkB5H,IAAI,GAAtB,KAEE7K,GAAG,CACA0B,MADH,CACU,KADV,EAEGiB,IAFH,CAEQ;AAAEiC,aAAO,EAAE,KAAX;AAAkBhD,WAAK,EAAE;AAAzB,KAFR;AAGH,GAPH,EAQGvB,GAAD,IACEL,GAAG,CAAC0B,MAAJ,CAAW,KAAX,EAAkBiB,IAAlB,CAAuB;AACrBiC,WAAO,EAAE,KADY;AAErBhD,SAAK,EAAEvB,GAAG,CAACwE,OAAJ,IAAe;AAFD,GAAvB,CATJ;AAcD,CAtBD,C;;;;;;;;;;;AClBA,MAAMogB,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAM8lB,aAAa,GAAG,IAAID,QAAQ,CAACE,MAAb,CAAoB;AACxC7gB,UAAQ,EAAE;AACR8gB,QAAI,EAAEC;AADE,GAD8B;AAIxCriB,MAAI,EAAE;AACJoiB,QAAI,EAAEC;AADF,GAJkC;AAOxCtK,QAAM,EAAE;AACNqK,QAAI,EAAEC;AADA,GAPgC;AAUxCtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAV6B,CAApB,CAAtB;AAgBAyR,aAAa,CAACK,OAAd,GAAwB;AACtB7K,kBAAgB,EAAE,UAAUpW,QAAV,EAAoBtB,IAApB,EAA0B2X,OAA1B,EAAmC;AACnD,QAAI1F,SAAS,GAAG0F,OAAO,CAACvQ,GAAR,CAAa2Q,MAAD,KAAa;AAAEzW,cAAF;AAAYtB,UAAZ;AAAkB+X;AAAlB,KAAb,CAAZ,CAAhB;AACA,WAAO,IAAI7a,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtCga,aAAO,CAACkL,UAAR,CAAmBvQ,SAAnB,EACGlV,IADH,CACS0lB,KAAD,IAAW;AACftlB,eAAO,CAACslB,KAAD,CAAP;AACD,OAHH,EAIGrlB,KAJH,CAIUC,GAAD,IAAS;AACdC,cAAM,CAACD,GAAD,CAAN;AACD,OANH;AAOD,KARM,CAAP;AASD,GAZqB;AAatB4a,oBAAkB,EAAE,UAAU3W,QAAV,EAAoB;AACtC,WAAO,IAAIpE,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKif,IAAL,CAAU;AAAEjb,gBAAQ,EAAEA;AAAZ,OAAV,EACGohB,IADH,GAEGC,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;;AACT,YAAIJ,MAAJ,EAAY;AACV,cAAIgV,SAAS,GAAGhV,MAAM,CAACmK,GAAP,CAAY+J,CAAD,KAAQ;AACjClG,kBAAM,EAAEkG,CAAC,CAACnR,IADuB;AAEjC+X,kBAAM,EAAE5G,CAAC,CAAC4G,MAFuB;AAGjChJ,qBAAS,EAAEoC,CAAC,CAACpC;AAHoB,WAAR,CAAX,CAAhB;AAKA,cAAIiC,OAAO,GAAGiB,SAAS,CAACtF,MAAV,CAAiB,CAACqE,OAAD,EAAU/F,MAAV,KAAqB;AAClD,gBACE+F,OAAO,CAACnF,MAAR,CAAgBsF,CAAD,IAAOA,CAAC,CAAClG,MAAF,KAAaA,MAAM,CAACA,MAA1C,EAAkDtN,MAAlD,GAA2D,CAD7D,EAEE;AACA,kBAAIilB,QAAQ,GAAG5R,OAAO,CAACnF,MAAR,CACZsF,CAAD,IAAOA,CAAC,CAAClG,MAAF,KAAaA,MAAM,CAACA,MADd,EAEb,CAFa,CAAf;AAGA+F,qBAAO,GAAG,CACR,GAAGA,OAAO,CAACnF,MAAR,CAAgBsF,CAAD,IAAOA,CAAC,CAAClG,MAAF,KAAaA,MAAM,CAACA,MAA1C,CADK,EAER,EACE,GAAG2X,QADL;AAEEjL,uBAAO,EAAE,CAAC,GAAGiL,QAAQ,CAACjL,OAAT,CAAiBvQ,GAAjB,CAAsByb,CAAD,IAAOA,CAA5B,CAAJ,EAAoC5X,MAAM,CAAC8M,MAA3C;AAFX,eAFQ,CAAV;AAOD,aAbD,MAaO;AACL/G,qBAAO,GAAG,CACR,GAAGA,OADK,EAER;AACE/F,sBAAM,EAAEA,MAAM,CAACA,MADjB;AAEE0M,uBAAO,EAAE,CAAC1M,MAAM,CAAC8M,MAAR,CAFX;AAGEhJ,yBAAS,EAAE9D,MAAM,CAAC8D;AAHpB,eAFQ,CAAV;AAQD;;AACD,mBAAOiC,OAAP;AACD,WAzBa,EAyBX,EAzBW,CAAd;AA0BA7T,iBAAO,CAAC;AAAE6T,mBAAO,EAAEA;AAAX,WAAD,CAAP;AACD;AACF,OAtCH;AAuCD,KAxCM,CAAP;AAyCD,GAvDqB;AAwDtBqH,sBAAoB,EAAE,UAAU/W,QAAV,EAAoB;AACxC,WAAO,KAAKib,IAAL,CAAU;AAAEjb,cAAQ,EAAEA;AAAZ,KAAV,EACJqZ,IADI,CACC;AAAE3a,UAAI,EAAE,KAAR;AAAe+X,YAAM,EAAE;AAAvB,KADD,EAEJ2K,IAFI,EAAP;AAGD,GA5DqB;AA6DtBtK,2BAAyB,EAAE,UAAUD,UAAV,EAAsBJ,MAAtB,EAA8B;AACvD,WAAO,KAAK+K,OAAL,CAAa;AAAE9iB,UAAI,EAAEmY,UAAR;AAAoBJ,YAAM,EAAEA;AAA5B,KAAb,EAAmD2K,IAAnD,EAAP;AACD;AA/DqB,CAAxB;AAkEA,MAAMpL,OAAO,GAAG2K,QAAQ,CAACc,KAAT,CAAe,SAAf,EAA0Bb,aAA1B,CAAhB;AAEA5jB,MAAM,CAACC,OAAP,GAAiB+Y,OAAjB,C;;;;;;;;;;;ACvFA,MAAM1N,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM6lB,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAM4mB,gBAAgB,GAAG5mB,mBAAO,CAAC,4EAAD,CAAhC;;AAEA,MAAM6mB,kBAAkB,GAAG,IAAIhB,QAAQ,CAACE,MAAb,CAAoB;AAC7C7gB,UAAQ,EAAE;AACR8gB,QAAI,EAAEC;AADE,GADmC;AAI7C9Z,OAAK,EAAE;AACL6Z,QAAI,EAAEC;AADD,GAJsC;AAO7CjgB,MAAI,EAAE;AACJggB,QAAI,EAAEC;AADF,GAPuC;AAU7C7Z,OAAK,EAAE;AACL4Z,QAAI,EAAEC,MADD;AAELa,QAAI,EAAE,CAAC,MAAD,EAAS,SAAT,EAAoB,QAApB,EAA8B,SAA9B;AAFD,GAVsC;AAc7Cpe,aAAW,EAAE,CAACke,gBAAD,CAdgC;AAe7CpY,UAAQ,EAAE;AACRwX,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBiT;AADpB,GAfmC;AAkB7C1a,OAAK,EAAE,CACL;AACE2Z,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QAD9B;AAEEmT,OAAG,EAAE;AAFP,GADK,CAlBsC;AAwB7CrU,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAxBkC,CAApB,CAA3B;AA8BAwS,kBAAkB,CAACV,OAAnB,GAA6B;AAC3Bja,MAAI,EAAE,UAAU+a,kBAAV,EAA8B;AAClC,UAAM7G,YAAY,GAAG,IAAI,IAAJ,CAAS6G,kBAAT,CAArB;AACA,WAAO7G,YAAY,CAACxI,IAAb,EAAP;AACD,GAJ0B;AAK3BlL,QAAM,EAAE,UAAUC,cAAV,EAA0B;AAChC,WAAO,KAAKua,SAAL,CAAe;AAAE5b,SAAG,EAAEqB;AAAP,KAAf,CAAP;AACD,GAP0B;AAQ3BC,SAAO,EAAE,UAAUD,cAAV,EAA0B;AACjC,WAAO,KAAK+Z,OAAL,CAAa;AAAEpb,SAAG,EAAEqB;AAAP,KAAb,EAAsC2Z,IAAtC,EAAP;AACD,GAV0B;AAW3BzZ,eAAa,EAAE,UACb3H,QADa,EAEb4H,OAAO,GAAGU,MAAM,CAAC6G,GAAP,GAAa8S,GAAb,CAAiB,CAAC,EAAlB,EAAsB,MAAtB,EAA8BxW,MAA9B,CAAqC,YAArC,CAFG,EAGb;AACA,WAAO,KAAKwP,IAAL,CAAU;AACfjb,cADe;AAEfyN,eAAS,EAAE;AAAEyU,YAAI,EAAE5Z,MAAM,CAACV,OAAD;AAAd,OAFI;AAGfT,WAAK,EAAE;AAAEgb,eAAO,EAAE,IAAX;AAAiBC,aAAK,EAAE;AAAxB;AAHQ,KAAV,EAIJhB,IAJI,EAAP;AAKD,GApB0B;AAqB3BvZ,aAAW,EAAE,UACX7H,QADW,EAEXqB,MAFW,EAGXuG,OAAO,GAAGU,MAAM,CAAC6G,GAAP,GAAa8S,GAAb,CAAiB,CAAC,EAAlB,EAAsB,MAAtB,EAA8BxW,MAA9B,CAAqC,YAArC,CAHC,EAIX;AACA,WAAO,KAAKwP,IAAL,CAAU;AACfjb,cADe;AAEfyN,eAAS,EAAE;AAAEyU,YAAI,EAAEta;AAAR,OAFI;AAGfT,WAAK,EAAE;AAAEkb,kBAAU,EAAE;AAAEC,aAAG,EAAE,CAACjhB,MAAD;AAAP;AAAd;AAHQ,KAAV,EAIJ+f,IAJI,EAAP;AAKD;AA/B0B,CAA7B;AAkCA,MAAMmB,YAAY,GAAG5B,QAAQ,CAACc,KAAT,CAAe,cAAf,EAA+BE,kBAA/B,CAArB;AAEA3kB,MAAM,CAACC,OAAP,GAAiBslB,YAAjB,C;;;;;;;;;;;ACtEA,MAAM5B,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAM0nB,kBAAkB,GAAG,IAAI7B,QAAQ,CAACE,MAAb,CAAoB;AAC7C4B,oBAAkB,EAAE,CAAC9B,QAAQ,CAAC+B,UAAV;AADyB,CAApB,CAA3B;AAIAF,kBAAkB,CAACvB,OAAnB,GAA6B;AAC3B0B,mBAAiB,EAAE,YAAY;AAC7B,QAAItD,KAAK,GAAG,IAAI,IAAJ,CAAS;AAAEoD,wBAAkB,EAAE,CAAC,GAAD;AAAtB,KAAT,CAAZ;AACA,WAAOpD,KAAK,CAAC3M,IAAN,EAAP;AACD,GAJ0B;AAK3B4M,iBAAe,EAAE,YAAY;AAC3B,WAAO,IAAI1jB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa,EAAb,EACGJ,IADH,GAEGC,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;;AACT,YAAI,CAACJ,MAAL,EAAa;AACX,eAAKgnB,iBAAL;AACD;;AACD,YAAItD,KAAK,GAAG1jB,MAAM,GAAGA,MAAM,CAAC8mB,kBAAV,GAA+B,CAAC,GAAD,CAAjD;AACA5mB,eAAO,CAACwjB,KAAK,IAAI,CAAC,GAAD,CAAV,CAAP;AACD,OATH;AAUD,KAXM,CAAP;AAYD;AAlB0B,CAA7B;AAqBA,MAAMZ,YAAY,GAAGkC,QAAQ,CAACc,KAAT,CAAe,cAAf,EAA+Be,kBAA/B,CAArB;AAEAxlB,MAAM,CAACC,OAAP,GAAiBwhB,YAAjB,C;;;;;;;;;;;AC9BA,MAAMkC,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAM8nB,IAAI,GAAG9nB,mBAAO,CAAC,oCAAD,CAApB;;AACA,MAAM+nB,IAAI,GAAG/nB,mBAAO,CAAC,oCAAD,CAApB;;AACA,MAAM6F,IAAI,GAAG7F,mBAAO,CAAC,oCAAD,CAApB;;AACA,MAAM0W,YAAY,GAAG1W,mBAAO,CAAC,oDAAD,CAA5B;;AACA,MAAM8gB,YAAY,GAAG9gB,mBAAO,CAAC,oDAAD,CAA5B;;AACA,MAAM+gB,YAAY,GAAG/gB,mBAAO,CAAC,oDAAD,CAA5B;;AACA,MAAMye,UAAU,GAAGze,mBAAO,CAAC,gDAAD,CAA1B;;AACA,MAAMkb,OAAO,GAAGlb,mBAAO,CAAC,0CAAD,CAAvB;;AACA,MAAM2jB,YAAY,GAAG3jB,mBAAO,CAAC,oDAAD,CAA5B;;AACA,MAAMynB,YAAY,GAAGznB,mBAAO,CAAC,oDAAD,CAA5B;;AAEA,MAAMgoB,MAAM,GAAG;AACbF,MADa;AAEbC,MAFa;AAGbliB,MAHa;AAIb4Y,YAJa;AAKb/H,cALa;AAMboK,cANa;AAObC,cAPa;AAQb7F,SARa;AASbyI,cATa;AAUb8D;AAVa,CAAf;;AAaA,MAAMxkB,SAAS,GAAG,YAAY;AAC5B;AACA,QAAMglB,kBAAkB,GAAG,MAAMpC,QAAQ,CAACqC,OAAT,CAAiBvjB,OAAO,CAACC,GAAR,CAAYujB,aAA7B,EAA4C;AAC3EC,mBAAe,EAAE,IAD0D;AAE3EC,sBAAkB,EAAE;AAFuD,GAA5C,CAAjC;AAKA3lB,SAAO,CAACuD,GAAR,CAAY4f,QAAQ,CAACmC,MAArB;AAGAnC,UAAQ,CAACyC,UAAT,CAAoBC,EAApB,CACE,OADF,EAEE7lB,OAAO,CAACF,KAAR,CAAcgmB,IAAd,CAAmB9lB,OAAnB,EAA4B,6BAA5B,CAFF;AAIA,SAAOulB,kBAAP;AACD,CAfD;;AAiBA/lB,MAAM,CAACC,OAAP,GAAiB;AAAEc,WAAF;AAAa+kB;AAAb,CAAjB,C;;;;;;;;;;;AC1CA,MAAMxa,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM6lB,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB,C,CACA;;;AAEA,MAAMyoB,UAAU,GAAG,IAAI5C,QAAQ,CAACE,MAAb,CAAoB;AACnCniB,MAAI,EAAE;AACFoiB,QAAI,EAAEC,MADJ;AAEFyC,YAAQ,EAAE;AAFR,GAD6B;AAKnCC,MAAI,EAAE;AACF3C,QAAI,EAAEC,MADJ;AAEFyC,YAAQ,EAAE;AAFR,GAL6B;AASnCE,UAAQ,EAAE;AACN5C,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QADtB;AAENmT,OAAG,EAAE;AAFC,GATyB;AAanC6B,UAAQ,EAAE;AACN7C,QAAI,EAAE8C,MADA;AAENrX,WAAO,EAAE;AAFH,GAbyB;AAiBnC3N,MAAI,EAAE;AACFkiB,QAAI,EAAEC;AADJ,GAjB6B;AAoBnCliB,SAAO,EAAE;AACLiiB,QAAI,EAAE+C,OADD;AAELtX,WAAO,EAAE;AAFJ,GApB0B;AAwBnC5G,QAAM,EAAE;AACJmb,QAAI,EAAE+C,OADF;AAEJtX,WAAO,EAAE;AAFL,GAxB2B;AA4BnCuU,MAAI,EAAE;AACFA,QAAI,EAAEC;AADJ,GA5B6B;AA+BnCtT,WAAS,EAAE;AACPqT,QAAI,EAAEE,IADC;AAEPzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFF;AA/BwB,CAApB,CAAnB;AAsCAoU,UAAU,CAACtC,OAAX,GAAqB;AACjB6C,aAAW,EAAE,UAAUC,MAAV,EAAkB;AAAE;AAC7B,WAAO,KAAKvC,OAAL,CAAa;AAChBpb,SAAG,EAAE2d,MADW,CACJ;AACZ;;AAFgB,KAAb,CAAP;AAIH,GANgB;AAOjBC,YAAU,EAAE,UAAUC,OAAV,EAAmB;AAC3B,WAAO,KAAKrP,MAAL,CAAY;AACfxO,SAAG,EAAE6d,OAAO,CAAC7d;AADE,KAAZ,EAEJ;AACK8d,UAAI,EAAE;AACF,gBAAQD,OAAO,CAACvlB,IADd;AAEF,gBAAQulB,OAAO,CAACR,IAFd;AAGF,oBAAYQ,OAAO,CAACP,QAHlB;AAIF,oBAAYO,OAAO,CAACN,QAJlB;AAKF,gBAAQM,OAAO,CAACN,QALd;AAMF,mBAAWM,OAAO,CAACplB,OANjB;AAOF,kBAAUolB,OAAO,CAACte,MAPhB;AAQF,gBAAQse,OAAO,CAACte,MARd;AASF,qBAAa2C,MAAM,CAAC6G,GAAP;AATX;AADX,KAFI,CAAP;AAeH,GAvBgB;AAwBjBgV,YAAU,EAAE,UAAUJ,MAAV,EAAkB;AAC1B,WAAO,KAAKK,UAAL,CAAgB;AACnBhe,SAAG,EAAE2d;AADc,KAAhB,CAAP;AAGH,GA5BgB;AA6BjBM,eAAa,EAAE,UAAUN,MAAV,EAAkB;AAC7B,WAAO,KAAK9I,IAAL,CAAU;AACbyI,cAAQ,EAAEK;AADG,KAAV,CAAP;AAGH,GAjCgB;AAkCjBO,0BAAwB,EAAE,UAAUC,OAAV,EAAmB;AACzC,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,kBAAkB,GAAG,KAAKJ,aAAL,CAAmBE,OAAnB,CAAzB;AACA,QAAIG,QAAQ,GAAG,EAAf;AACA,WAAO,IAAI9oB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACpCyoB,wBAAkB,CAAChpB,IAAnB,CAAyBkpB,MAAD,IAAY;AAChC,YAAIA,MAAM,CAACtoB,MAAP,GAAgB,CAApB,EAAuB;AACnBqoB,kBAAQ,GAAGpjB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACkf,SAAL,CAAemE,MAAf,CAAX,EAAmC7e,GAAnC,CAAwC8e,KAAD,IAAW;AACzD,mBAAOA,KAAK,CAACxe,GAAb;AACH,WAFU,CAAX;;AAGA,cAAIye,cAAc,GAAGL,KAAK,CAACF,wBAAN,CAA+BI,QAA/B,CAArB;;AACAG,wBAAc,CAACppB,IAAf,CAAqBE,MAAD,IAAY;AAC5BE,mBAAO,CAAC6oB,QAAQ,CAAC1jB,MAAT,CAAgBrF,MAAhB,CAAD,CAAP;AACH,WAFD;AAGH,SARD,MASIE,OAAO,CAAC6oB,QAAD,CAAP;AACP,OAXD,EAWI3oB,GAAD,IAAS;AACRC,cAAM,CAACD,GAAD,CAAN;AACH,OAbD;AAcH,KAfM,CAAP;AAgBH,GAtDgB;AAuDjB+oB,2BAAyB,EAAE,UAAUf,MAAV,EAAkB;AACzC,QAAIS,KAAK,GAAG,IAAZ;;AACA,QAAIO,YAAY,GAAG,KAAKjB,WAAL,CAAiBC,MAAjB,CAAnB;AACA,QAAIW,QAAQ,GAAG,EAAf;AACA,WAAO,IAAI9oB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACpC+oB,kBAAY,CAACtpB,IAAb,CAAmBgd,IAAD,IAAU;AACxBA,YAAI,GAAGnX,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACkf,SAAL,CAAe/H,IAAf,CAAX,CAAP;;AACA,YAAIA,IAAI,IAAIA,IAAI,CAACiL,QAAjB,EAA2B;AACvBgB,kBAAQ,CAAChhB,IAAT,CAAc+U,IAAI,CAACiL,QAAnB;;AACA,cAAIsB,cAAc,GAAGR,KAAK,CAACM,yBAAN,CAAgCrM,IAAI,CAACiL,QAArC,CAArB;;AACAsB,wBAAc,CAACvpB,IAAf,CAAqBE,MAAD,IAChBE,OAAO,CAAC6oB,QAAQ,CAAC1jB,MAAT,CAAgBrF,MAAhB,CAAD,CADX;AAEH,SALD,MAMIE,OAAO,CAAC6oB,QAAD,CAAP;AACP,OATD,EASG3oB,GAAG,IAAIC,MAAM,CAACD,GAAD,CAThB;AAUH,KAXM,CAAP;AAYH,GAvEgB;AAwEjBkpB,UAAQ,EAAE,UAAUxmB,KAAV,EAAiB;AACvB,WAAO,KAAKwc,IAAL,CAAU;AAAE7U,SAAG,EAAE3H;AAAP,KAAV,CAAP;AACH;AA1EgB,CAArB;AAgFA,MAAMmkB,IAAI,GAAGjC,QAAQ,CAACc,KAAT,CAAe,MAAf,EAAuB8B,UAAvB,CAAb;AAEAvmB,MAAM,CAACC,OAAP,GAAiB2lB,IAAjB,C;;;;;;;;;;;AC5HA,MAAMjC,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AAEA,MAAMoqB,gBAAgB,GAAG,IAAIvE,QAAQ,CAACE,MAAb,CAAoB;AACzCsE,UAAQ,EAAE;AACNrE,QAAI,EAAEC;AADA,GAD+B;AAIzCqE,UAAQ,EAAE;AACNtE,QAAI,EAAEC;AADA,GAJ+B;AAOzCsE,eAAa,EAAE;AACXvE,QAAI,EAAEC;AADK,GAP0B;AAUzCuE,SAAO,EAAE;AACLxE,QAAI,EAAEC;AADD,GAVgC;AAazCwE,UAAQ,EAAE;AACNzE,QAAI,EAAEC;AADA,GAb+B;AAgBzCyE,UAAQ,EAAE;AACN1E,QAAI,EAAEC;AADA,GAhB+B;AAmBzC0E,MAAI,EAAE;AACF3E,QAAI,EAAEC;AADJ,GAnBmC;AAsBzC2E,UAAQ,EAAE;AACN5E,QAAI,EAAEC;AADA,GAtB+B;AAyBzC4E,WAAS,EAAE;AACP7E,QAAI,EAAEC;AADC,GAzB8B;AA4BzC6E,MAAI,EAAE;AACF9E,QAAI,EAAEC;AADJ,GA5BmC;AA+BzC8E,eAAa,EAAE;AACX/E,QAAI,EAAEC;AADK,GA/B0B;AAkCzC+E,SAAO,EAAE;AACLhF,QAAI,EAAEC;AADD,GAlCgC;AAqCzCgF,kBAAgB,EAAE;AACdjF,QAAI,EAAEC;AADQ,GArCuB;AAwCzCiF,QAAM,EAAE;AACJlF,QAAI,EAAEC;AADF,GAxCiC;AA2CzCkF,cAAY,EAAE;AACVnF,QAAI,EAAEC;AADI;AA3C2B,CAApB,CAAzB;AAgDAmE,gBAAgB,CAACjE,OAAjB,GAA2B;AACvBjZ,WAAS,EAAE,UAAUyR,EAAV,EAAc;AACrB,QAAIyM,KAAK,GAAG,IAAIC,MAAJ,CAAW1M,EAAX,CAAZ;AACA,WAAO,KAAKwB,IAAL,CAAU;AAAEkK,cAAQ,EAAEe;AAAZ,KAAV,EAA+B5nB,KAA/B,CAAqC,GAArC,CAAP;AACH;AAJsB,CAA3B;AAOA,MAAMib,UAAU,GAAGoH,QAAQ,CAACc,KAAT,CAAe,YAAf,EAA6ByD,gBAA7B,CAAnB;AAEAloB,MAAM,CAACC,OAAP,GAAiBsc,UAAjB,C;;;;;;;;;;;AC3DA,MAAMjR,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM6lB,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AAEA,MAAMsrB,UAAU,GAAG,IAAIzF,QAAQ,CAACE,MAAb,CAAoB;AACnCniB,MAAI,EAAE;AACFoiB,QAAI,EAAEC,MADJ;AAEFyC,YAAQ,EAAE;AAFR,GAD6B;AAKnClkB,aAAW,EAAE;AACTwhB,QAAI,EAAEC,MADG;AAETyC,YAAQ,EAAE;AAFD,GALsB;AASnC6C,oBAAkB,EAAE;AAChBvF,QAAI,EAAE+C,OADU;AAEhBtX,WAAO,EAAE;AAFO,GATe;AAanC+Z,kBAAgB,EAAE;AACdxF,QAAI,EAAE+C,OADQ;AAEdtX,WAAO,EAAE;AAFK,GAbiB;AAiBnC5G,QAAM,EAAE;AACJmb,QAAI,EAAE+C,OADF;AAEJtX,WAAO,EAAE;AAFL,GAjB2B;AAqBnC9N,OAAK,EAAE,CAAC;AACJqiB,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QADxB;AAEJmT,OAAG,EAAE;AAFD,GAAD,CArB4B;AAyBnCrU,WAAS,EAAE;AACPqT,QAAI,EAAEE,IADC;AAEPzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFF;AAzBwB,CAApB,CAAnB;AA+BAiX,UAAU,CAACnF,OAAX,GAAqB;AACjBsF,YAAU,EAAE,UAAUC,MAAV,EAAkB;AAC1B,WAAO,KAAKpC,UAAL,CAAgB;AACnBhe,SAAG,EAAEogB;AADc,KAAhB,CAAP;AAGH,GALgB;AAMjBC,aAAW,EAAE,UAAUD,MAAV,EAAkB/nB,KAAlB,EAAyB;AAClC,QAAI,CAACioB,KAAK,CAACC,OAAN,CAAcloB,KAAd,CAAL,EAA2BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAC3B,WAAO,KAAKmW,MAAL,CAAY;AACfxO,SAAG,EAAEogB;AADU,KAAZ,EAEJ;AACKI,eAAS,EAAE;AACPnoB,aAAK,EAAE;AACHooB,eAAK,EAAEpoB;AADJ;AADA;AADhB,KAFI,EAQA;AACCqoB,WAAK,EAAE;AADR,KARA,CAAP;AAWH,GAnBgB;AAoBjBC,gBAAc,EAAE,UAAUC,KAAV,EAAiBvoB,KAAjB,EAAwB;AACpC,QAAI,CAACioB,KAAK,CAACC,OAAN,CAAcloB,KAAd,CAAL,EAA2BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAC3B,QAAI,CAACioB,KAAK,CAACC,OAAN,CAAcK,KAAd,CAAL,EAA2BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAE3B,WAAO,KAAKpS,MAAL,CAAY;AACfxO,SAAG,EAAE;AACDkc,WAAG,EAAE0E;AADJ;AADU,KAAZ,EAIJ;AACKC,cAAQ,EAAE;AACNxoB,aAAK,EAAEA;AADD;AADf,KAJI,EAQA;AACCqoB,WAAK,EAAE;AADR,KARA,CAAP;AAWH,GAnCgB;AAoCjBI,cAAY,EAAE,UAAUV,MAAV,EAAkB;AAC5B,WAAO,IAAI5qB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACpC,WAAKif,IAAL,CAAU;AACN7U,WAAG,EAAEogB;AADC,OAAV,EAEGW,QAFH,CAEY,OAFZ,EAEqB9F,IAFrB,CAE0B,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvC,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACTF,eAAO,CAACF,MAAD,CAAP;AACH,OALD;AAMH,KAPM,CAAP;AAQH;AA7CgB,CAArB;AAgDA,MAAMknB,IAAI,GAAGlC,QAAQ,CAACc,KAAT,CAAe,MAAf,EAAuB2E,UAAvB,CAAb;AAEAppB,MAAM,CAACC,OAAP,GAAiB4lB,IAAjB,C;;;;;;;;;;;ACpFA,MAAMlC,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAM4mB,gBAAgB,GAAG,IAAIf,QAAQ,CAACE,MAAb,CAAoB;AAC3Cle,UAAQ,EAAE;AACRme,QAAI,EAAEC;AADE,GADiC;AAI3C5lB,KAAG,EAAE;AACH2lB,QAAI,EAAEC;AADH,GAJsC;AAO3CqG,WAAS,EAAE;AACTtG,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAPgC,CAApB,CAAzB;AAaAnS,MAAM,CAACC,OAAP,GAAiBykB,gBAAjB,C;;;;;;;;;;;AChBA,MAAMf,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAMusB,UAAU,GAAG,IAAI1G,QAAQ,CAACE,MAAb,CAAoB;AACrC1L,MAAI,EAAE;AACJ2L,QAAI,EAAEC;AADF,GAD+B;AAIrCtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAJ0B,CAApB,CAAnB;AAUAnS,MAAM,CAACC,OAAP,GAAiBoqB,UAAjB,C;;;;;;;;;;;ACbA,MAAM1G,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AAEA,MAAMwsB,eAAe,GAAG,IAAI3G,QAAQ,CAACE,MAAb,CAAoB;AAC1ChI,MAAI,EAAE;AAAEiI,QAAI,EAAEC;AAAR,GADoC;AAE1CwG,OAAK,EAAE;AAAEzG,QAAI,EAAEC;AAAR,GAFmC;AAG1CyG,OAAK,EAAE;AAAE1G,QAAI,EAAEC;AAAR,GAHmC;AAI1C0G,UAAQ,EAAE;AAAE3G,QAAI,EAAEC;AAAR,GAJgC;AAK1CjX,QAAM,EAAE;AAAEgX,QAAI,EAAEC;AAAR,GALkC;AAM1C2G,QAAM,EAAE;AAAE5G,QAAI,EAAE+C;AAAR,GANkC;AAO1C8D,UAAQ,EAAE;AAAE7G,QAAI,EAAEC;AAAR,GAPgC;AAQ1C6G,YAAU,EAAE;AAAE9G,QAAI,EAAEC;AAAR;AAR8B,CAApB,CAAxB;AAWA/jB,MAAM,CAACC,OAAP,GAAiBqqB,eAAjB,C;;;;;;;;;;;ACbA,MAAM3G,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AAEA,MAAM+sB,cAAc,GAAG,IAAIlH,QAAQ,CAACE,MAAb,CAAoB;AACzCM,OAAK,EAAE;AACLL,QAAI,EAAEC;AADD,GADkC;AAIzCzc,MAAI,EAAE;AACJwc,QAAI,EAAEC;AADF;AAJmC,CAApB,CAAvB;AASA/jB,MAAM,CAACC,OAAP,GAAiB4qB,cAAjB,C;;;;;;;;;;;ACXA,MAAMlH,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM+sB,cAAc,GAAG/sB,mBAAO,CAAC,uEAAD,CAA9B;;AACA,MAAMgtB,WAAW,GAAG,IAAInH,QAAQ,CAACE,MAAb,CAAoB;AACtCkH,OAAK,EAAE;AACLjH,QAAI,EAAEC;AADD,GAD+B;AAItCD,MAAI,EAAE;AACJA,QAAI,EAAEC;AADF,GAJgC;AAOtCxlB,MAAI,EAAE,CAACssB,cAAD,CAPgC;AAQtCN,OAAK,EAAE;AACLzG,QAAI,EAAEC;AADD,GAR+B;AAWtCiH,WAAS,EAAE;AACTlH,QAAI,EAAE+C,OADG;AAETtX,WAAO,EAAE;AAFA,GAX2B;AAetC0b,kBAAgB,EAAE;AAChBnH,QAAI,EAAEC;AADU;AAfoB,CAApB,CAApB;AAoBA/jB,MAAM,CAACC,OAAP,GAAiB6qB,WAAjB,C;;;;;;;;;;;ACvBA,MAAMnH,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwsB,eAAe,GAAGxsB,mBAAO,CAAC,yEAAD,CAA/B;;AAEA,MAAMyoB,UAAU,GAAG,IAAI5C,QAAQ,CAACE,MAAb,CAAoB;AACrChI,MAAI,EAAE;AAAEiI,QAAI,EAAEC;AAAR,GAD+B;AAErCwG,OAAK,EAAE;AAACzG,QAAI,EAAEC;AAAP,GAF8B;AAGrCjiB,gBAAc,EAAE,CAACiiB,MAAD,CAHqB;AAIrCmH,YAAU,EAAE,CAACZ,eAAD;AAJyB,CAApB,CAAnB;AAOAtqB,MAAM,CAACC,OAAP,GAAiBsmB,UAAjB,C;;;;;;;;;;;ACVA,MAAM5C,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAMgtB,WAAW,GAAGhtB,mBAAO,CAAC,iEAAD,CAA3B;;AAEA,MAAMqtB,YAAY,GAAG,IAAIxH,QAAQ,CAACE,MAAb,CAAoB;AACvCniB,MAAI,EAAE;AAAEoiB,QAAI,EAAEC;AAAR,GADiC;AAEvC9Z,OAAK,EAAE;AAAE6Z,QAAI,EAAEC;AAAR,GAFgC;AAGvCjL,SAAO,EAAE;AAAEgL,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBiT;AAA9B,GAH8B;AAIvCuG,QAAM,EAAE,CAACN,WAAD;AAJ+B,CAApB,CAArB;AAOA9qB,MAAM,CAACC,OAAP,GAAiBkrB,YAAjB,C;;;;;;;;;;;ACXA,MAAMxH,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAMutB,WAAW,GAAG,IAAI1H,QAAQ,CAACE,MAAb,CAAoB;AACtCniB,MAAI,EAAE;AACJoiB,QAAI,EAAEC;AADF,GADgC;AAItCuH,SAAO,EAAE;AACPxH,QAAI,EAAEC;AADC,GAJ6B;AAOtC1c,SAAO,EAAE;AACPyc,QAAI,EAAEC;AADC,GAP6B;AAUtCxX,WAAS,EAAE;AACTuX,QAAI,EAAE+C,OADG;AAETtX,WAAO,EAAE;AAFA,GAV2B;AActCgc,QAAM,EAAE;AACNzH,QAAI,EAAEC;AADA,GAd8B;AAiBtCyH,uBAAqB,EAAE;AACrB1H,QAAI,EAAEC;AADe,GAjBe;AAoBtCpb,QAAM,EAAE;AACNmb,QAAI,EAAE+C,OADA;AAENtX,WAAO,EAAE;AAFH,GApB8B;AAwBtCkc,UAAQ,EAAE;AACR3H,QAAI,EAAEE;AADE,GAxB4B;AA2BtC0H,SAAO,EAAE;AACP5H,QAAI,EAAEE;AADC,GA3B6B;AA8BtC2H,OAAK,EAAE;AACL7H,QAAI,EAAE8C,MADD;AAELrX,WAAO,EAAE;AAFJ,GA9B+B;AAkCtCkB,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAlC2B,CAApB,CAApB;AAwCAnS,MAAM,CAACC,OAAP,GAAiBorB,WAAjB,C;;;;;;;;;;;AC3CA,MAAM1H,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAM8tB,eAAe,GAAG,IAAIjI,QAAQ,CAACE,MAAb,CAAoB;AAC1Cte,OAAK,EAAE;AACLue,QAAI,EAAEC;AADD,GADmC;AAI1CtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAJ+B,CAApB,CAAxB;AAUAnS,MAAM,CAACC,OAAP,GAAiB2rB,eAAjB,C;;;;;;;;;;;ACbA,MAAMjI,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAM+tB,gBAAgB,GAAG,IAAIlI,QAAQ,CAACE,MAAb,CAAoB;AAC3C7a,UAAQ,EAAE;AACR8a,QAAI,EAAEC;AADE,GADiC;AAI3Chf,cAAY,EAAE;AACZ+e,QAAI,EAAEC;AADM,GAJ6B;AAO3C9a,YAAU,EAAE;AACV6a,QAAI,EAAEC;AADI,GAP+B;AAU3C7a,UAAQ,EAAE;AACR4a,QAAI,EAAEC;AADE,GAViC;AAa3CtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAbgC,CAApB,CAAzB;AAmBAnS,MAAM,CAACC,OAAP,GAAiB4rB,gBAAjB,C;;;;;;;;;;;ACtBA,MAAMlI,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAMguB,kBAAkB,GAAG,IAAInI,QAAQ,CAACE,MAAb,CAAoB;AAC7CzjB,QAAM,EAAE;AACN0jB,QAAI,EAAEC;AADA,GADqC;AAI7CzhB,aAAW,EAAE;AACXwhB,QAAI,EAAEC;AADK,GAJgC;AAO7ChS,SAAO,EAAE;AACP+R,QAAI,EAAEC;AADC,GAPoC;AAU7CtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAVkC,CAApB,CAA3B,C,CAgBA;;AAEAnS,MAAM,CAACC,OAAP,GAAiB6rB,kBAAjB,C;;;;;;;;;;;ACrBA,MAAMnI,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAMguB,kBAAkB,GAAGhuB,mBAAO,CAAC,gFAAD,CAAlC;;AACA,MAAM+tB,gBAAgB,GAAG/tB,mBAAO,CAAC,4EAAD,CAAhC;;AACA,MAAMiuB,YAAY,GAAGjuB,mBAAO,CAAC,oDAAD,CAA5B;;AACA,MAAMkuB,YAAY,GAAGluB,mBAAO,CAAC,oDAAD,CAA5B;;AAEA,MAAMmuB,YAAY,GAAG,IAAItI,QAAQ,CAACE,MAAb,CAAoB;AACvCniB,MAAI,EAAE;AACJoiB,QAAI,EAAEC;AADF,GADiC;AAIvCrb,UAAQ,EAAE;AACRob,QAAI,EAAEC;AADE,GAJ6B;AAOvC/b,YAAU,EAAE;AACV8b,QAAI,EAAE8C;AADI,GAP2B;AAUvCje,QAAM,EAAE;AACNmb,QAAI,EAAE+C;AADA,GAV+B;AAavCpW,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA,GAb4B;AAiBvCvJ,YAAU,EAAE,CACV;AACEkb,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QAD9B;AAEEmT,OAAG,EAAE;AAFP,GADU,CAjB2B;;AAuBvC;;;;;;;AAOA1kB,QAAM,EAAE,CAAC0rB,kBAAD,CA9B+B;AA+BvCvlB,OAAK,EAAE,CAACslB,gBAAD,CA/BgC;AAgCvCK,eAAa,EAAE,CACb;AACEpI,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QAD9B;AAEEmT,OAAG,EAAE;AAFP,GADa,CAhCwB;AAsCvChkB,QAAM,EAAE;AACNgjB,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QADtB;AAENmT,OAAG,EAAE;AAFC,GAtC+B;AA0CvCpS,SAAO,EAAE,CACP;AACEoR,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QAD9B;AAEEmT,OAAG,EAAE;AAFP,GADO;AA1C8B,CAApB,CAArB;AAkDAmH,YAAY,CAAChI,OAAb,GAAuB;AACrBpE,YAAU,EAAE,UAAUD,SAAV,EAAqB;AAC/B,QAAI9Y,MAAM,GAAG,IAAI,IAAJ,CAAS8Y,SAAT,CAAb;AACA,WAAO9Y,MAAM,CAAC4O,IAAP,EAAP;AACD,GAJoB;AAKrBoK,cAAY,EAAE,UAAUzW,EAAV,EAAcjJ,MAAd,EAAsB;AAClC,QAAI,CAACspB,KAAK,CAACC,OAAN,CAAcvpB,MAAd,CAAL,EAA4BA,MAAM,GAAG,CAACA,MAAD,CAAT;AAC5B,WAAO,KAAK+rB,SAAL,CACL;AAAE/iB,SAAG,EAAEC;AAAP,KADK,EAEL;AACEugB,eAAS,EAAE;AACTxpB,cAAM,EAAE;AACNypB,eAAK,EAAEzpB;AADD;AADC;AADb,KAFK,EASL;AACE0pB,WAAK,EAAE;AADT,KATK,CAAP;AAaD,GApBoB;AAqBrB9J,oBAAkB,EAAE,UAAUte,IAAV,EAAgBsG,UAAhB,EAA4B;AAC9C,QAAI,CAAC0hB,KAAK,CAACC,OAAN,CAAcvpB,MAAd,CAAL,EAA4BA,MAAM,GAAG,CAACA,MAAD,CAAT;AAC5B,WAAO,KAAK+rB,SAAL,CACL;AAAEzqB,UAAI,EAAEA,IAAR;AAAcsG,gBAAU,EAAEA;AAA1B,KADK,EAEL;AACE4hB,eAAS,EAAE;AACTxpB,cAAM,EAAE;AACNypB,eAAK,EAAEzpB;AADD;AADC;AADb,KAFK,EASL;AACE0pB,WAAK,EAAE;AADT,KATK,CAAP;AAaD,GApCoB;AAqCrBrJ,iBAAe,EAAE,UAAUpX,EAAV,EAAc+iB,YAAd,EAA4B;AAC3C,QAAI,CAAC1C,KAAK,CAACC,OAAN,CAAcyC,YAAd,CAAL,EAAkCA,YAAY,GAAG,CAACA,YAAD,CAAf;AAClC,WAAO,KAAKD,SAAL,CACL;AAAE/iB,SAAG,EAAEC;AAAP,KADK,EAEL;AACEugB,eAAS,EAAE;AACTsC,qBAAa,EAAE;AACbrC,eAAK,EAAEuC;AADM;AADN;AADb,KAFK,EASL;AAAEtC,WAAK,EAAE;AAAT,KATK,CAAP;AAWD,GAlDoB;AAmDrB5J,WAAS,EAAE,UAAU7W,EAAV,EAAc;AACvB,WAAO,IAAIzK,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAEC;AADM,OAAb,EAGG8gB,QAHH,CAGY,YAHZ,EAG0B,MAH1B,EAIGA,QAJH,CAIY,eAJZ,EAI6B,cAJ7B,EAKG9F,IALH,CAKQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACT,YAAI;AACF2C,cADE;AAEFgH,kBAFE;AAGFV,oBAHE;AAIFW,gBAJE;AAKF8H,mBALE;AAMFrQ,gBANE;AAOF8rB,uBAPE;AAQFprB;AARE,YASAnC,MATJ;AAUAE,eAAO,CAAC;AACN6C,cADM;AAENgH,kBAFM;AAGNV,oBAHM;AAINW,gBAJM;AAKN8H,mBALM;AAMNrQ,gBANM;AAON8rB,uBAPM;AAQNprB;AARM,SAAD,CAAP;AAUD,OA3BH;AA4BD,KA7BM,CAAP;AA8BD,GAlFoB;AAmFrB6f,oBAAkB,EAAE,UAAUtX,EAAV,EAAc;AAChC,WAAO,IAAIzK,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAEC;AADM,OAAb,EAEGgb,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAG,IAAI,CAACJ,MAAZ,EAAoBK,MAAM,CAACD,GAAD,CAAN;;AACpB,YAAIJ,MAAJ,EAAY;AACV,cAAI;AAAE+C,gBAAF;AAAQgH,oBAAR;AAAkBV,sBAAlB;AAA8BW,kBAA9B;AAAsC8H;AAAtC,cAAoD9R,MAAxD;AACAE,iBAAO,CAAC;AACN6C,gBADM;AAENgH,oBAFM;AAGNV,sBAHM;AAINW,kBAJM;AAKN8H;AALM,WAAD,CAAP;AAOD;AACF,OAdD;AAeD,KAhBM,CAAP;AAiBD,GArGoB;AAsGrB4b,iBAAe,EAAE,UAAUrkB,UAAV,EAAsBtG,IAAtB,EAA4B;AAC3C,WAAO,IAAI9C,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXxc,kBAAU,EAAEA,UADD;AAEXtG,YAAI,EAAEA;AAFK,OAAb,EAGG2iB,IAHH,CAGQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACTF,eAAO,CAACF,MAAD,CAAP;AACD,OAND;AAOD,KARM,CAAP;AASD,GAhHoB;AAiHrBshB,mBAAiB,EAAE,UAAU5b,MAAV,EAAkB;AACnC,WAAO,IAAIzF,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAE5b,kBAAU,EAAE+a,QAAQ,CAAC/R,KAAT,CAAeD,QAAf,CAAwBtN,MAAxB;AAAd,OAAb,EAA8DggB,IAA9D,CACE,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACf,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACTF,eAAO,CAACF,MAAD,CAAP;AACD,OAJH;AAMD,KAPM,CAAP;AAQD,GA1HoB;AA2HrBqiB,kBAAgB,EAAE,UAAU3X,EAAV,EAAcijB,QAAd,EAAwB;AACxC,WAAO,KAAKH,SAAL,CACL;AACE/iB,SAAG,EAAEC;AADP,KADK,EAIL;AACE6d,UAAI,EAAE;AAAEpmB,cAAM,EAAEwrB;AAAV;AADR,KAJK,CAAP;AAQD,GApIoB;AAqIrBnL,iBAAe,EAAE,UAAU9X,EAAV,EAAc;AAC7B,WAAO,IAAIzK,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAEC;AADM,OAAb,EAGG8gB,QAHH,CAGY,QAHZ,EAIG9F,IAJH,CAIQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAG,IAAI,CAACJ,MAAZ,EAAoBK,MAAM,CAACD,GAAG,IAAI,iCAAR,CAAN,CAApB,KACK;AACH,cAAI;AAAE+B;AAAF,cAAanC,MAAjB;AACA,cAAImC,MAAJ,EAAYjC,OAAO,CAAC,EAAE,GAAGiC,MAAM,CAAC8P;AAAZ,WAAD,CAAP,CAAZ,KACK/R,OAAO,CAAC,EAAD,CAAP;AACN;AACF,OAXH;AAYD,KAbM,CAAP;AAcD,GApJoB;AAqJrBua,kBAAgB,EAAE,UAAU/P,EAAV,EAAckjB,QAAd,EAAwB;AACxC,QAAI,CAAC7C,KAAK,CAACC,OAAN,CAAc4C,QAAd,CAAL,EAA8BA,QAAQ,GAAG,CAACA,QAAD,CAAX;AAC9B,WAAO,KAAKJ,SAAL,CACL;AAAE/iB,SAAG,EAAEC;AAAP,KADK,EAEL;AAAEugB,eAAS,EAAE;AAAElX,eAAO,EAAE;AAAEmX,eAAK,EAAE0C;AAAT;AAAX;AAAb,KAFK,EAGL;AAAEzC,WAAK,EAAE;AAAT,KAHK,CAAP;AAKD,GA5JoB;AA6JrB3Q,kBAAgB,EAAE,UAAU9P,EAAV,EAAc;AAC9B,WAAO,IAAIzK,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAEC;AADM,OAAb,EAGG8gB,QAHH,CAGY,SAHZ,EAIG/F,IAJH,GAKGC,IALH,CAKQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;;AACT,YAAIJ,MAAJ,EAAY;AACV,cAAI;AAAE+T;AAAF,cAAc/T,MAAlB;AACA,cAAI+T,OAAJ,EAAa7T,OAAO,CAAC;AAAE6T,mBAAO,EAAE,CAAC,GAAGA,OAAJ;AAAX,WAAD,CAAP,CAAb,KACK7T,OAAO,CAAC;AAAE6T,mBAAO,EAAE;AAAX,WAAD,CAAP;AACN,SAJD,MAIO7T,OAAO,CAAC;AAAE6T,iBAAO,EAAE;AAAX,SAAD,CAAP;AACR,OAZH;AAaD,KAdM,CAAP;AAeD;AA7KoB,CAAvB;AAgLA,MAAMuG,MAAM,GAAG0K,QAAQ,CAACc,KAAT,CAAe,QAAf,EAAyBwH,YAAzB,CAAf;AAEAjsB,MAAM,CAACC,OAAP,GAAiBgZ,MAAjB,C;;;;;;;;;;;AC3OA,MAAM0K,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAMqtB,YAAY,GAAGrtB,mBAAO,CAAC,kFAAD,CAA5B;;AACA,MAAMyoB,UAAU,GAAGzoB,mBAAO,CAAC,8EAAD,CAA1B;;AAEA,MAAM0uB,kBAAkB,GAAG,IAAI7I,QAAQ,CAACE,MAAb,CAAoB;AAC7C4I,UAAQ,EAAE;AAAE3I,QAAI,EAAEC;AAAR,GADmC;AAE7C2I,SAAO,EAAE,CAACvB,YAAD,CAFoC;AAG7C1pB,OAAK,EAAE,CAAC8kB,UAAD,CAHsC;AAI7C9V,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AAJkC,CAApB,CAA3B;AAUAqa,kBAAkB,CAACvI,OAAnB,GAA6B;AAC3BlD,YAAU,EAAE,UAAUgL,YAAV,EAAwB;AAClC,QAAIjrB,MAAM,GAAG,IAAI,IAAJ,CAASirB,YAAT,CAAb;AACA,WAAOjrB,MAAM,CAAC4U,IAAP,EAAP;AACD,GAJ0B;AAK3BwL,cAAY,EAAE,UAAU7X,EAAV,EAAcvI,MAAd,EAAsB;AAClC,WAAO,KAAKqrB,SAAL,CAAe;AAAE/iB,SAAG,EAAEC;AAAP,KAAf,EAA4B,EAAE,GAAGvI;AAAL,KAA5B,CAAP;AACD;AAP0B,CAA7B;AAUA,MAAM8d,YAAY,GAAG+E,QAAQ,CAACc,KAAT,CAAe,cAAf,EAA+B+H,kBAA/B,CAArB;AAEAxsB,MAAM,CAACC,OAAP,GAAiB2e,YAAjB,C;;;;;;;;;;;AC3BA,MAAM+E,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAM6uB,kBAAkB,GAAG,IAAIhJ,QAAQ,CAACE,MAAb,CAAoB;AAC7CxgB,MAAI,EAAE;AACJygB,QAAI,EAAEC;AADF,GADuC;AAI7CriB,MAAI,EAAE;AACJoiB,QAAI,EAAEC;AADF,GAJuC;AAO7CpX,QAAM,EAAE;AACNmX,QAAI,EAAEC;AADA,GAPqC;AAU7CnX,cAAY,EAAE;AACZkX,QAAI,EAAEC;AADM,GAV+B;AAa7C/gB,UAAQ,EAAE;AACR8gB,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QADpB;AAERmT,OAAG,EAAE;AAFG,GAbmC;AAiB7Cnc,QAAM,EAAE;AACNmb,QAAI,EAAE+C,OADA;AAENtX,WAAO,EAAE;AAFH,GAjBqC;AAqB7Cqd,QAAM,EAAE;AACN9I,QAAI,EAAEC;AADA,GArBqC;AAwB7C8I,kBAAgB,EAAE;AAChB/I,QAAI,EAAEE;AADU,GAxB2B;AA2B7CziB,UAAQ,EAAE;AACRuiB,QAAI,EAAEC;AADE,GA3BmC;AA8B7CtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AA9BkC,CAApB,CAA3B;AAoCAwa,kBAAkB,CAAC1I,OAAnB,GAA6B;AAC3B1D,kBAAgB,EAAE,UAAUuM,aAAV,EAAyB;AACzC,QAAIC,UAAU,GAAG,IAAI,IAAJ,CAASD,aAAT,CAAjB;AACA,WAAOC,UAAU,CAACrX,IAAX,EAAP;AACD,GAJ0B;AAK3BG,wBAAsB,EAAE,UAAUxS,IAAV,EAAgBupB,MAAhB,EAAwB;AAC9C,WAAO,KAAKT,SAAL,CACL;AAAEa,UAAI,EAAE,CAAC;AAAE3pB,YAAI,EAAEA;AAAR,OAAD,EAAiB;AAAEsF,cAAM,EAAE;AAAV,OAAjB;AAAR,KADK,EAEL;AACEue,UAAI,EAAE;AACJ0F,cAAM,EAAEA,MADJ;AAEJjkB,cAAM,EAAE,KAFJ;AAGJkkB,wBAAgB,EAAEvhB,MAAM,CAAC6G,GAAP;AAHd;AADR,KAFK,CAAP;AAUD,GAhB0B;AAiB3BsD,iBAAe,EAAE,UAAUpS,IAAV,EAAgB;AAC/B,WAAO,IAAIzE,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,aAAO,KAAKwlB,OAAL,CAAa;AAAEnhB,YAAI,EAAEA,IAAR;AAAcsF,cAAM,EAAE;AAAtB,OAAb,EAA2C0b,IAA3C,CAAgD,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACtE,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACT,YAAI,CAACJ,MAAL,EACEK,MAAM,CAAC;AAAEsE,iBAAO,EAAE,KAAX;AAAkBC,iBAAO,EAAE;AAA3B,SAAD,CAAN;AACF1E,eAAO,CAACF,MAAD,CAAP;AACD,OALM,CAAP;AAMD,KAPM,CAAP;AAQD;AA1B0B,CAA7B;AA6BA,MAAM6V,YAAY,GAAGmP,QAAQ,CAACc,KAAT,CAAe,cAAf,EAA+BkI,kBAA/B,CAArB;AAEA3sB,MAAM,CAACC,OAAP,GAAiBuU,YAAjB,C;;;;;;;;;;;ACtEA,MAAMmP,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMwN,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAM;AAAEiV;AAAF,IAA6BjV,mBAAO,CAAC,wDAAD,CAA1C;;AAEA,MAAMmvB,kBAAkB,GAAG,IAAItJ,QAAQ,CAACE,MAAb,CAAoB;AAC7ClX,QAAM,EAAE;AACNmX,QAAI,EAAEC;AADA,GADqC;AAI7C1K,SAAO,EAAE,CAAC;AAAEyK,QAAI,EAAEC;AAAR,GAAD,CAJoC;AAK7CtT,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA;AALkC,CAApB,CAA3B;AAWA8a,kBAAkB,CAAChJ,OAAnB,GAA6B;AAC3B3C,YAAU,EAAE,UAAU0K,YAAV,EAAwB;AAClC,QAAIlrB,MAAM,GAAG,IAAI,IAAJ,CAASkrB,YAAT,CAAb;AACA,WAAOlrB,MAAM,CAAC4U,IAAP,EAAP;AACD,GAJ0B;AAK3B8L,cAAY,EAAE,UAAUnY,EAAV,EAAcsD,MAAd,EAAsB;AAClC,WAAO,KAAKwf,SAAL,CAAe;AAAE/iB,SAAG,EAAEC;AAAP,KAAf,EAA4B,EAAE,GAAGsD;AAAL,KAA5B,CAAP;AACD;AAP0B,CAA7B;AAUA,MAAMkS,YAAY,GAAG8E,QAAQ,CAACc,KAAT,CAAe,cAAf,EAA+BwI,kBAA/B,CAArB;AAEAjtB,MAAM,CAACC,OAAP,GAAiB4e,YAAjB,C;;;;;;;;;;;AC3BA,MAAMvT,MAAM,GAAGxN,mBAAO,CAAC,sBAAD,CAAtB;;AACA,MAAMovB,MAAM,GAAGpvB,mBAAO,CAAC,0BAAD,CAAtB;;AACA,MAAMulB,GAAG,GAAGvlB,mBAAO,CAAC,kCAAD,CAAnB;;AACA,MAAM6lB,QAAQ,GAAG7lB,mBAAO,CAAC,0BAAD,CAAxB;;AACA,MAAMqvB,MAAM,GAAGrvB,mBAAO,CAAC,wBAAD,CAAtB;;AACA,MAAMutB,WAAW,GAAGvtB,mBAAO,CAAC,kEAAD,CAA3B;;AACA,MAAM8tB,eAAe,GAAG9tB,mBAAO,CAAC,0EAAD,CAA/B;;AACA,MAAMusB,UAAU,GAAGvsB,mBAAO,CAAC,gEAAD,CAA1B;;AAEA,MAAMsvB,UAAU,GAAG,IAAIzJ,QAAQ,CAACE,MAAb,CAAoB;AACrCniB,MAAI,EAAE;AACJoiB,QAAI,EAAEC,MADF;AAEJyC,YAAQ,EAAE;AAFN,GAD+B;AAKrC3e,UAAQ,EAAE;AACRic,QAAI,EAAEC;AADE,GAL2B;AAQrC/U,UAAQ,EAAE;AACR8U,QAAI,EAAEC;AADE,GAR2B;AAWrCra,cAAY,EAAE;AACZoa,QAAI,EAAEC,MADM;AAEZxU,WAAO,EAAE;AAFG,GAXuB;AAerCN,WAAS,EAAE;AACT6U,QAAI,EAAEC,MADG;AAETsJ,UAAM,EAAE;AAFC,GAf0B;AAmBrCtlB,OAAK,EAAE;AACL+b,QAAI,EAAEC;AADD,GAnB8B;AAsBrCjc,WAAS,EAAE;AACTgc,QAAI,EAAEC;AADG,GAtB0B;AAyBrCjP,UAAQ,EAAE;AACRgP,QAAI,EAAEC;AADE,GAzB2B;AA4BrCpX,QAAM,EAAE;AACNmX,QAAI,EAAEC;AADA,GA5B6B;AA+BrCnX,cAAY,EAAE;AACZkX,QAAI,EAAEC;AADM,GA/BuB;AAkCrCuJ,eAAa,EAAE;AACbxJ,QAAI,EAAE8C,MADO;AAEbrX,WAAO,EAAE;AAFI,GAlCsB;AAsCrCge,mBAAiB,EAAE;AACjBzJ,QAAI,EAAE+C,OADW;AAEjBtX,WAAO,EAAE;AAFQ,GAtCkB;AA0CrCie,eAAa,EAAE;AACb1J,QAAI,EAAEE;AADO,GA1CsB;AA6CrCyJ,YAAU,EAAE;AACV3J,QAAI,EAAEE,IADI;AAEVzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFC,GA7CyB;;AAiDrC;;;;;;;AAOA5Q,UAAQ,EAAE;AACRuiB,QAAI,EAAEC,MADE;AAERxU,WAAO,EAAE;AAFD,GAxD2B;AA4DrCqF,eAAa,EAAE;AACbkP,QAAI,EAAE+C;AADO,GA5DsB;AA+DrChY,YAAU,EAAE;AACViV,QAAI,EAAEC;AADI,GA/DyB;AAkErCjV,UAAQ,EAAE;AACRgV,QAAI,EAAEC;AADE,GAlE2B;AAqErChV,SAAO,EAAE;AACP+U,QAAI,EAAEC;AADC,GArE4B;AAwErCpb,QAAM,EAAE;AACNmb,QAAI,EAAE+C,OADA;AAENtX,WAAO,EAAE;AAFH,GAxE6B;AA4ErCkB,WAAS,EAAE;AACTqT,QAAI,EAAEE,IADG;AAETzU,WAAO,EAAEjE,MAAM,CAAC6G,GAAP;AAFA,GA5E0B;AAgFrC6X,OAAK,EAAE,CACL;AACElG,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QAD9B;AAEEmT,OAAG,EAAE;AAFP,GADK,CAhF8B;AAsFrChe,QAAM,EAAE;AACNgd,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QADtB;AAENmT,OAAG,EAAE;AAFC,GAtF6B;AA0FrC4I,WAAS,EAAE,CAACrC,WAAD,CA1F0B;AA2FrCjf,YAAU,EAAE,CAACwf,eAAD,CA3FyB;AA4FrCpJ,aAAW,EAAE,CAACoE,MAAD,CA5FwB;AA6FrCxZ,WAAS,EAAE;AACT0W,QAAI,EAAEH,QAAQ,CAACE,MAAT,CAAgBjS,KAAhB,CAAsBD,QADnB;AAETmT,OAAG,EAAE;AAFI,GA7F0B;AAiGrC7Q,SAAO,EAAE;AACP6P,QAAI,EAAE+C,OADC;AAEPtX,WAAO,EAAE;AAFF,GAjG4B;AAqGrCoe,cAAY,EAAE;AACZ7J,QAAI,EAAEE;AADM,GArGuB;AAwGrC4J,eAAa,EAAE;AACb9J,QAAI,EAAEC;AADO,GAxGsB;AA2GrCzP,OAAK,EAAE,CAAC+V,UAAD;AA3G8B,CAApB,CAAnB;AA8GA;;;;AAGA,MAAMwD,UAAU,GAAGprB,OAAO,CAACC,GAAR,CAAYorB,UAA/B;;AAEA,IAAIC,WAAW,GAAG,MAAM;AACtB,MAAIC,YAAY,GACdvrB,OAAO,CAACC,GAAR,CAAYurB,SAAZ,IAAyB,IAAzB,GAAgCxrB,OAAO,CAACC,GAAR,CAAYurB,SAA5C,GAAwD,OAD1D;AAEA,SAAO3iB,MAAM,GAAG2Z,GAAT,CAAa+I,YAAb,EAA2B,SAA3B,EAAsCE,IAAtC,EAAP;AACD,CAJD;;AAMA,IAAIC,aAAa,GAAI9kB,EAAD,IAAQ;AAC1B;AACA,SAAO,EAAP;AACD,CAHD;;AAKA,IAAI+kB,cAAc,GAAI/kB,EAAD,IAAQ;AAC3B;AACA,SAAO,EAAP;AACD,CAHD;AAKA;;;;;;AAIA,IAAIglB,gBAAgB,GAAG,UAAUC,OAAV,EAAmB;AACxC,MAAIC,WAAW,GAAGjjB,MAAM,GAAG4iB,IAAT,EAAlB;AACA,SAAOI,OAAO,GAAGC,WAAjB;AACD,CAHD;;AAKAnB,UAAU,CAACoB,OAAX,GAAqB;AACnBze,kBAAgB,EAAE,UAAU0e,SAAV,EAAqB9e,WAAW,GAAG,KAAnC,EAA0C;AAC1D,QAAI;AACF,UAAI6X,KAAK,GAAG,IAAZ;;AACA,UAAIkH,IAAI,GAAGvB,MAAM,CAACwB,MAAP,CAAcF,SAAd,CAAX;AAEA,UAAIG,YAAY,GAAGjf,WAAW,GAAG6X,KAAK,CAAC9d,YAAT,GAAwB8d,KAAK,CAACxY,QAA5D;AAEA,aAAO,IAAIpQ,OAAJ,CACL,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACnB,YAAIwoB,KAAK,CAAC+F,iBAAV,EAA6B;AAC3B,cAAIsB,IAAI,GAAG,KAAK,KAAKC,gBAAL,EAAhB;AACA,cAAID,IAAI,GAAG,CAAX,EACE7vB,MAAM,CAAC;AACLsE,mBAAO,EAAE,KADJ;AAELC,mBAAO,EAAG,gEAA+DsrB,IAAK;AAFzE,WAAD,CAAN,CADF,KAME,KAAKE,qBAAL,CAA2B,IAA3B,EAAiCtwB,IAAjC,CAAuCC,GAAD,IAAS;AAC7C,iBAAKqR,gBAAL,CAAsB0e,SAAtB,EAAiChwB,IAAjC,CACGE,MAAD,IAAYE,OAAO,CAACF,MAAD,CADrB,EAEGI,GAAD,IAASC,MAAM,CAACD,GAAD,CAFjB;AAID,WALD;AAMH,SAdD,MAeEmuB,MAAM,CAAC8B,OAAP,CAAeN,IAAf,EAAqBE,YAArB,EAAmCnwB,IAAnC,CAAyC0S,KAAD,IAAW;AACjD,cAAIA,KAAJ,EAAW;AACT;AACA,iBAAK4d,qBAAL,CAA2B,IAA3B,EAAiCtwB,IAAjC,CACGC,GAAD,IAAS;AACPG,qBAAO,CAAC;AACNyE,uBAAO,EAAE,IADH;AAENC,uBAAO,EAAE;AAFH,eAAD,CAAP;AAID,aANH,EAOGxE,GAAD,IACEC,MAAM,CAAC;AAAEsE,qBAAO,EAAE,KAAX;AAAkBC,qBAAO,EAAE;AAA3B,aAAD,CARV;AAUD,WAZD,MAYO;AACL;AACA,iBAAKwrB,qBAAL,GAA6BtwB,IAA7B,CACGC,GAAD,IAAS;AACPM,oBAAM,CAAC;AACLsE,uBAAO,EAAE,KADJ;AAELC,uBAAO,EAAE;AAFJ,eAAD,CAAN;AAID,aANH,EAOGxE,GAAD,IACEC,MAAM,CAAC;AACLsE,qBAAO,EAAE,KADJ;AAELC,qBAAO,EAAE;AAFJ,aAAD,CARV;AAaD;AACF,SA7BD;AA8BH,OA/CI,EAgDJxE,GAAD,IACEC,MAAM,CAAC;AACLsE,eAAO,EAAE,KADJ;AAELC,eAAO,EAAE;AAFJ,OAAD,CAjDH,CAAP;AAsDD,KA5DD,CA4DE,OAAOghB,CAAP,EAAU;AACV,aAAO3lB,OAAO,CAACI,MAAR,CAAe;AACpBsE,eAAO,EAAE,KADW;AAEpBC,eAAO,EAAE;AAFW,OAAf,CAAP;AAID;AACF,GApEkB;AAqEnBurB,kBAAgB,EAAE,YAAY;AAC5B,QAAItB,aAAa,GAAG,KAAKA,aAAL,GAAqB,KAAKA,aAA1B,GAA0CliB,MAAM,CAAC6G,GAAP,EAA9D;AACA,QAAI8c,KAAK,GAAG3jB,MAAM,CAACkiB,aAAD,CAAlB;AACA,QAAI0B,GAAG,GAAG5jB,MAAM,CAACA,MAAM,CAAC6G,GAAP,EAAD,CAAhB;AACA,WAAO+c,GAAG,CAACC,IAAJ,CAASF,KAAT,EAAgB,SAAhB,CAAP;AACD,GA1EkB;AA2EnBF,uBAAqB,EAAE,UAAUK,KAAV,EAAiB;AACtC,QAAIA,KAAJ,EAAW;AACT,WAAK9B,aAAL,GAAqB,CAArB;AACA,WAAKC,iBAAL,GAAyB,KAAzB;AACA,WAAKC,aAAL,GAAqB,IAArB;AACD,KAJD,MAIO;AACL,UAAIF,aAAa,GAAG,KAAKA,aAAL,GAAqB,CAAzC;AACA,WAAKA,aAAL,GAAqBA,aAArB;AACA,WAAKC,iBAAL,GAAyBD,aAAa,GAAG,EAAzC;AACA,WAAKE,aAAL,GAAqBF,aAAa,GAAG,EAAhB,GAAqBhiB,MAAM,CAAC6G,GAAP,EAArB,GAAoC,IAAzD;AACD;;AACD,WAAO,IAAIvT,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,aAAO,KAAK0W,IAAL,GAAYjX,IAAZ,CACJC,GAAD,IAAS;AACPG,eAAO,CAACH,GAAD,CAAP;AACD,OAHI,EAIJK,GAAD,IAAS;AACPC,cAAM,CAACD,GAAD,CAAN;AACD,OANI,CAAP;AAQD,KATM,CAAP;AAUD,GAhGkB;AAiGnBiR,mBAAiB,EAAE,UAAUqf,OAAV,EAAmB;AACpC,QAAI5U,OAAO,GAAG;AACZpW,YAAM,EAAE,KAAK+E,GAAL,IAAYwF,SAAZ,GAAwBtK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACkf,SAAL,CAAe,KAAKpa,GAApB,CAAX,CAAxB,GAA+D,EAD3D;AAEZkmB,cAAQ,EAAG,GAAE,KAAK5tB,IAAK,IAAG,KAAKmG,QAAS,EAF5B;AAGZoH,eAAS,EAAE,KAAKA,SAHJ;AAIZnI,YAAM,EAAE,KAAKA,MAAL,IAAeuoB,OAJX;AAKZ9tB,cAAQ,EAAE,KAAKA,QALH;AAMZguB,SAAG,EAAExB,WAAW,EANJ;AAOZyB,eAAS,EAAErB,aAAa,CAAC,KAAK/kB,GAAN,CAPZ;AAQZgD,gBAAU,EAAE,KAAKA,UARL;AASZO,YAAM,EAAE,KAAKA,MATD;AAUZC,kBAAY,EAAE,KAAKA,YAVP;AAWZQ,eAAS,EAAE,KAAKA,SAXJ;AAYZ6G,aAAO,EAAE,OAAO,KAAKA,OAAZ,KAAwB,WAAxB,GAAsC,KAAtC,GAA8C,KAAKA,OAZhD,CAaZ;;AAbY,KAAd;AAeA,QAAI1O,KAAK,GAAG8d,GAAG,CAACoM,IAAJ,CAAShV,OAAT,EAAkBoT,UAAlB,CAAZ;AACA,WAAOtoB,KAAP;AACD,GAnHkB;AAoHnBmqB,aAAW,EAAE,UAAUrrB,MAAV,EAAkB2lB,KAAlB,EAAyB;AACpC,QAAI,CAACN,KAAK,CAACC,OAAN,CAAcK,KAAd,CAAL,EAA2BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAC3B,WAAO,KAAKpS,MAAL,CACL;AACExO,SAAG,EAAE/E;AADP,KADK,EAIL;AACEulB,eAAS,EAAE;AACTI,aAAK,EAAE;AACLH,eAAK,EAAEG;AADF;AADE;AADb,KAJK,EAWL;AACEF,WAAK,EAAE;AADT,KAXK,CAAP;AAeD,GArIkB;AAsInB6F,gBAAc,EAAE,UAAUxlB,KAAV,EAAiB6f,KAAjB,EAAwB;AACtC,QAAI,CAACN,KAAK,CAACC,OAAN,CAAcxf,KAAd,CAAL,EAA2BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAC3B,QAAI,CAACuf,KAAK,CAACC,OAAN,CAAcK,KAAd,CAAL,EAA2BA,KAAK,GAAG,CAACA,KAAD,CAAR;AAE3B,WAAO,KAAKpS,MAAL,CACL;AACExO,SAAG,EAAE;AACHkc,WAAG,EAAEnb;AADF;AADP,KADK,EAML;AACE8f,cAAQ,EAAE;AACRD,aAAK,EAAEA;AADC;AADZ,KANK,EAWL;AACEF,WAAK,EAAE;AADT,KAXK,CAAP;AAeD,GAzJkB;AA0JnB8F,cAAY,EAAE,UAAUvrB,MAAV,EAAkB;AAC9B,WAAO,IAAIzF,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKif,IAAL,CAAU;AACR7U,WAAG,EAAE/E;AADG,OAAV,EAGG8lB,QAHH,CAGY,OAHZ,EAIG9F,IAJH,CAIQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACTF,eAAO,CAACgxB,cAAc,CAAClxB,MAAD,EAAS,OAAT,CAAf,CAAP;AACD,OAPH;AAQD,KATM,CAAP;AAUD;AArKkB,CAArB;;AAwKA,MAAMmxB,iBAAiB,GAAG,CAACC,WAAD,EAAcC,OAAd,KAA0B;AAClD,MAAIC,UAAU,GAAGF,WAAW,CAACjnB,GAAZ,CAAgB,CAAC+S,IAAD,EAAO8G,CAAP,KAAa;AAC5C,QAAIuN,MAAM,GAAG;AACXxuB,UAAI,EAAEma,IAAI,CAACna,IADA;AAEX4pB,aAAO,EAAEzP,IAAI,CAACyP,OAFH;AAGXjkB,aAAO,EAAEwU,IAAI,CAACxU,OAHH;AAIXkF,eAAS,EAAEsP,IAAI,CAACtP,SAJL;AAKXof,WAAK,EAAE9P,IAAI,CAAC8P,KAAL,IAAc;AALV,KAAb;AAOAqE,WAAO,CAACvpB,OAAR,CAAiB0pB,EAAD,IAAQ;AACtB,UAAItU,IAAI,CAACna,IAAL,KAAcyuB,EAAE,CAACzuB,IAArB,EAA2B;AACzBwuB,cAAM,GAAG/wB,MAAM,CAAC+wB,MAAP,CACP,EADO,EAEP;AACExuB,cAAI,EAAEma,IAAI,CAACna,IADb;AAEE4pB,iBAAO,EAAEzP,IAAI,CAACyP,OAFhB;AAGEjkB,iBAAO,EAAEwU,IAAI,CAACxU,OAHhB;AAIEkF,mBAAS,EAAEsP,IAAI,CAACtP,SAJlB;AAKEof,eAAK,EAAE9P,IAAI,CAAC8P,KAAL,IAAc,IAAI,CAL3B,CAK8B;;AAL9B,SAFO,EASPwE,EATO,CAAT;AAWD;AACF,KAdD;AAeA,WAAO,EAAE,GAAGD;AAAL,KAAP;AACD,GAxBgB,CAAjB;AA0BA,MAAI1nB,GAAG,GAAG,EAAV;AACAwnB,SAAO,CAACvpB,OAAR,CAAiBoV,IAAD,IAAU;AACxB,QAAIoJ,GAAG,GAAG,IAAV;AACAgL,cAAU,CAACxpB,OAAX,CAAoB2pB,EAAD,IAAQ;AACzB,UAAIvU,IAAI,CAACna,IAAL,CAAUiU,IAAV,OAAqBya,EAAE,CAAC1uB,IAAH,CAAQiU,IAAR,EAAzB,EAAyCsP,GAAG,GAAG,KAAN;AAC1C,KAFD;AAGA,QAAIA,GAAJ,EAASzc,GAAG,CAAC9B,IAAJ,CAASmV,IAAT;AACV,GAND;AAQA,MAAIwU,KAAK,GAAG,CAAC,GAAGJ,UAAJ,EAAgB,GAAGznB,GAAnB,EAAwB6T,IAAxB,CAA6B,CAACxI,CAAD,EAAIyI,CAAJ,KAAUA,CAAC,CAACqP,KAAF,GAAU9X,CAAC,CAAC8X,KAAnD,CAAZ;AACA,SAAO0E,KAAK,CAACC,KAAN,CAAY,CAAZ,EAAeD,KAAK,CAAChxB,MAAN,IAAgB,EAAhB,GAAqBgxB,KAAK,CAAChxB,MAA3B,GAAoC,EAAnD,CAAP,CArCkD,CAqCa;AAChE,CAtCD;;AAwCA,MAAMkxB,eAAe,GAAG,CAACC,iBAAD,EAAoBC,YAApB,KAAqC;AAC3D,MAAI1T,MAAM,GAAGyT,iBAAiB,CAAC1nB,GAAlB,CAAuBuD,CAAD,IACjCA,CAAC,CAAC9G,KAAF,KAAYkrB,YAAY,CAAClrB,KAAzB,GAAiC,EAAE,GAAGkrB;AAAL,GAAjC,GAAuD,EAAE,GAAGpkB,CAAC,CAACuE;AAAP,GAD5C,CAAb;AAIA,MAAI8f,MAAM,GAAG3T,MAAM,CAACxP,MAAP,CAAelB,CAAD,IAAOA,CAAC,CAAC9G,KAAF,KAAYkrB,YAAY,CAAClrB,KAA9C,CAAb;AACA,SAAOmrB,MAAM,CAACrxB,MAAP,GAAgB,CAAhB,GAAoB,CAAC,GAAG0d,MAAJ,CAApB,GAAkC,CAAC,GAAGA,MAAJ,EAAY0T,YAAZ,CAAzC;AACD,CAPD;;AASA,MAAME,mBAAmB,GAAIC,MAAD,IAAY;AACtC,MAAIzmB,KAAK,GAAGymB,MAAM,CAAC9nB,GAAP,CAAYmE,CAAD,IAAO;AAC5B,QAAI;AAAE7D,SAAF;AAAO1H,UAAP;AAAamG,cAAb;AAAuB8E,YAAvB;AAA+BC,kBAA/B;AAA6CjE,YAA7C;AAAqDyD;AAArD,QACFa,CAAC,CAAC2D,IADJ;AAEA,WAAO;AAAExH,SAAF;AAAO1H,UAAP;AAAamG,cAAb;AAAuB8E,YAAvB;AAA+BC,kBAA/B;AAA6CjE,YAA7C;AAAqDyD;AAArD,KAAP;AACD,GAJW,CAAZ;AAKA,SAAOjC,KAAP;AACD,CAPD;;AASAijB,UAAU,CAACnJ,OAAX,GAAqB;AACnB;;;AAGArU,UAAQ,EAAE,UAAUihB,UAAV,EAAsB;AAC9B,WAAO,IAAIjyB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXwI,YAAI,EAAE,CACJ;AACE/d,mBAAS,EAAE4hB;AADb,SADI,EAIJ;AAAEloB,gBAAM,EAAE;AAAV,SAJI;AADK,OAAb;AAOG;;;;;;;AAPH,OAcG0b,IAdH,CAcQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OAnBH;AAoBD,KArBM,CAAP;AAsBD,GA3BkB;AA4BnBgS,qBAAmB,EAAE,UAAUmgB,WAAV,EAAuB;AAC1C,WAAO,IAAIlyB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACX3V,kBAAU,EAAEiiB;AADD,OAAb,EAEGzM,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OAPD;AAQD,KATM,CAAP;AAUD,GAvCkB;AAwCnBmS,mBAAiB,EAAE,UAAUigB,SAAV,EAAqB;AACtC,WAAO,IAAInyB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACX1V,gBAAQ,EAAEiiB;AADC,OAAb,EAEG1M,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OAPD;AAQD,KATM,CAAP;AAUD,GAnDkB;AAoDnBqS,kBAAgB,EAAE,UAAUggB,QAAV,EAAoB;AACpC,WAAO,IAAIpyB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXzV,eAAO,EAAEiiB;AADE,OAAb,EAEG3M,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OAPD;AAQD,KATM,CAAP;AAUD,GA/DkB;AAgEnBuX,aAAW,EAAE,UAAU7R,MAAV,EAAkB;AAC7B,WAAO,IAAIzF,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EAA8BggB,IAA9B,CAAmC,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AAClD,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAM,CAAC+uB,SAAR,CAAP;AACD;AACF,OALD;AAMD,KAPM,CAAP;AAQD,GAzEkB;AA0EnBrX,aAAW,EAAE,UAAUhS,MAAV,EAAkBiS,IAAlB,EAAwB;AACnC,WAAO,IAAI1X,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EAA8BggB,IAA9B,CAAmC,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AAClD,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACT,YAAI,CAACJ,MAAL,EAAaK,MAAM,CAAC;AAAEuE,iBAAO,EAAE;AAAX,SAAD,CAAN;AACb,YAAI0tB,UAAU,GAAGnB,iBAAiB,CAACnxB,MAAM,CAAC+uB,SAAP,IAAoB,EAArB,EAAyBpX,IAAzB,CAAlC;AACA,aAAK4a,gBAAL,CACE;AAAE9nB,aAAG,EAAE/E;AAAP,SADF,EAEE;AAAE6iB,cAAI,EAAE;AAAEwG,qBAAS,EAAEuD;AAAb;AAAR,SAFF,EAGE;AAAEE,aAAG,EAAE;AAAP,SAHF,EAIE,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,cAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,mBAAO,CAACoyB,UAAD,CAAP;AACD;AACF,SATH;AAWApyB,eAAO,CAACF,MAAD,CAAP;AACD,OAhBD;AAiBD,KAlBM,CAAP;AAmBD,GA9FkB;AA+FnB6X,gBAAc,EAAE,UAAUnS,MAAV,EAAkBiS,IAAlB,EAAwB;AACtC,WAAO,IAAI1X,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EAA8BggB,IAA9B,CAAmC,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AAClD,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACT,YAAI,CAACJ,MAAL,EAAaK,MAAM,CAAC;AAAEuE,iBAAO,EAAE;AAAX,SAAD,CAAN;AACb,YAAI6tB,UAAU,GAAG,CAACzyB,MAAM,CAAC+uB,SAAP,IAAoB,EAArB,EAAyBngB,MAAzB,CAAiCsO,IAAD,IAAU;AACzD,cAAI6U,MAAM,GAAGpa,IAAI,CAAC/I,MAAL,CAAa8jB,CAAD,IAAOA,CAAC,CAAC3vB,IAAF,CAAOiU,IAAP,OAAkBkG,IAAI,CAACna,IAAL,CAAUiU,IAAV,EAArC,CAAb;AACA,iBAAO+a,MAAM,CAACrxB,MAAP,KAAkB,CAAzB;AACD,SAHgB,CAAjB;AAKA,aAAK6xB,gBAAL,CACE;AAAE9nB,aAAG,EAAE/E;AAAP,SADF,EAEE;AAAE6iB,cAAI,EAAE;AAAEwG,qBAAS,EAAE0D;AAAb;AAAR,SAFF,EAGE;AAAED,aAAG,EAAE;AAAP,SAHF,EAIE,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,cAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,mBAAO,CAACuyB,UAAD,CAAP;AACD;AACF,SATH;AAWAvyB,eAAO,CAACF,MAAD,CAAP;AACD,OApBD;AAqBD,KAtBM,CAAP;AAuBD,GAvHkB;AAwHnB+X,kBAAgB,EAAE,UAAUrS,MAAV,EAAkBqK,SAAlB,EAA6B;AAC7C,WAAO,IAAI9P,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EAA8BggB,IAA9B,CAAmC,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AAClD,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACT,YAAI,CAACJ,MAAL,EAAaK,MAAM,CAAC;AAAEuE,iBAAO,EAAE;AAAX,SAAD,CAAN;AACb,YAAI+tB,gBAAgB,GAAGf,eAAe,CAAC5xB,MAAM,CAACyN,UAAR,EAAoB;AACxD7G,eAAK,EAAEmJ;AADiD,SAApB,CAAtC;AAGA,aAAKwiB,gBAAL,CACE;AAAE9nB,aAAG,EAAE/E;AAAP,SADF,EAEE;AAAE6iB,cAAI,EAAE;AAAE9a,sBAAU,EAAEklB;AAAd;AAAR,SAFF,EAGE;AAAEH,aAAG,EAAE;AAAP,SAHF,EAIE,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,cAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,mBAAO,CAACyyB,gBAAD,CAAP;AACD;AACF,SATH;AAWD,OAjBD;AAkBD,KAnBM,CAAP;AAoBD,GA7IkB;AA8InBnoB,YAAU,EAAE,UAAUooB,OAAV,EAAmB;AAC7B,WAAO,KAAKpF,SAAL,CACL;AACE/iB,SAAG,EAAEmoB,OAAO,CAACnoB;AADf,KADK,EAIL;AACE8d,UAAI,EAAE;AACJxlB,YAAI,EAAE6vB,OAAO,CAAC7vB,IADV;AAEJmG,gBAAQ,EAAE0pB,OAAO,CAAC1pB,QAFd;AAGJmH,gBAAQ,EAAEuiB,OAAO,CAACviB,QAHd;AAIJjH,aAAK,EAAEwpB,OAAO,CAACxpB,KAJX;AAKJD,iBAAS,EAAEypB,OAAO,CAACzpB,SALf;AAMJa,cAAM,EAAE4oB,OAAO,CAAC5oB,MANZ;AAOJpH,gBAAQ,EAAEgwB,OAAO,CAAChwB,QAPd;AAQJkP,iBAAS,EAAEnF,MAAM,CAAC6G,GAAP,EARP;AASJ/E,iBAAS,EAAEmkB,OAAO,CAACnkB;AATf;AADR,KAJK,CAAP;AAkBD,GAjKkB;AAkKnBwJ,gBAAc,EAAE,UAAUvS,MAAV,EAAkB;AAChC,WAAO,KAAK2gB,SAAL,CAAe;AAAE5b,SAAG,EAAE/E;AAAP,KAAf,CAAP;AACD,GApKkB;AAqKnBsQ,UAAQ,EAAE,UAAU4c,OAAV,EAAmB;AAC3B,QAAI1qB,IAAI,GAAG,IAAI,IAAJ,CAAS0qB,OAAT,CAAX;AACA,WAAO1qB,IAAI,CAAC6O,IAAL,EAAP;AACD,GAxKkB;AAyKnBtR,mBAAiB,EAAE,UAAUC,MAAV,EAAkByQ,QAAlB,EAA4B;AAC7C,WAAO,KAAKqX,SAAL,CAAe;AAAE/iB,SAAG,EAAE/E;AAAP,KAAf,EAAgC;AAAE6iB,UAAI,EAAE;AAAEpS,gBAAQ,EAAEA;AAAZ;AAAR,KAAhC,CAAP;AACD,GA3KkB;AA4KnB+C,gBAAc,EAAE,UAAUxT,MAAV,EAAkB9C,QAAlB,EAA4B;AAC1C,WAAO,KAAK4qB,SAAL,CAAe;AAAE/iB,SAAG,EAAE/E;AAAP,KAAf,EAAgC;AAAE6iB,UAAI,EAAE;AAAE3lB,gBAAQ,EAAEA;AAAZ;AAAR,KAAhC,CAAP;AACD,GA9KkB;AA+KnBuW,mBAAiB,EAAE,UAAUzT,MAAV,EAAkB0T,OAAlB,EAA2B;AAC5C,WAAO,KAAKoU,SAAL,CAAe;AAAE/iB,SAAG,EAAE/E;AAAP,KAAf,EAAgC;AAAE6iB,UAAI,EAAE;AAAEve,cAAM,EAAEoP;AAAV;AAAR,KAAhC,CAAP;AACD,GAjLkB;AAkLnB5D,eAAa,EAAE,UAAU9P,MAAV,EAAkB4P,OAAlB,EAA2B;AACxC,WAAO,KAAKkY,SAAL,CAAe;AAAE/iB,SAAG,EAAE/E;AAAP,KAAf,EAAgC;AAAE6iB,UAAI,EAAE;AAAEjT,eAAO,EAAEA;AAAX;AAAR,KAAhC,CAAP;AACD,GApLkB;AAqLnBiE,aAAW,EAAE,UAAU7T,MAAV,EAAkBmtB,IAAlB,EAAwB;AACnC,WAAO,IAAI5yB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EAA8BggB,IAA9B,CAAmC,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AAClD,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK,IAAI,CAACJ,MAAL,EAAaK,MAAM,CAAC;AAAEuE,iBAAO,EAAE;AAAX,SAAD,CAAN,CAAb,KACA;AACH,cAAIkuB,YAAY,GAAG9yB,MAAM,CAAC2V,KAAP,IAAgB,EAAnC;AACA,cAAIod,WAAW,GAAGD,YAAY,CAACpd,IAAb,CAAmBwH,IAAD,IAAUA,IAAI,CAAC1D,IAAL,KAAcqZ,IAA1C,IACdC,YADc,GAEd,CAAC,GAAGA,YAAJ,EAAkB;AAAEtZ,gBAAI,EAAEqZ;AAAR,WAAlB,CAFJ;AAIA,eAAKN,gBAAL,CACE;AAAE9nB,eAAG,EAAE/E;AAAP,WADF,EAEE;AAAE6iB,gBAAI,EAAE;AAAE5S,mBAAK,EAAE,CAAC,GAAGod,WAAJ;AAAT;AAAR,WAFF,EAGE;AAAEP,eAAG,EAAE;AAAP,WAHF,EAIE,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,gBAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,qBAAO,CAAC;AAAEwF,sBAAM,EAAEwC,IAAI,CAACuC,GAAf;AAAoBkL,qBAAK,EAAEzN,IAAI,CAACyN;AAAhC,eAAD,CAAP;AACD;AACF,WATH;AAWD;AACF,OArBD;AAsBD,KAvBM,CAAP;AAwBD,GA9MkB;AA+MnB8D,gBAAc,EAAE,UAAU/T,MAAV,EAAkBmtB,IAAlB,EAAwB;AACtC,WAAO,IAAI5yB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EAA8BggB,IAA9B,CAAmC,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AAClD,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK,IAAI,CAACJ,MAAL,EAAaK,MAAM,CAAC;AAAEuE,iBAAO,EAAE;AAAX,SAAD,CAAN,CAAb,KACA;AACH,cAAIkuB,YAAY,GAAG9yB,MAAM,CAAC2V,KAAP,IAAgB,EAAnC;AACA,cAAIqd,aAAa,GAAGF,YAAY,CAAClkB,MAAb,CAAqBsO,IAAD,IAAUA,IAAI,CAAC1D,IAAL,KAAcqZ,IAA5C,CAApB;AAEA,eAAKN,gBAAL,CACE;AAAE9nB,eAAG,EAAE/E;AAAP,WADF,EAEE;AAAE6iB,gBAAI,EAAE;AAAE5S,mBAAK,EAAE,CAAC,GAAGqd,aAAJ;AAAT;AAAR,WAFF,EAGE;AAAER,eAAG,EAAE;AAAP,WAHF,EAIE,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,gBAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,qBAAO,CAAC;AAAEwF,sBAAM,EAAEwC,IAAI,CAACuC,GAAf;AAAoBkL,qBAAK,EAAEzN,IAAI,CAACyN;AAAhC,eAAD,CAAP;AACD;AACF,WATH;AAWD;AACF,OAnBD;AAoBD,KArBM,CAAP;AAsBD,GAtOkB;;AAuOnB;;;AAGArD,cAAY,EAAE,UAAU2gB,MAAV,EAAkB;AAC9B,WAAO,IAAIhzB,OAAJ,CAAY,UAAUC,OAAV,EAAmBG,MAAnB,EAA2B;AAC5C,UAAIkS,OAAO,GAAG,KAAd;;AACA,UAAI;AACFmS,WAAG,CAACwO,MAAJ,CAAWD,MAAX,EAAmB/D,UAAnB,EAA+B,UAAU9uB,GAAV,EAAe+yB,OAAf,EAAwB;AACrD,cAAIA,OAAJ,EAAa;AACX,gBAAIzD,gBAAgB,CAACyD,OAAO,CAACvC,GAAT,CAApB,EAAmC;AACjCre,qBAAO,GAAG,IAAV;AACD;AACF;;AACDrS,iBAAO,CAACqS,OAAD,CAAP;AACD,SAPD;AAQD,OATD,CASE,OAAOnS,GAAP,EAAY;AACZyB,eAAO,CAACuD,GAAR,CAAYhF,GAAZ;AACAC,cAAM,CAAC,KAAD,CAAN;AACD;AACF,KAfM,CAAP;AAgBD,GA3PkB;;AA4PnB;;;;AAIAwb,iBAAe,EAAE,UAAUoX,MAAV,EAAkB;AACjC,WAAO,IAAIhzB,OAAJ,CAAY,UAAUC,OAAV,EAAmBG,MAAnB,EAA2B;AAC5C,UAAI;AACFqkB,WAAG,CAACwO,MAAJ,CAAWD,MAAX,EAAmB/D,UAAnB,EAA+B,UAAU9uB,GAAV,EAAe+yB,OAAf,EAAwB;AACrDjzB,iBAAO,CAACizB,OAAD,CAAP;AACD,SAFD;AAGD,OAJD,CAIE,OAAO/yB,GAAP,EAAY;AACZC,cAAM,CAACD,GAAD,CAAN;AACD;AACF,KARM,CAAP;AASD,GA1QkB;AA2QnB+iB,iBAAe,EAAE,UAAU2M,SAAV,EAAqB;AACpC,WAAO,IAAI7vB,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,UAAI0vB,IAAI,GAAGvB,MAAM,CAACwB,MAAP,CAAcF,SAAd,CAAX;AACA,UAAIsD,UAAU,GAAG,EAAjB;AACA7E,YAAM,CAAC8E,OAAP,CAAeD,UAAf,EAA2B,CAAChzB,GAAD,EAAMkzB,IAAN,KAAe;AACxC/E,cAAM,CAACjL,IAAP,CAAYyM,IAAZ,EAAkBuD,IAAlB,EAAwB,CAAClzB,GAAD,EAAMkjB,IAAN,KAAe;AACrC,cAAI,CAACljB,GAAL,EAAUF,OAAO,CAAC;AAAEojB;AAAF,WAAD,CAAP,CAAV,KACKjjB,MAAM,CAACD,GAAD,CAAN;AACN,SAHD;AAID,OALD;AAMD,KATM,CAAP;AAUD,GAtRkB;AAuRnBkX,aAAW,EAAE,UAAU5M,EAAV,EAAc;AACzB,WAAO,IAAIzK,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAEC;AADM,OAAb,EAGG8gB,QAHH,CAGY,QAHZ,EAGsB,MAHtB,EAIG9F,IAJH,CAIQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OATH;AAUD,KAXM,CAAP;AAYD,GApSkB;AAqSnBuM,iBAAe,EAAE,UAAU7B,EAAV,EAAc;AAC7B,WAAO,IAAIzK,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAEC;AADM,OAAb,EAGG8gB,QAHH,CAGY,QAHZ,EAGsB,MAHtB,EAIG/F,IAJH,GAKGC,IALH,CAKQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OAVH;AAWD,KAZM,CAAP;AAaD,GAnTkB;AAoTnB0M,kBAAgB,EAAE,UAAUrI,QAAV,EAAoB;AACpC,WAAO,IAAIpE,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKif,IAAL,CAAU;AAAEnX,cAAM,EAAE9D;AAAV,OAAV,EACGohB,IADH,GAEG8N,MAFH,CAEU;AACN9oB,WAAG,EAAE,CADC;AAEN1H,YAAI,EAAE,CAFA;AAGNmG,gBAAQ,EAAE,CAHJ;AAIN8E,cAAM,EAAE,CAJF;AAKNC,oBAAY,EAAE,CALR;AAMNqH,eAAO,EAAE,CANH;AAONtL,cAAM,EAAE,CAPF;AAQNpH,gBAAQ,EAAE,CARJ;AASNsN,kBAAU,EAAE,CATN;AAUNE,eAAO,EAAE,CAVH;AAWND,gBAAQ,EAAE,EAXJ;AAYN/G,aAAK,EAAE,EAZD;AAaNkH,iBAAS,EAAE,EAbL;AAcN7B,iBAAS,EAAE,EAdL;AAeNkH,aAAK,EAAE,EAfD;AAgBNlI,kBAAU,EAAE;AAhBN,OAFV,EAoBGiY,IApBH,CAoBQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAACF,MAAD,CAAP;AACD;AACF,OAzBH;AA0BD,KA3BM,CAAP;AA4BD,GAjVkB;AAkVnBoU,wBAAsB,EAAE,UAAU/P,QAAV,EAAoB2J,MAApB,EAA4B;AAClD,WAAO,IAAI/N,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKif,IAAL,CAAU;AAAE+O,YAAI,EAAE,CAAC;AAAElmB,gBAAM,EAAE9D;AAAV,SAAD,EAAuB;AAAE2J,gBAAM,EAAEA;AAAV,SAAvB;AAAR,OAAV,EAAgE0X,IAAhE,CACE,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACf,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAAC8xB,mBAAmB,CAAChyB,MAAD,CAApB,CAAP;AACD;AACF,OANH;AAQD,KATM,CAAP;AAUD,GA7VkB;AA8VnBgY,mBAAiB,EAAE,UAAU3T,QAAV,EAAoBoK,SAApB,EAA+B;AAChD,WAAO,IAAIxO,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKif,IAAL,CAAU;AACR+O,YAAI,EAAE,CAAC;AAAElmB,gBAAM,EAAE9D;AAAV,SAAD,EAAuB;AAAEoK,mBAAS,EAAEA;AAAb,SAAvB;AADE,OAAV,EAEGiX,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,iBAAO,CAAC8xB,mBAAmB,CAAChyB,MAAD,CAApB,CAAP;AACD;AACF,OAPD;AAQD,KATM,CAAP;AAUD,GAzWkB;AA0WnBokB,iBAAe,EAAE,UAAU1e,MAAV,EAAkBsT,YAAlB,EAAgC;AAC/C,WAAO,IAAI/Y,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EACG+f,IADH,GAEGC,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN;AACT,YAAIsjB,KAAK,GAAG1jB,MAAM,CAAC6jB,WAAP,IAAsB,EAAlC;AACAH,aAAK,GAAG,CAAC,GAAGA,KAAJ,EAAW1K,YAAX,CAAR;AACA,aAAKuZ,gBAAL,CACE;AAAE9nB,aAAG,EAAE/E;AAAP,SADF,EAEE;AAAE6iB,cAAI,EAAE;AAAE1E,uBAAW,EAAEH;AAAf;AAAR,SAFF,EAGE;AAAE8O,aAAG,EAAE;AAAP,SAHF,EAIE,UAAUpyB,GAAV,EAAeozB,KAAf,EAAsB;AACpB,cAAIpzB,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,mBAAO,CAAC;AAAEgkB,oBAAM,EAAE,IAAV;AAAgBlL,0BAAY,EAAE0K;AAA9B,aAAD,CAAP;AACD;AACF,SATH;AAWD,OAjBH;AAkBD,KAnBM,CAAP;AAoBD,GA/XkB;AAgYnBrL,gBAAc,EAAE,UAAUnQ,IAAV,EAAgBmI,QAAhB,EAA0B;AACxC,WAAO,IAAIpQ,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXvV,iBAAS,EAAEpI;AADA,OAAb,EAEGwd,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK,IACH,CAACJ,MAAD,IACAA,MAAM,CAAC+K,YAAP,IAAuB,EADvB,IAEA/K,MAAM,CAAC+K,YAAP,IAAuB,IAHpB,EAIH;AACA7K,iBAAO,CAAC,KAAD,CAAP;AACD,SANI,MAME;AACLquB,gBAAM,CAAC8B,OAAP,CAAehgB,QAAf,EAAyBrQ,MAAM,CAAC+K,YAAhC,EAA8CjL,IAA9C,CAAoD0S,KAAD,IAAW;AAC5D,gBAAIA,KAAJ,EAAW;AACTtS,qBAAO,CAAC,IAAD,CAAP;AACD,aAFD,MAEO;AACLA,qBAAO,CAAC,KAAD,CAAP;AACD;AACF,WAND;AAOD;AACF,OAnBD;AAoBD,KArBM,CAAP;AAsBD,GAvZkB;AAwZnBuY,gBAAc,EAAE,UAAU/S,MAAV,EAAkB2K,QAAlB,EAA4BtF,YAA5B,EAA0C;AACxD,WAAO,IAAI9K,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXpb,WAAG,EAAE/E;AADM,OAAb,EAEGggB,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK,IAAIJ,MAAM,CAAC+K,YAAP,IAAuB,EAA3B,EAA+B;AAClC7K,iBAAO,CAAC,KAAD,CAAP;AACD,SAFI,MAEE;AACLquB,gBAAM,CAAC8B,OAAP,CAAetlB,YAAf,EAA6B/K,MAAM,CAAC+K,YAApC,EAAkDjL,IAAlD,CAAwD0S,KAAD,IAAW;AAChE,gBAAIA,KAAJ,EAAW;AACT,kBAAIihB,YAAY,GAAG,EAAnB;AAEA,mBAAKtQ,eAAL,CAAqBqL,MAAM,CAACkF,MAAP,CAAcrjB,QAAd,CAArB,EAA8CvQ,IAA9C,CACGsjB,UAAD,IAAgB;AACdqQ,4BAAY,GAAGrQ,UAAU,CAACE,IAA1B;AAEA,qBAAKiP,gBAAL,CACE;AAAE9nB,qBAAG,EAAE/E;AAAP,iBADF,EAEE;AAAE6iB,sBAAI,EAAE;AAAExd,gCAAY,EAAE,IAAhB;AAAsBsF,4BAAQ,EAAEojB;AAAhC;AAAR,iBAFF,EAGE;AAAEjB,qBAAG,EAAE;AAAP,iBAHF,EAIE,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,sBAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,2BAAO,CAAC;AACNyE,6BAAO,EAAE,IADH;AAENC,6BAAO,EACL;AAHI,qBAAD,CAAP;AAKD;AACF,iBAbH;AAeD,eAnBH;AAqBD,aAxBD,MAwBO;AACLvE,oBAAM,CAAC;AACLsE,uBAAO,EAAE,KADJ;AAELC,uBAAO,EAAE;AAFJ,eAAD,CAAN;AAID;AACF,WA/BD;AAgCD;AACF,OAxCD;AAyCD,KA1CM,CAAP;AA2CD,GApckB;AAqcnB4R,oBAAkB,EAAE,UAAUpN,KAAV,EAAiB;AACnC,WAAO,IAAInJ,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AACXzc,aAAK,EAAEA;AADI,OAAb,EAEGsc,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACvB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK,IAAI,CAACJ,MAAL,EAAa;AAChBK,gBAAM,CAAC;AACLuE,mBAAO,EAAE;AADJ,WAAD,CAAN;AAGD,SAJI,MAIE;AACL,cAAImG,YAAY,GACd0W,IAAI,CAACC,MAAL,GAAc5gB,QAAd,CAAuB,EAAvB,EAA2ByF,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,EAA2Cob,WAA3C,KACAF,IAAI,CAACC,MAAL,GAAc5gB,QAAd,CAAuB,EAAvB,EAA2ByF,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,EAA2Cob,WAA3C,EAFF;AAIA,cAAIgS,gBAAgB,GAAG,EAAvB;AAEA,eAAKxQ,eAAL,CAAqBqL,MAAM,CAACkF,MAAP,CAAc3oB,YAAd,CAArB,EAAkDjL,IAAlD,CACGsjB,UAAD,IAAgB;AACduQ,4BAAgB,GAAGvQ,UAAU,CAACE,IAA9B;AAEA,iBAAKiP,gBAAL,CACE;AACEnpB,mBAAK,EAAEA;AADT,aADF,EAIE;AACEmf,kBAAI,EAAE;AACJxd,4BAAY,EAAE4oB;AADV;AADR,aAJF,EASE;AACEnB,iBAAG,EAAE;AADP,aATF,EAYE,UAAUpyB,GAAV,EAAe;AACb,kBAAIA,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,uBAAO,CAAC6K,YAAD,CAAP;AACD;AACF,aAjBH;AAmBA7K,mBAAO,CAAC6K,YAAD,CAAP;AACD,WAxBH;AA0BD;AACF,OA1CD;AA2CD,KA5CM,CAAP;AA6CD,GAnfkB;AAofnByB,eAAa,EAAE,UAAUnI,QAAV,EAAoB;AACjC,WAAO,KAAKib,IAAL,CAAU;AAAEnX,YAAM,EAAE9D,QAAV;AAAoBzB,cAAQ,EAAE;AAA9B,KAAV,EAAyD6iB,IAAzD,EAAP;AACD,GAtfkB;;AAufnBpM,oBAAkB,CAAC3T,MAAD,EAAS;AACzB,WAAO,IAAIzF,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EACG+f,IADH,GAEGC,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAG,IAAI,CAACJ,MAAZ,EAAoBK,MAAM,CAACD,GAAG,IAAI,gBAAR,CAAN,CAApB,KACK;AACHF,iBAAO,CAAC;AACNoZ,qBAAS,EACP,OAAOtZ,MAAM,CAACsV,OAAd,KAA0B,WAA1B,GAAwC,KAAxC,GAAgDtV,MAAM,CAACsV;AAFnD,WAAD,CAAP;AAID;AACF,OAVH;AAWD,KAZM,CAAP;AAaD,GArgBkB;;AAsgBnBsD,uBAAqB,EAAE,UAAUlT,MAAV,EAAkB2K,QAAlB,EAA4ByI,WAA5B,EAAyC;AAC9D,WAAO,IAAI7Y,OAAJ,CAAY,CAACC,OAAD,EAAUG,MAAV,KAAqB;AACtC,WAAKwlB,OAAL,CAAa;AAAEpb,WAAG,EAAE/E;AAAP,OAAb,EACG+f,IADH,GAEGC,IAFH,CAEQ,CAACtlB,GAAD,EAAMJ,MAAN,KAAiB;AACrB,YAAII,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHmuB,gBAAM,CAAC8B,OAAP,CAAehgB,QAAf,EAAyBrQ,MAAM,CAACqQ,QAAhC,EAA0CvQ,IAA1C,CAAgD0S,KAAD,IAAW;AACxD,gBAAIA,KAAJ,EAAW;AACT,mBAAK2Q,eAAL,CAAqBqL,MAAM,CAACkF,MAAP,CAAc5a,WAAd,CAArB,EACGhZ,IADH,CACSsjB,UAAD,IAAgB;AACpB,qBAAKmP,gBAAL,CACE;AAAE9nB,qBAAG,EAAE/E;AAAP,iBADF,EAEE;AACE6iB,sBAAI,EAAE;AAAExd,gCAAY,EAAE,IAAhB;AAAsBsF,4BAAQ,EAAE+S,UAAU,CAACE;AAA3C;AADR,iBAFF,EAKE;AAAEkP,qBAAG,EAAE;AAAP,iBALF,EAME,UAAUpyB,GAAV,EAAe8H,IAAf,EAAqB;AACnB,sBAAI9H,GAAJ,EAASC,MAAM,CAACD,GAAD,CAAN,CAAT,KACK;AACHF,2BAAO,CAAC;AACNyE,6BAAO,EAAE,IADH;AAENC,6BAAO,EACL;AAHI,qBAAD,CAAP;AAKD;AACF,iBAfH;AAiBD,eAnBH,EAoBGzE,KApBH,CAoBUC,GAAD,IAAS;AACdC,sBAAM,CAAC;AACLsE,yBAAO,EAAE,KADJ;AAELC,yBAAO,EAAE;AAFJ,iBAAD,CAAN;AAID,eAzBH;AA0BD,aA3BD,MA2BO;AACLvE,oBAAM,CAAC;AACLsE,uBAAO,EAAE,KADJ;AAELC,uBAAO,EAAE;AAFJ,eAAD,CAAN;AAID;AACF,WAlCD;AAmCD;AACF,OAzCH;AA0CD,KA3CM,CAAP;AA4CD;AAnjBkB,CAArB;AAsjBA,MAAMI,IAAI,GAAGggB,QAAQ,CAACc,KAAT,CAAe,MAAf,EAAuB2I,UAAvB,CAAb;AAEAptB,MAAM,CAACC,OAAP,GAAiB0D,IAAjB,C;;;;;;;;;;;AC/6BA,MAAM3C,MAAM,GAAGlD,mBAAO,CAAC,wBAAD,CAAP,CAAmBy0B,MAAnB,EAAf;;AAEA,MAAMC,QAAQ,GAAG10B,mBAAO,CAAC,8DAAD,CAAxB;;AAEA,MAAM2D,KAAK,GAAG3D,mBAAO,CAAC,wDAAD,CAArB;;AAEA,MAAM20B,WAAW,GAAG30B,mBAAO,CAAC,oEAAD,CAA3B;;AAEA,MAAM40B,MAAM,GAAG50B,mBAAO,CAAC,0DAAD,CAAtB;;AAEA,MAAM60B,WAAW,GAAG70B,mBAAO,CAAC,kEAAD,CAA3B;;AAEA,MAAM80B,MAAM,GAAG90B,mBAAO,CAAC,sBAAD,CAAtB;;AAEA,MAAMgJ,MAAM,GAAGhJ,mBAAO,CAAC,0DAAD,CAAtB;;AAEA,MAAM+0B,gBAAgB,GAAG/0B,mBAAO,CAAC,8EAAD,CAAhC;;AAEA,MAAMg1B,SAAS,GAAGh1B,mBAAO,CAAC,gEAAD,CAAzB;;AAEA,MAAMi1B,MAAM,GAAGj1B,mBAAO,CAAC,0DAAD,CAAtB;;AAEA,MAAMogB,YAAY,GAAGpgB,mBAAO,CAAC,sEAAD,CAA5B;;AAEA,IAAIk1B,MAAM,GAAGJ,MAAM,CAAC;AAAEK,MAAI,EAAE;AAAR,CAAD,CAAnB;AAEA,MAAMC,OAAO,GAAGN,MAAM,EAAtB;AAEA5xB,MAAM,CAACrB,IAAP,CAAY,gBAAZ,EAA8B6yB,QAAQ,CAACriB,SAAvC;AAEAnP,MAAM,CAACrB,IAAP,CAAY,mBAAZ,EAAiC6yB,QAAQ,CAACvhB,YAA1C;AAEAjQ,MAAM,CAACrB,IAAP,CAAY,wBAAZ,EAAsC6yB,QAAQ,CAACphB,iBAA/C;AAEApQ,MAAM,CAACrB,IAAP,CAAY,aAAZ,EAA2B6yB,QAAQ,CAAClhB,MAApC;AAEAtQ,MAAM,CAAC/B,GAAP,CAAW,mBAAX,EAAgCuzB,QAAQ,CAAC9hB,oBAAzC;AAEA1P,MAAM,CAAC/B,GAAP,CAAW,uBAAX,EAAoCuzB,QAAQ,CAAC3hB,kBAA7C;AAEA7P,MAAM,CAAC/B,GAAP,CAAW,sBAAX,EAAmCuzB,QAAQ,CAACzhB,iBAA5C;AAEA/P,MAAM,CAACrB,IAAP,CAAY,aAAZ,EAA2B+yB,MAAM,CAAC/jB,MAAlC;AAEA3N,MAAM,CAACrB,IAAP,CAAY,yBAAZ,EAAuC6yB,QAAQ,CAACtiB,YAAhD,E,CAEA;;AACA,MAAMijB,SAAS,GAAGr1B,mBAAO,CAAC,gEAAD,CAAzB;;AAEAkD,MAAM,CAACrB,IAAP,CAAY,qBAAZ,EAAmCwzB,SAAS,CAAC9d,gBAA7C;AACArU,MAAM,CAAC/B,GAAP,CAAW,qBAAX,EAAkCk0B,SAAS,CAACrd,aAA5C;AACA9U,MAAM,CAAC/B,GAAP,CAAW,WAAX,EAAwBk0B,SAAS,CAACpd,WAAlC;AACA/U,MAAM,CAAC/B,GAAP,CAAW,aAAX,EAA0Bk0B,SAAS,CAACld,WAApC;AACAjV,MAAM,CAAC/B,GAAP,CAAW,yBAAX,EAAsCk0B,SAAS,CAACjd,WAAhD;AACAlV,MAAM,CAACrB,IAAP,CAAY,4BAAZ,EAA0CwzB,SAAS,CAAC9c,WAApD;AACArV,MAAM,CAACrB,IAAP,CAAY,+BAAZ,EAA6CwzB,SAAS,CAAC3c,cAAvD;AACAxV,MAAM,CAACrB,IAAP,CAAY,gCAAZ,EAA8CwzB,SAAS,CAACzc,gBAAxD;AACA1V,MAAM,CAAC/B,GAAP,CAAW,iCAAX,EAA8Ck0B,SAAS,CAACxc,iBAAxD;AACA3V,MAAM,CAACrB,IAAP,CAAY,6BAAZ,EAA2CwzB,SAAS,CAAC/uB,iBAArD;AACApD,MAAM,CAAC/B,GAAP,CAAW,kCAAX,EAA+Ck0B,SAAS,CAACrc,kBAAzD;AACA9V,MAAM,CAAC/B,GAAP,CAAW,8BAAX,EAA2Ck0B,SAAS,CAACnc,cAArD;AACAhW,MAAM,CAACrB,IAAP,CAAY,0BAAZ,EAAwCwzB,SAAS,CAACtb,cAAlD;AACA7W,MAAM,CAACrB,IAAP,CAAY,6BAAZ,EAA2CwzB,SAAS,CAACrb,iBAArD;AACA9W,MAAM,CAAC/B,GAAP,CAAW,kCAAX,EAA+Ck0B,SAAS,CAACnb,kBAAzD;AACAhX,MAAM,CAACrB,IAAP,CAAY,6BAAZ,EAA2CwzB,SAAS,CAAChf,aAArD;AAEAnT,MAAM,CAACrB,IAAP,CAAY,8BAAZ,EAA4CwzB,SAAS,CAAC/b,cAAtD;AACApW,MAAM,CAACrB,IAAP,CACE,qCADF,EAEEwzB,SAAS,CAAC5b,qBAFZ;AAIAvW,MAAM,CAACrB,IAAP,CAAY,6BAAZ,EAA2CwzB,SAAS,CAACzb,aAArD;AACA1W,MAAM,CAACrB,IAAP,CAAY,2BAAZ,EAAyCwzB,SAAS,CAACjb,WAAnD;AACAlX,MAAM,CAACrB,IAAP,CAAY,8BAAZ,EAA4CwzB,SAAS,CAAC/a,cAAtD;AACApX,MAAM,CAACrB,IAAP,CAAY,qBAAZ,EAAmCwzB,SAAS,CAAChkB,cAA7C;AACAnO,MAAM,CAACrB,IAAP,CAAY,uBAAZ,EAAqCwzB,SAAS,CAACjkB,gBAA/C;AACAlO,MAAM,CAACrB,IAAP,CAAY,oBAAZ,EAAkCwzB,SAAS,CAAC/jB,aAA5C;AACApO,MAAM,CAACrB,IAAP,CAAY,oBAAZ,EAAkCwzB,SAAS,CAAC9jB,aAA5C;AACArO,MAAM,CAACrB,IAAP,CAAY,uBAAZ,EAAqCwzB,SAAS,CAAC5d,kBAA/C;AACAvU,MAAM,CAACrB,IAAP,CAAY,qBAAZ,EAAmCwzB,SAAS,CAACvc,cAA7C;AACA5V,MAAM,CAACrB,IAAP,CAAY,2BAAZ,EAAyCwzB,SAAS,CAACle,oBAAnD,E,CACA;;AACAjU,MAAM,CAAC/B,GAAP,CAAW,cAAX,EAA2BwC,KAAK,CAACmI,cAAjC,E,CAEA;;AACA5I,MAAM,CAAC/B,GAAP,CAAW,mBAAX,EAAgCwzB,WAAW,CAAC1nB,iBAA5C,E,CAEA;;AACA/J,MAAM,CAACrB,IAAP,CAAY,kBAAZ,EAAgCqzB,MAAM,CAACI,GAAP,EAAhC,EAA8CT,WAAW,CAACrpB,UAA1D,E,CAEA;;AACAtI,MAAM,CAACrB,IAAP,CAAY,2BAAZ,EAAyCmH,MAAM,CAAC+K,aAAhD;AAEA7Q,MAAM,CAAC/B,GAAP,CAAW,kBAAX,EAA+B6H,MAAM,CAACsL,kBAAtC;AAEApR,MAAM,CAAC/B,GAAP,CAAW,iBAAX,EAA8B6H,MAAM,CAACkL,aAArC;AAEAhR,MAAM,CAACrB,IAAP,CAAY,6BAAZ,EAA2CmH,MAAM,CAACwL,eAAlD;AAEAtR,MAAM,CAAC/B,GAAP,CAAW,6BAAX,EAA0C6H,MAAM,CAACyL,eAAjD;AAEAvR,MAAM,CAAC/B,GAAP,CAAW,wBAAX,EAAqC6H,MAAM,CAAC2L,UAA5C;AAEAzR,MAAM,CAAC/B,GAAP,CAAW,8BAAX,EAA2C6H,MAAM,CAACgM,gBAAlD;AAEA9R,MAAM,CAACrB,IAAP,CAAY,0BAAZ,EAAwCmH,MAAM,CAACoM,gBAA/C;AAEAlS,MAAM,CAAC/B,GAAP,CAAW,uBAAX,EAAoC6H,MAAM,CAACsM,eAA3C;AAEApS,MAAM,CAACrB,IAAP,CAAY,wBAAZ,EAAsCmH,MAAM,CAACuM,gBAA7C;AAEArS,MAAM,CAAC/B,GAAP,CAAW,2BAAX,EAAwC6H,MAAM,CAACwM,gBAA/C;AAEAtS,MAAM,CAAC/B,GAAP,CAAW,sBAAX,EAAmC6H,MAAM,CAACuE,gBAA1C;AAEArK,MAAM,CAAC/B,GAAP,CAAW,8BAAX,EAA2C6H,MAAM,CAACyM,gBAAlD;AAEAvS,MAAM,CAAC/B,GAAP,CAAW,oCAAX,EAAiD6H,MAAM,CAAC2M,sBAAxD;AAEAzS,MAAM,CAAC/B,GAAP,CACE,yCADF,EAEE6H,MAAM,CAAC4M,2BAFT;AAKA1S,MAAM,CAACrB,IAAP,CACE,sCADF,EAEEmH,MAAM,CAACoN,wBAFT;AAKAlT,MAAM,CAAC/B,GAAP,CACE,qCADF,EAEE6H,MAAM,CAACsN,uBAFT,E,CAKA;;AACApT,MAAM,CAACrB,IAAP,CAAY,wBAAZ,EAAsCkzB,gBAAgB,CAAC/mB,oBAAvD;AACA9K,MAAM,CAACrB,IAAP,CACE,0BADF,EAEEkzB,gBAAgB,CAAC1mB,sBAFnB;AAIAnL,MAAM,CAACrB,IAAP,CACE,8BADF,EAEEkzB,gBAAgB,CAACpmB,6BAFnB;AAIAzL,MAAM,CAACrB,IAAP,CACE,wCADF,EAEEkzB,gBAAgB,CAAC1lB,sCAFnB;AAIAnM,MAAM,CAACrB,IAAP,CACE,kCADF,EAEEkzB,gBAAgB,CAACrlB,mCAFnB;AAIAxM,MAAM,CAACrB,IAAP,CACE,4CADF,EAEEkzB,gBAAgB,CAACjlB,0CAFnB;AAKA5M,MAAM,CAACrB,IAAP,CACE,6BADF,EAEEkzB,gBAAgB,CAAChlB,yBAFnB,E,CAKA;;AACA7M,MAAM,CAACrB,IAAP,CAAY,iBAAZ,EAA+BuzB,OAAO,CAACE,GAAR,EAA/B,EAA8ClV,YAAY,CAAClU,IAA3D;AACAhJ,MAAM,CAACd,MAAP,CAAc,mBAAd,EAAmCge,YAAY,CAAC1T,MAAhD;AACAxJ,MAAM,CAAC/B,GAAP,CAAW,oBAAX,EAAiCif,YAAY,CAACxT,OAA9C;AACA1J,MAAM,CAAC/B,GAAP,CAAW,0BAAX,EAAuCif,YAAY,CAACvT,aAApD;AACA3J,MAAM,CAAC/B,GAAP,CAAW,wBAAX,EAAqCif,YAAY,CAACrT,WAAlD,E,CAEA;;AAEA7J,MAAM,CAAC/B,GAAP,CAAW,0BAAX,EAAuC6zB,SAAS,CAAChwB,eAAjD;AAGA9B,MAAM,CAACrB,IAAP,CAAY,iBAAZ,EAA+BuzB,OAAO,CAACE,GAAR,EAA/B,EAA8CL,MAAM,CAACpa,UAArD,E,CAEA;;AACA,MAAM0a,gBAAgB,GAAGv1B,mBAAO,CAAC,gEAAD,CAAhC;;AACAkD,MAAM,CAACrB,IAAP,CAAY,sBAAZ,EAAoC0zB,gBAAgB,CAACzvB,WAArD,E,CACA;;AAEA5D,MAAM,CAACC,OAAP,GAAiBe,MAAjB,C;;;;;;;;;;;ACrLA,MAAM8H,GAAG,GAAG;AACV,kBAAgB;AACdwqB,UAAM,EAAG,GAAE7wB,OAAO,CAACC,GAAR,CAAY6wB,gBAAiB,EAD1B;AAEdC,eAAW,EAAE;AACX,wBAAkB;AADP;AAFC;AADN,CAAZ;;AASA,MAAMC,MAAM,GAAIt1B,GAAD,IAAS;AACtB,MAAIu1B,QAAQ,GAAG5qB,GAAf;AACA,MAAI6qB,QAAQ,GAAGx1B,GAAG,CAACiJ,KAAJ,CAAU,GAAV,CAAf;AACA,MAAIwsB,QAAQ,GAAG,IAAf;;AACA,OAAK,IAAIjR,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIgR,QAAQ,CAACt0B,MAA9B,EAAsCsjB,CAAC,EAAvC,EAA2C;AACzC,QAAI,CAACiR,QAAL,EAAe;AACb,UAAIC,UAAU,GAAGnK,KAAK,CAACvb,KAAN,CAAY,IAAZ,EAAkB;AACjC9O,cAAM,EAAEsjB,CAAC,GAAG;AADqB,OAAlB,EAEd7Z,GAFc,CAEVgrB,QAAQ,CAACC,IAFC,EAEKnN,MAFL,CAAjB;AAGA,UAAIvc,GAAG,GAAG,EAAV;AACAwpB,gBAAU,CAACptB,OAAX,CAAoButB,OAAD,IAAa;AAC9B3pB,WAAG,IAAIspB,QAAQ,CAACK,OAAD,CAAR,KAAsB,EAAtB,GAA4B,IAAGL,QAAQ,CAACK,OAAD,CAAU,EAAjD,GAAqD,EAA5D;AACD,OAFD;AAGAJ,cAAQ,GAAGF,QAAQ,CAACrpB,GAAD,CAAnB;AACD;AACF;;AACD,SAAOupB,QAAP;AACD,CAjBD;;AAmBA,MAAMK,cAAc,GAAIC,WAAD,IAAiB;AACtC,MAAIh1B,WAAW,GAAI,GAAnB;AACA,MAAIoW,MAAM,GAAG,EAAE,GAAG4e,WAAL;AAAkB7wB,QAAI,EAAEZ,OAAO,CAACC,GAAR,CAAYyxB;AAApC,GAAb;AACAh1B,QAAM,CAACC,IAAP,CAAYkW,MAAZ,EAAoB7O,OAApB,CAA6B0c,CAAD,IAAO;AACjCjkB,eAAW,GAAI,GAAEA,WAAY,GAAEikB,CAAE,IAAG7N,MAAM,CAAC6N,CAAD,CAAI,GAA9C;AACD,GAFD;AAGA,SAAOjkB,WAAP;AACD,CAPD;;AASAe,OAAO,CAACm0B,UAAR,GAAqB,CAACC,QAAD,EAAWC,IAAX,EAAiBn2B,GAAjB,EAAsB+1B,WAAtB,KAAsC;AACzD,MAAIK,WAAW,GAAI,GAAEF,QAAS,MAAKC,IAAK,GAAEn2B,GAAI,EAA9C;AACA,MAAIwD,IAAI,GAAG8xB,MAAM,CAACt1B,GAAD,CAAjB;;AACA,MAAIwD,IAAJ,EAAU;AACR,QAAI6yB,KAAK,GAAG,IAAIrL,MAAJ,CAAWhqB,MAAM,CAACC,IAAP,CAAYuC,IAAI,CAAC6xB,WAAjB,EAA8B,CAA9B,CAAX,CAAZ;AACA,QAAIiB,QAAQ,GAAGF,WAAW,CAACG,OAAZ,CACbF,KADa,EAEb7yB,IAAI,CAAC6xB,WAAL,CAAiBr0B,MAAM,CAACC,IAAP,CAAYuC,IAAI,CAAC6xB,WAAjB,EAA8B,CAA9B,CAAjB,CAFa,CAAf;AAIA,WAAOr0B,MAAM,CAACC,IAAP,CAAY80B,WAAZ,EAAyB70B,MAAzB,GAAkC,CAAlC,GACF,GAAEsC,IAAI,CAAC2xB,MAAO,GAAEmB,QAAS,GAAER,cAAc,CAACC,WAAD,CAAc,EADrD,GAEF,GAAEvyB,IAAI,CAAC2xB,MAAO,GAAEmB,QAAS,SAAQhyB,OAAO,CAACC,GAAR,CAAYyxB,gBAAiB,EAFnE;AAGD,GATD,MASO,OAAOI,WAAP;AACR,CAbD,C;;;;;;;;;;;ACrCA,MAAM7zB,OAAO,GAAG5C,mBAAO,CAAC,wBAAD,CAAvB;;AACA,MAAMkD,MAAM,GAAGN,OAAO,CAAC6xB,MAAR,EAAf;;AACA,MAAMoC,KAAK,GAAG72B,mBAAO,CAAC,8CAAD,CAArB;;AACA,MAAM;AAAEs2B;AAAF,IAAiBt2B,mBAAO,CAAC,0CAAD,CAA9B;;AACA,MAAMylB,IAAI,GAAGzlB,mBAAO,CAAC,oDAAD,CAApB,C,CAEA;;;AACA,MAAM82B,SAAS,GAAG92B,mBAAO,CAAC,8CAAD,CAAzB;;AAEAkD,MAAM,CAACE,GAAP,CAAW,QAAX,EAAqBqiB,IAAI,CAACE,YAA1B;AACAziB,MAAM,CAACwH,GAAP,CAAW,QAAX,EAAqBosB,SAArB;AAEA5zB,MAAM,CAACE,GAAP,CAAW,gBAAX,EAA6BqiB,IAAI,CAACE,YAAlC;AACAziB,MAAM,CAACE,GAAP,CACE,gBADF,EAEEyzB,KAAK,CAAClyB,OAAO,CAACC,GAAR,CAAY6wB,gBAAb,EAA+B;AAClCsB,sBAAoB,EAAE,UAAU9xB,GAAV,EAAe;AACnC,QAAI+xB,UAAU,GAAGV,UAAU,CACzBrxB,GAAG,CAACsxB,QADqB,EAEzBtxB,GAAG,CAAC9D,GAAJ,CAAQ,MAAR,CAFyB,EAGzB8D,GAAG,CAAC2gB,OAHqB,EAIzB3gB,GAAG,CAACK,KAJqB,CAA3B;AAMA5C,WAAO,CAACuD,GAAR,CAAY,aAAZ,EAA2B+wB,UAA3B;AACA,WAAOA,UAAP;AACD;AAViC,CAA/B,CAFP;AAgBA90B,MAAM,CAACC,OAAP,GAAiBe,MAAjB,C;;;;;;;;;;;AC7BA;;;AAIA,IAAIC,GAAG,GAAGnD,mBAAO,CAAC,2BAAD,CAAjB;;AACA,IAAIi3B,KAAK,GAAGj3B,mBAAO,CAAC,oBAAD,CAAP,CAAiB,mBAAjB,CAAZ;;AACA,IAAIk3B,IAAI,GAAGl3B,mBAAO,CAAC,kBAAD,CAAlB;AAEA;;;;;AAIA,IAAIm3B,IAAI,GAAGC,aAAa,CAACzyB,OAAO,CAACC,GAAR,CAAYyyB,IAAZ,IAAoB,MAArB,CAAxB;AACAl0B,GAAG,CAACm0B,GAAJ,CAAQ,MAAR,EAAgBH,IAAhB;AAEA;;;;AAIA,IAAII,MAAM,GAAGL,IAAI,CAACM,YAAL,CAAkBr0B,GAAlB,CAAb;AAEA;;;;AAIAo0B,MAAM,CAACE,MAAP,CAAcN,IAAd;AACAI,MAAM,CAAChP,EAAP,CAAU,OAAV,EAAmBmP,OAAnB;AACAH,MAAM,CAAChP,EAAP,CAAU,WAAV,EAAuBoP,WAAvB;AAEA;;;;AAIA,SAASP,aAAT,CAAuBQ,GAAvB,EAA4B;AAC1B,MAAIT,IAAI,GAAGU,QAAQ,CAACD,GAAD,EAAM,EAAN,CAAnB;;AAEA,MAAIE,KAAK,CAACX,IAAD,CAAT,EAAiB;AACf;AACA,WAAOS,GAAP;AACD;;AAED,MAAIT,IAAI,IAAI,CAAZ,EAAe;AACb;AACA,WAAOA,IAAP;AACD;;AAED,SAAO,KAAP;AACD;AAED;;;;;AAIA,SAASO,OAAT,CAAiBl1B,KAAjB,EAAwB;AACtB,MAAIA,KAAK,CAACu1B,OAAN,KAAkB,QAAtB,EAAgC;AAC9B,UAAMv1B,KAAN;AACD;;AAED,MAAIgmB,IAAI,GAAG,OAAO2O,IAAP,KAAgB,QAAhB,GACP,UAAUA,IADH,GAEP,UAAUA,IAFd,CALsB,CAStB;;AACA,UAAQ30B,KAAK,CAAC+C,IAAd;AACE,SAAK,QAAL;AACE7C,aAAO,CAACF,KAAR,CAAcgmB,IAAI,GAAG,+BAArB;AACA7jB,aAAO,CAACqzB,IAAR,CAAa,CAAb;AACA;;AACF,SAAK,YAAL;AACEt1B,aAAO,CAACF,KAAR,CAAcgmB,IAAI,GAAG,oBAArB;AACA7jB,aAAO,CAACqzB,IAAR,CAAa,CAAb;AACA;;AACF;AACE,YAAMx1B,KAAN;AAVJ;AAYD;AAED;;;;;AAIA,SAASm1B,WAAT,GAAuB;AACrBj1B,SAAO,CAACuD,GAAR,CAAY,iBAAZ,EAA+BtB,OAAO,CAACC,GAAR,CAAYyyB,IAA3C;AACA,MAAIY,IAAI,GAAGV,MAAM,CAACthB,OAAP,EAAX;AACA,MAAIuS,IAAI,GAAG,OAAOyP,IAAP,KAAgB,QAAhB,GACP,UAAUA,IADH,GAEP,UAAUA,IAAI,CAACd,IAFnB;AAGAF,OAAK,CAAC,kBAAkBzO,IAAnB,CAAL;AACD,C;;;;;;;;;;;ACxFD,oE;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,wC;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,sC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,4C;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,+C;;;;;;;;;;;ACAA,+B;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,yC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,qC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,oC","file":"app.server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/server.js\");\n","const axios = require(\"axios\");\nconst { handleError, handleResponse } = require(\"./ApiUtils\");\n\nconst httpRequest = (method, url, request, _headers) => {\n  let hdrs = { ..._headers };\n  return axios({\n    method,\n    url,\n    data: request,\n    headers: hdrs,\n  })\n    .then((res) => {\n      const result = handleResponse(res);\n      return Promise.resolve(result);\n    })\n    .catch((err) => {\n      //throw handleError(err);\n      return Promise.reject(handleError(err));\n    });\n};\n\nconst get = (url, request, headers) => {\n  let queryString = \"\";\n  if (request && Object.keys(request).length > 0) {\n    queryString += \"?\";\n    let len = Object.keys(request).length,\n      cnt = 0;\n    for (let key in request) {\n      cnt++;\n      queryString += `${key}=${request[key].toString()}`;\n      if (len > cnt) queryString += \"&\";\n    }\n  }\n  return httpRequest(\"get\", `${url}${queryString}`, null, headers);\n};\n\nconst deleteRequest = (url, request, headers) => {\n  return httpRequest(\"delete\", url, request, headers);\n};\n\nconst post = (url, request, headers) => {\n  return httpRequest(\"post\", url, request, headers);\n};\n\nconst put = (url, request, headers) => {\n  return httpRequest(\"put\", url, request, headers);\n};\n\nconst patch = (url, request, headers) => {\n  return httpRequest(\"patch\", url, request, headers);\n};\n\nconst postForm = async (url, formData, headers) => {\n  try {\n    let hdrs = {\n      ...headers,\n      \"Content-Type\": \"multipart/form-data\",\n    };\n    let res = await axios.post(url, formData, { headers: hdrs });\n    return handleResponse(res);\n  } catch (err) {\n    return handleError(err);\n  }\n};\n\nmodule.exports = {\n  get,\n  delete: deleteRequest,\n  post,\n  postForm,\n  put,\n  patch,\n};\n","exports.handleResponse = (response) => {\n  if (\n    response.status === 200 ||\n    response.status === 202 ||\n    response.statusText === \"OK\" ||\n    response.statusText === \"Created\"\n  )\n    return response.data;\n  if (response.status === 400) {\n    // So, a server-side validation error occurred.\n    // Server side validation returns a string error message, so parse as text instead of json.\n    const error = response.statusText();\n    throw new Error(error);\n  }\n  throw new Error(\"Network response was not ok.\");\n};\n\n// In a real app, would likely call an error logging service.\nexports.handleError = (error) => {\n  // eslint-disable-next-line no-console\n  console.error(\"API call failed. \" + error);\n  return error && error.response && error.response.data\n    ? error.response.data\n    : error;\n};\n","const dotenv = require(\"dotenv\");\nconst express = require('express');\nconst logger = require('morgan');\nconst bodyParser = require('body-parser');\nconst cors = require(\"cors\");\n\ndotenv.config();\n\nconst connectDb = require(\"./models\").connectDb;\nvar router = require(\"./routes/router\");\n\n\nvar app = express();\n\n\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json({limit: '50mb'}));\n\n\napp.use(express.json());\napp.use(cors());\n\napp.use(logger('dev'));\napp.use('/', router);\n\nconnectDb();\n\nmodule.exports = app;\n\n","const userType = require(\"./types\").userTypes;\n\n/**\n * Get menus list\n */\nexports.menus = [\n  {\n    name: \"Mi Cuenta\",\n    path: \"/admin/cuenta\",\n    icon: \"icon icon-account_circle\",\n    visible: true,\n    validUserTypes: [\n      userType.guard,\n      userType.suburbAdmin,\n      userType.admin,\n      userType.guest,\n      userType.neighbor,\n    ],\n    order: 5,\n  },\n  {\n    name: \"Reporte\",\n    path: \"/admin/reporte\",\n    icon: \"icon icon-dashboard2\",\n    visible: true,\n    validUserTypes: [\n      userType.guard,\n      userType.suburbAdmin,\n      userType.admin,\n      userType.guest,\n    ],\n    order: 5,\n  },\n  {\n    name: \"Guardias\",\n    path: \"/admin/guardias\",\n    icon: \"icon icon-shield\",\n    visible: true,\n    validUserTypes: [userType.guest, userType.guard, userType.admin],\n    order: 2,\n  },\n  {\n    name: \"GuardiasForm\",\n    icon: \"icon icon-shield\",\n    path: \"/admin/guardias-form\",\n    visible: false,\n    validUserTypes: [userType.suburbAdmin, userType.admin],\n    order: 6,\n  },\n  {\n    name: \"Vecinos\",\n    path: \"/admin/vecinos\",\n    icon: \"icon icon-users\",\n    visible: true,\n    validUserTypes: [userType.suburbAdmin, userType.admin],\n    order: 3,\n  },\n  {\n    name: \"Administracion de pagos\",\n    path: \"/admin/payments\",\n    icon: \"icon icon-users\",\n    visible: true,\n    validUserTypes: [userType.suburbAdmin, userType.admin],\n    order: 3,\n  },\n  {\n    name: \"Colonia\",\n    path: \"/admin/colonias\",\n    icon: \"icon icon-building\",\n    visible: true,\n    validUserTypes: [userType.admin],\n    order: 4,\n  },\n  {\n    name: \"Colonia Status\",\n    path: \"/admin/coloniaStatus\",\n    icon: \"icon icon-building\",\n    visible: false,\n    validUserTypes: [userType.admin, userType.suburbAdmin, userType.guest],\n    order: 4,\n  },\n  {\n    name: \"Colonia Status\",\n    path: \"/admin/coloniaMain\",\n    icon: \"icon icon-building\",\n    visible: false,\n    validUserTypes: [\n      userType.admin,\n      userType.suburbAdmin,\n      userType.suburbAdmin,\n    ],\n    order: 4,\n  },\n];\n","exports.userTypes = {\n  guest: \"guest\",\n  admin: \"admin\",\n  suburbAdmin: \"suburbAdmin\",\n  guard: \"guard\",\n  neighbor: \"neighbor\",\n};\n\nexports.suburbStatus = [\n  {\n    status: \"pending\",\n    description:\n      \"Tu solicitud para registrar la colonia ha sido enviada, por favor espera de 2 a 3 dias habiles o contactanos por medio de nuestras redes sociales para mayor informacion.\",\n  },\n  {\n    status: \"rejected\",\n    description: \"Lo sentimos tu solicitud fue rechazada.\",\n  },\n  {\n    status: \"approved\",\n    description: \"Tu solicitud a sido aprobada.\",\n  },\n  {\n    status: \"feedback\",\n    description: \"Tu solicitud a sido revisada, se requiere mas información.\",\n  },\n];\n","const Api = require(\"../api/ApiService\");\n\nconst apiAnalytics = process.env.API_ANALYTICS_URL;\nconst apiKey = process.env.API_ANALYTICS_KEY;\n\nexports.getSuburbVisits = async (req, res) => {\n  try {\n    let { suburbId, startDate, endDate, offset } = req.query;\n    if (!offset) offset = 5;\n    let response = await Api.get(`${apiAnalytics}/GetVisitsInfo`, {\n      code: apiKey,\n      suburbId,\n      startDate,\n      endDate,\n      offset,\n    });\n    res.status(\"200\").json(response);\n  } catch (err) {\n    console.error(err);\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n","const apiUrl = process.env.API_BLOB_URL;\nconst apiKey = process.env.API_BLOB_KEY;\nconst request = require(\"request\");\nconst User = require(\"../logic/userService\");\n\n/** This service acts like a proxy to redirect the request to the blob service\n *\n * @param {*} req\n * @param {*} res\n */\nexports.uploadBlobs = async (req, res) => {\n  try {\n    let url = `${apiUrl}/UploadFile${apiKey ? `?code=${apiKey}` : \"\"}`;\n    req\n      .pipe(\n        request({ url: url }, (error, response, body) => {\n          if (error) {\n            console.log(\n              `An error occurs in the following url: ${url}: `,\n              error\n            );\n            let message = \"dev proxy error: \";\n            if (error && error.code === \"ECONNREFUSED\") {\n              message = message.concat(\"Refused connection\");\n            } else if (error && error.code === \"ECONNRESET\") {\n              message = message.concat(\"The target connection has been lost\");\n            } else {\n              message = message.concat(\"Unhandled error\");\n            }\n            req.res.status(500).json({\n              errorMessage: message || \"\",\n              exception: message || {},\n            });\n          } else {\n            if (response.statusCode < 300)\n              User.updateUserPicture(\n                req.query.userId,\n                JSON.parse(response.body)[0].url\n              );\n          }\n        })\n      )\n      .pipe(res);\n    //res.status(\"200\").json({ message: \"ok\" });\n  } catch (err) {\n    console.error(err);\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n","const userServices = require(\"../logic/userService\");\nconst suburbService = require(\"../logic/suburbService\");\n//const fetchDbx = require('isomorphic-fetch');\nconst fs = require(\"fs\");\n// const Dropbox = require(\"dropbox\").Dropbox;\nconst dropboxV2Api = require(\"dropbox-v2-api\");\nconst sgMail = require(\"@sendgrid/mail\");\n\nconst getFileName = (nodeFileName, originalName) => {\n  let idx = originalName.lastIndexOf(\".\");\n  return `${nodeFileName}.${originalName.substring(idx + 1)}`;\n};\n\nconst uploadFileDropbox = (file) => {\n  const dropbox = dropboxV2Api.authenticate({\n    token: process.env.DROPBOX_TOKEN,\n  });\n\n  return new Promise((resolve, reject) => {\n    dropbox(\n      {\n        resource: \"files/upload\",\n        parameters: {\n          path: `/neighby/${getFileName(file.filename, file.originalname)}`,\n        },\n        readStream: fs.createReadStream(`${file.destination}/${file.filename}`),\n      },\n      (err, result, response) => {\n        if (!err) resolve(result);\n        else reject(err);\n      }\n    );\n  });\n};\n\nconst base64_encode = (file_path) => {\n  // read binary data\n  var bitmap = fs.readFileSync(file_path);\n  // convert binary data to base64 encoded string\n  return new Buffer.from(bitmap, \"base64\").toString(\"base64\"); //.toString('base64');\n};\n\nconst getEmailAttachments = (files) => {\n  let attachments = [];\n  files.forEach((file) => {\n    attachments.push({\n      filename: `${file.originalname}`,\n      content: base64_encode(`${file.destination}/${file.filename}`),\n    });\n  });\n  return attachments;\n};\n\nconst sendEmail = async (files, user, suburb, suburbId) => {\n  try {\n    sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n\n    const msg = {\n      to: process.env.OWNER_EMAILS.split(\",\"),\n      from: \"support@neighby.com\",\n      subject: \"Nuevo requerimiento de registro de colonia.\",\n      text: `solicitud de registro.`,\n      html: `<strong>El usuario ${user} desea registrar la colonia ${suburb} y envia los documentos para revisión adjuntos en este email para revision, id de referencia:[${suburbId}].</strong>`,\n      attachments: getEmailAttachments(files),\n    };\n    await sgMail.send(msg);\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst deleteTemporaryFiles = (files) => {\n  files.forEach((file) => {\n    fs.unlink(`${file.destination}/${file.filename}`, (err) => {\n      if (err) throw err;\n      console.log(\n        `path file ${file.destination}/${file.filename} has been deleted.`\n      );\n    });\n  });\n};\n\nconst processFileUpload = async (files, data) => {\n  try {\n    let {\n      userId,\n      name,\n      lastName,\n      cellphone,\n      email,\n      postalCode,\n      section,\n      suburbName,\n      recaptchaToken,\n    } = data;\n    let validCaptcha = await userServices.validateRecaptcha(recaptchaToken);\n    let proms = [];\n    files.forEach((file) => {\n      proms.push(uploadFileDropbox(file));\n    });\n    let uploadedFiles = await Promise.all(proms);\n\n    let saveSuburb = await suburbService.saveSuburb({\n      name: suburbName,\n      location: section,\n      postalCode: postalCode,\n      active: true,\n      userAdmins: [userId],\n      status: [suburbService.getSuburbStatus(\"pending\")],\n      files: files.map((fil) => ({\n        fileName: fil.filename,\n        originalName: fil.originalname,\n        actionType: \"solicitudRegistro\",\n        mimetype: fil.mimetype,\n      })),\n    });\n\n    let updateUser = await userServices.updateUser({\n      _id: userId,\n      name,\n      lastName,\n      cellphone,\n      email,\n      active: true,\n    });\n\n    await sendEmail(files, `${name} ${lastName}`, suburbName, saveSuburb.id);\n\n    deleteTemporaryFiles(files);\n    return saveSuburb;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nexports.uploadFile = async (req, res, next) => {\n  try {\n    let {\n      userId,\n      name,\n      lastName,\n      cellphone,\n      email,\n      postalCode,\n      section,\n      suburbName,\n      recaptchaToken,\n    } = req.body;\n    let processFiles = await processFileUpload(req.files, {\n      userId,\n      name,\n      lastName,\n      cellphone,\n      email,\n      postalCode,\n      section,\n      suburbName,\n      recaptchaToken,\n    });\n    res.status(202).json({ message: \"ok\" });\n  } catch (ex) {\n    res\n      .status(400)\n      .json({ message: ex.message || \"No se pudo completar el registro.\" });\n  }\n};\n\nexports.sendTempPassEmail = async (email, tempPassword, files = []) => {\n  try {\n    sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n\n    const msg = {\n      to: email, //process.env.OWNER_EMAILS.split(\",\"),\n      from: \"support@neighby.com\",\n      subject: \"Solicitud de cambio de contraseña.\",\n      text: `Solicitud de cambio de contraseña.`,\n      html: `<strong>La nueva contraseña temporal es: ${tempPassword} </strong>`,\n      attachments: getEmailAttachments(files),\n    };\n    await sgMail.send(msg);\n  } catch (ex) {\n    throw ex;\n  }\n};\n","const menuService = require(\"../logic/menuService\");\n\n\n\n/**\n * [GET] method to get the menus by user types\n */\nexports.getMenusByUser = async (req, res, next) => {\n    let token = req.headers[\"authorization\"];\n    try {\n        const result = await menuService.getMenusByUser(token);\n        res.status('200').json(result);\n    } catch (err) {\n        res.status('401').json(err);\n    }\n}","const notificationService = require(\"../logic/notificationService\");\nconst { UploadBlob } = require(\"../logic/blobService\");\n\nconst NOTIFICATIONS_CONTAINER = \"notifications\";\nexports.Save = async (req, res) => {\n  try {\n    const { suburbId, title, body, level, users } = req.body;\n    let { attachments, sendSuburbNotification = false } = req.body;\n    if (!attachments && req.files) {\n      //upload attachments here\n      const files = req.files.map((file) => ({\n        ...file,\n        name: file.originalname,\n        uri: file.buffer.toString(\"base64\"),\n      }));\n\n      attachments = await UploadBlob(files, NOTIFICATIONS_CONTAINER);\n    }\n\n    const result = await notificationService.Save({\n      suburbId,\n      title,\n      body,\n      level,\n      attachments: attachments || [],\n      users: users || [],\n    });\n    if (sendSuburbNotification) {\n      // todo: check if we need to await for push notification service response\n      notificationService.SendSuburbNotification({\n        suburbId,\n        title,\n        body,\n        level,\n        attachments,\n      });\n    }\n\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(500).json(err);\n  }\n};\n\nexports.Delete = async (req, res) => {\n  try {\n    const { notificationId } = req.query;\n    const result = await notificationService.Delete(notificationId);\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(500).json(err);\n  }\n};\n\nexports.GetById = async (req, res) => {\n  try {\n    const { notificationId } = req.query;\n    const result = await notificationService.GetById(notificationId);\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(500).json(err);\n  }\n};\n\nexports.GetBySuburbId = async (req, res) => {\n  try {\n    const { suburbId, minDate } = req.query;\n    const result = await notificationService.GetBySuburbId(suburbId, minDate);\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(500).json(err);\n  }\n};\n\nexports.GetByUserId = async (req, res) => {\n  try {\n    const { suburbId, userId, minDate } = req.query;\n    const result = await notificationService.GetByUserId(\n      suburbId,\n      userId,\n      minDate\n    );\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(500).json(err);\n  }\n};\n","const postalCodeService = require(\"../logic/postalCodeService\");\n\nexports.getPostalCodeInfo = async (req, res, next) => {\n    try {\n        let result = await postalCodeService.getCPInfo(req.query.postalCode);\n        res.status(200).json(result);\n    }\n    catch (err) {\n        res.status(400).json(err);\n    }\n}","const pushNotificationService = require(\"../logic/pushNotificationService\");\nconst {\n  getUserLeanById,\n  getAdminUsers,\n  getUsersByAddressId,\n  getUsersBySuburb,\n} = require(\"../logic/userService\");\nconst moment = require(\"moment\");\nconst notificationService = require(\"../logic/notificationService\");\n\nconst NOTIFICATION_DEFAULT_SOUND = \"default\";\nconst NOTIFICATION_INFO_LEVEL = \"info\";\nconst NOTIFICATION_ARRIVE_TITLE = \"Notificación de llegada de invitado\";\nconst NOTIFICATION_UPLOAD_PAYMENT_TITLE =\n  \"Notificación de actualización de pago\";\nconst NOTIFICATION_UPDATE_PAYMENT_TITLE =\n  \"Notificación de actualización de pago\";\nconst NOTIFICATION_UPDATE_RESERVATION =\n  \"Notificación de actualización de reservación\";\nconst NOTIFICATION_NEW_SURVEY = \"Notificación de nueva encuesta\";\n\nexports.sendTestNotification = async (req, res, next) => {\n  try {\n    let result = await pushNotificationService.sendPushNotification(\n      [\"ExponentPushToken[TRMrLcG4VUxVUwmsCXPIyw]\"],\n      {\n        sound: \"default\",\n        body: \"This is a test notification ;)\",\n        data: { withSome: \"data\" },\n        title: \"Notificacion Nueva\",\n        subtitle: \"soy un subtitulo\",\n      }\n    );\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(400).json(err);\n  }\n};\n\nexports.sendArriveNotification = async (req, res) => {\n  try {\n    const { suburbId, userId, guest } = req.body;\n    const user = await getUserLeanById(userId);\n    const pushTokens = user.pushTokens.map((t) => t.token);\n\n    const metadata = {\n      sound: NOTIFICATION_DEFAULT_SOUND,\n      body: guest.isService\n        ? `Tu servicio ${guest.name} ha llegado.`\n        : `Tu invitado ${guest.name} ha llegado.`,\n      data: { redirect: \"myVisits\" },\n      title: `Hola ${user.name}`,\n    };\n\n    await notificationService.Save({\n      suburbId,\n      title: NOTIFICATION_ARRIVE_TITLE,\n      body: metadata.body,\n      level: NOTIFICATION_INFO_LEVEL,\n      users: [user._id],\n      metadata,\n    });\n\n    const result = await pushNotificationService.sendPushNotification(\n      pushTokens,\n      {\n        ...metadata,\n      }\n    );\n    res.status(200).json(result);\n  } catch (err) {\n    console.log(\"notification error details: \", err);\n    res.status(400).json(err);\n  }\n};\n\nexports.sendUploadPaymentNotification = async (req, res) => {\n  try {\n    const { suburbId, userId, paymentType } = req.body;\n    const users = await getAdminUsers(suburbId);\n    //esto es solo para pruebas\n    //users = users.filter((u) => u.facebookId === \"10221055228718114\");\n\n    const user = await getUserLeanById(userId);\n    const metadata = {\n      sound: NOTIFICATION_DEFAULT_SOUND,\n      body: `El usuario ${user.name} con la dirección ${user.street} ${user.streetNumber} realizo un pago de ${paymentType}.`,\n      data: {\n        redirect: { stack: \"PaymentsControl\", screen: \"PaymentList\" },\n        props: { street: user.street, streetNumber: user.streetNumber },\n      },\n      title: `Nuevo pago realizado`,\n    };\n    await notificationService.Save({\n      suburbId,\n      title: NOTIFICATION_UPLOAD_PAYMENT_TITLE,\n      body: metadata.body,\n      level: NOTIFICATION_INFO_LEVEL,\n      users: [user._id],\n      metadata,\n    });\n    let promises = [];\n    users.forEach((u) => {\n      promises.push(\n        pushNotificationService.sendPushNotification(\n          u.pushTokens.map((t) => t.token),\n          { ...metadata }\n        )\n      );\n    });\n    const sendNotifications = await Promise.all(promises);\n    res.status(200).json(sendNotifications);\n  } catch (err) {\n    console.log(\"notification error details: \", err);\n    res.status(400).json(err);\n  }\n};\n\nexports.sendApproveRejectedPaymentNotification = async (req, res) => {\n  try {\n    const { suburbId, addressId, status, comment, paymentName } = req.body;\n    const users = await getUsersByAddressId(suburbId, addressId);\n\n    const metadata = {\n      sound: NOTIFICATION_DEFAULT_SOUND,\n      body:\n        status === \"approved\"\n          ? `Tu pago de ${paymentName} ha sido aceptado`\n          : status === \"rejected\"\n          ? `Tu pago de ${paymentName} ha sido rechazado por la siguiente razón: ${comment}`\n          : `Tu pago ${paymentName} esta siendo procesado.`,\n      data: {\n        redirect: {\n          stack: \"Payments\",\n          screen: \"Info\",\n        },\n        props: {\n          filter: status,\n        },\n      },\n      title:\n        status === \"approved\"\n          ? \"Pago aceptado\"\n          : status === \"rejected\"\n          ? \"Pago rechazado\"\n          : \"Cambio en el estatus de tus pagos\",\n    };\n    await notificationService.Save({\n      suburbId,\n      title: NOTIFICATION_UPDATE_PAYMENT_TITLE,\n      body: metadata.body,\n      level: NOTIFICATION_INFO_LEVEL,\n      users: users.map((user) => user._id),\n      metadata,\n    });\n\n    let promises = [];\n    users.forEach((u) => {\n      promises.push(\n        pushNotificationService.sendPushNotification(\n          u.pushTokens.map((t) => t.token),\n          {\n            ...metadata,\n          }\n        )\n      );\n    });\n\n    const sendNotifications = await Promise.all(promises);\n    res.status(200).json(sendNotifications);\n  } catch (err) {\n    console.log(\"notification error details: \", err);\n    res.status(400).json(err);\n  }\n};\n\nexports.sendNewSpaceReservationNotification = async (req, res) => {\n  try {\n    const { suburbId, userId, reservationId } = req.body;\n    const adminUsers = await getAdminUsers(suburbId);\n\n    const user = await getUserLeanById(userId);\n    const metadata = {\n      sound: NOTIFICATION_DEFAULT_SOUND,\n      body: `El usuario ${user.name} con la dirección ${user.street} ${user.streetNumber} ha realizado una reserva de un area común.`,\n      data: {\n        redirect: { stack: \"CommonAreas\", screen: \"ApprovalScreen\" },\n        props: {\n          street: user.street,\n          streetNumber: user.streetNumber,\n          reservationId,\n        },\n      },\n      title: `Nueva reserva de area común`,\n    };\n    await notificationService.Save({\n      suburbId,\n      title: NOTIFICATION_UPDATE_RESERVATION,\n      body: metadata.body,\n      level: NOTIFICATION_INFO_LEVEL,\n      users: adminUsers.map((user) => user._id),\n      metadata,\n    });\n    let promises = [];\n    adminUsers.forEach((u) => {\n      promises.push(\n        pushNotificationService.sendPushNotification(\n          u.pushTokens.map((t) => t.token),\n          { ...metadata }\n        )\n      );\n    });\n\n    let sendNotifications = await Promise.all(promises);\n    res.status(200).json(sendNotifications);\n  } catch (err) {\n    console.log(\"notification error details: \", err);\n    res.status(400).json(err);\n  }\n};\n\nconst getReservationStatusMessage = (status, comment) => {\n  switch (status) {\n    case \"approved\":\n      return \"Tu reservación ha sido aprobada\";\n    case \"rejected\":\n      return `Tu reservación ha sido rechazada por la siguiente razón: ${comment}`;\n    case \"pending\":\n      return \"Tu reservación esta siendo procesada\";\n    default:\n      return \"El estatus de tu reservación ha cambiado\";\n  }\n};\n\nexports.sendApproveRejectedReservationNotification = async (req, res) => {\n  try {\n    const { suburbId, addressId, status, comment, reservationId } = req.body;\n    let promises = [];\n    const users = await getUsersByAddressId(suburbId, addressId);\n    const metadata = {\n      sound: NOTIFICATION_DEFAULT_SOUND,\n      body: getReservationStatusMessage(status, comment),\n      title: \"Cambio en el estatus de tu reservación\",\n      data: {\n        redirect: { stack: \"CommonAreas\", screen: \"MyReservationsStack\" },\n        props: {\n          street: users[0].street,\n          streetNumber: users[0].streetNumber,\n          reservationId,\n        },\n      },\n    };\n    await notificationService.Save({\n      suburbId,\n      title: NOTIFICATION_UPDATE_RESERVATION,\n      body: metadata.body,\n      level: NOTIFICATION_INFO_LEVEL,\n      users: users.map((user) => user._id),\n      metadata,\n    });\n    users.forEach((user) => {\n      promises.push(\n        pushNotificationService.sendPushNotification(\n          user.pushTokens.map((t) => t.token),\n          {\n            ...metadata,\n          }\n        )\n      );\n    });\n\n    let sendNotifications = await Promise.all(promises);\n    res.status(200).json(sendNotifications);\n  } catch (err) {\n    console.log(\"notification error details: \", err);\n    res.status(400).json(err);\n  }\n};\n\nexports.sendNewSurveyNotification = async (req, res) => {\n  try {\n    const { suburbId, surveyName, expirationDate } = req.body;\n    const users = await getUsersBySuburb(suburbId);\n    if (users) {\n      const activeUsers = users.filter((user) => user.active);\n      const userPushTokensArrays = activeUsers.map((user) => user.pushTokens);\n      const rawUserPushTokens = [].concat.apply([], userPushTokensArrays);\n      const userPushTokens = rawUserPushTokens.reduce((acc, cur) => {\n        if (acc.indexOf(cur) === -1) {\n          acc.push(cur);\n        }\n        return acc;\n      }, []);\n      const metadata = {\n        sound: NOTIFICATION_DEFAULT_SOUND,\n        body: `Se ha creado la encuesta \"${surveyName}\", tienes hasta la siguiente fecha para participar: ${moment(\n          expirationDate\n        ).format(\"YYYY/MM/DD\")}`,\n        title: \"Nueva encuesta disponible\",\n        data: {\n          redirect: { stack: \"SurveysNeighbours\", screen: \"Survey\" },\n          props: {\n            surveyName,\n          },\n        },\n      };\n      await notificationService.Save({\n        suburbId,\n        title: NOTIFICATION_NEW_SURVEY,\n        body: metadata.body,\n        level: NOTIFICATION_INFO_LEVEL,\n        users: users.map((user) => user._id),\n        metadata,\n      });\n      const sendNotifications = pushNotificationService.sendPushNotification(\n        userPushTokens.map((pushToken) => pushToken.token),\n        {\n          ...metadata,\n        }\n      );\n      res.status(200).json(sendNotifications);\n    } else {\n      res.status(404).json({ message: \"users not found\" });\n    }\n  } catch (err) {\n    console.log(\"notification error details\", err);\n    res.status(500).json(err);\n  }\n};\n","const user = require(\"./userAdmin\");\n\nexports.signUp = (req, res, next) => {\n  if (\n    req.body.token === undefined ||\n    req.body.token === \"\" ||\n    req.body.token === null\n  ) {\n    res.send({\n      success: false,\n      message: \"Por favor intenta de nuevo (codigo recaptcha no encontrado).\",\n    });\n    return;\n  }\n  let {\n    email,\n    name,\n    lastName,\n    cellphone,\n    facebookId,\n    googleId,\n    appleId,\n    password,\n    token,\n  } = req.body;\n  if (facebookId) {\n    req.body = {\n      email,\n      name,\n      lastName,\n      loginName: facebookId,\n      cellphone,\n      facebookId,\n      googleId,\n      appleId,\n      password,\n      token,\n    };\n    user.saveFacebookUser(req, res, next);\n  } else if (googleId) {\n    req.body = {\n      email,\n      name,\n      lastName,\n      loginName: googleId,\n      cellphone,\n      facebookId,\n      googleId,\n      appleId,\n      password,\n      token,\n    };\n    user.saveGoogleUser(req, res, next);\n  } else if (appleId) {\n    req.body = {\n      email,\n      name,\n      lastName,\n      loginName: appleId,\n      cellphone,\n      facebookId,\n      googleId,\n      appleId,\n      password,\n      token,\n    };\n    user.saveAppleUser(req, res, next);\n  } else {\n    req.body = {\n      email,\n      name,\n      lastName,\n      loginName: email,\n      cellphone,\n      facebookId,\n      googleId,\n      appleId,\n      password,\n      token,\n    };\n    user.saveEmailUser(req, res, next);\n  }\n  //mandar llamar registro aqui\n  // if (googleId || facebookId)\n  //     axios({\n  //         method: 'post',\n  //         url: googleId ? `${process.env.ADMIN_API_HOST}/api/saveGoogleUser` : `${process.env.ADMIN_API_HOST}/api/saveFacebookUser`,\n  //         data: {\n  //             name,\n  //             lastName,\n  //             loginName: googleId ? googleId : facebookId,\n  //             email,\n  //             cellphone,\n  //             googleId,\n  //             facebookId,\n  //             token\n  //         }\n  //     }).then(resS => {\n  //         res.send({ success: true, message: resS.data.message || \"Ok\" });\n  //     })\n  //         .catch(err => {\n  //             let errMsg = err && err.response && err.response.data && err.response.data.message ? err.response.data.message : err.message || \"No se pudo guardar el usuario.\";\n  //             res.send({ success: false, message: errMsg });\n  //         });\n  // else {\n  //     axios({\n  //         method: 'post',\n  //         url: `${process.env.ADMIN_API_HOST}/api/saveEmailUser`,\n  //         data: {\n  //             name,\n  //             lastName,\n  //             loginName: email,\n  //             email,\n  //             cellphone,\n  //             password,\n  //             token\n  //         }\n  //     }).then(resS => {\n  //         res.send({ success: true, message: resS.data.message || \"Ok\" });\n  //     })\n  //         .catch(err => {\n  //             let errMsg = err && err.response && err.response.data && err.response.data.message ? err.response.data.message : err.message || \"No se pudo guardar el usuario.\";\n  //             res.send({ success: false, message: errMsg });\n  //         });\n  // }\n};\n","const User = require(\"../models/user\");\nconst viewPermissions = require(\"../logic/viewPermissions\");\nconst axios = require(\"axios\").default;\nconst validateRecaptcha = require(\"../logic/auth\").validateRecaptcha;\n\nconst validateActiveUser = (user) => {\n  return user.active;\n};\n\nconst validateUser = (userLogin, password, isTemporary = false) => {\n  return new Promise((resolve, reject) => {\n    User.getLogin(userLogin).then((login, err) => {\n      if (login) {\n        let validPass = login.validatePassword(password, isTemporary);\n        validPass.then(\n          (result) => {\n            //generate jwt token\n            let token = login.generateUserToken();\n            resolve({ success: true, message: token });\n          },\n          (err) => {\n            reject({\n              success: false,\n              message: err.message || \"La contraseña no es valida.\",\n            });\n          }\n        );\n      } else\n        reject({\n          succes: false,\n          message: \"El usuario no existe, o esta deshabilitado.\",\n        });\n    });\n  });\n};\n\nexports.internalAuth = async (req, res) => {\n  try {\n    const { user, password } = req.body;\n    const isTemporary = false;\n    const result = await validateUser(user, password, isTemporary);\n    res.status(200).json(result);\n  } catch (err) {\n    res.status(500).json({ success: false, message: err.message });\n  }\n};\n\nexports.checkAuth = async (req, res, next) => {\n  try {\n    //over here check the db to know if the auth is valid\n    let { user, password, captchaToken, isTemporary = false } = req.body;\n\n    let validCaptcha = await validateRecaptcha(captchaToken);\n    if (validCaptcha) {\n      let usr = await validateUser(user, password, isTemporary); //.then(\n\n      if (usr) {\n        if (usr.success) {\n          // var session = req.session;\n          // session.token = result.message;\n          // session.user = user;\n          let userData = (await User.getLogin(user)).toObject();\n\n          res.status(\"200\").json({\n            ...usr,\n            email: userData.email,\n            name: userData.name,\n            createdAt: userData.transtime,\n            id: userData._id.toString(),\n          });\n        } else\n          res.status(\"401\").json({ success: false, message: \"Unauthorized\" });\n      } else {\n        res.status(\"401\").json({ success: false, message: \"Unauthorized\" });\n      }\n    } else res.status(\"401\").json({ success: false, message: \"Unauthorized\" });\n  } catch (err) {\n    console.log(\"error\", err);\n    res.status(\"404\").json({ token: null, message: err });\n  }\n};\n\nexports.getTokenByFacebookId = async (req, res) => {\n  try {\n    let { id, captchaToken } = req.query;\n    //let validCaptcha = await validateRecaptcha(captchaToken);\n    //if (validCaptcha) {\n    let usr = await User.getUserByFacebookId(id);\n    if (usr) {\n      if (validateActiveUser(usr._doc)) {\n        let token = usr.generateUserToken();\n        res.status(\"200\").json({ token });\n      } else\n        res.status(\"401\").json({\n          token: null,\n          message:\n            \"Tu usuario esta desactivado, para mayor información contacta el administrador de tu fraccionamiento.\",\n        });\n    } else {\n      res.status(\"404\").json({ token: null });\n    }\n    //} else res.status(\"401\").json({ token: null });\n  } catch (err) {\n    console.log(\"error\", err);\n    res.status(\"404\").json({ token: null });\n  }\n};\n\nexports.getTokenByGoogleId = async (req, res) => {\n  try {\n    let { id, captchaToken } = req.query;\n    let validCaptcha = await validateRecaptcha(captchaToken);\n    if (validCaptcha) {\n      let usr = await User.getUserByGoogleId(id);\n      if (usr) {\n        if (validateActiveUser(usr._doc)) {\n          let token = usr.generateUserToken();\n          res.status(\"200\").json({ token });\n        } else\n          res.status(\"401\").json({\n            token: null,\n            message:\n              \"Tu usuario esta desactivado, para mayor información contacta el administrador de tu fraccionamiento.\",\n          });\n      } else {\n        res.status(\"404\").json({ token: null });\n      }\n    } else res.status(\"401\").json({ token: null });\n  } catch (err) {\n    console.log(\"error\", err);\n    res.status(\"404\").json({ token: null });\n  }\n};\n\nexports.getTokenByAppleId = async (req, res) => {\n  try {\n    let { id, captchaToken } = req.query;\n    let validCaptcha = await validateRecaptcha(captchaToken);\n    if (validCaptcha) {\n      let usr = await User.getUserByAppleId(id);\n      if (usr) {\n        if (validateActiveUser(usr._doc)) {\n          let token = usr.generateUserToken();\n          res.status(\"200\").json({ token });\n        } else\n          res.status(\"401\").json({\n            token: null,\n            message:\n              \"Tu usuario esta desactivado, para mayor información contacta el administrador de tu fraccionamiento.\",\n          });\n      } else {\n        res.status(\"404\").json({ token: null });\n      }\n    } else res.status(\"401\").json({ token: null });\n  } catch (err) {\n    console.log(\"error\", err);\n    res.status(\"404\").json({ token: null });\n  }\n};\n\nexports.isValidToken = (req, res, next) => {\n  let token = req.headers[\"authorization\"];\n  return new Promise((resolve, reject) => {\n    User.isValidToken(token).then(\n      (isValid) => {\n        if (isValid)\n          res\n            .status(\"200\")\n            .json({ valid: true, message: \"the token is valid\" });\n        else\n          res.status(\"401\")({\n            valid: false,\n            message: \"the token is not valid\",\n          });\n      },\n      (err) => res.status(\"500\")(err)\n    );\n  });\n};\n\nexports.validateTokenPath = (req, res, next) => {\n  let { token, user, path } = req.body;\n  //over here add logic to check if a path is valid for the given context (user-> userType and jwt token)\n  viewPermissions.permissionValid(path, token, user).then(\n    (result) => {\n      res.status(\"200\").json({ valid: true, message: \"ok :)\" });\n    },\n    (err) => {\n      res.status(\"401\").json(err);\n    }\n  );\n};\n\nexports.logOff = (req, res, next) => {\n  if (req.session)\n    req.session.destroy((err) => {\n      if (err)\n        res.status(\"500\").json({\n          success: false,\n          message:\n            err.message || \"An unknow error occurs while trying to log off.\",\n        });\n      res.status(\"200\").json({ success: true, message: \"session destroyed.\" });\n    });\n};\n","const suburbService = require(\"../logic/suburbService\");\nconst addressService = require(\"../logic/addressService\");\nconst userService = require(\"../logic/userService\");\nconst userTypes = require(\"../constants/types\").userTypes;\nconst moment = require(\"moment\");\nconst ObjectId = require(\"mongoose\").Types.ObjectId;\nconst validateRecaptcha = require(\"../logic/auth\").validateRecaptcha;\n\nexports.approveReject = async (req, res, next) => {\n  try {\n    let { suburbId, newStatus, details } = req.body;\n    let suburb = await suburbService.getSuburbById(suburbId);\n    let status = suburbService.getSuburbStatus(newStatus);\n    if (suburb && status) {\n      let addStatus = await suburbService.suburbAddStatus(suburbId, {\n        ...status,\n        details,\n        transtime: moment.utc(),\n      });\n      if (addStatus) {\n        if (status.status === \"approved\")\n          await userService.updateUser({\n            _id: suburb.userAdmins[0].id,\n            userType: userTypes.suburbAdmin,\n            transtime: moment.utc(),\n          });\n        res.status(200).json({\n          success: true,\n          message: `El estatus ha sido actualizado correctamente, el nuevo estatus es: \"${status.status}\"`,\n        });\n      }\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"El estatus no es valido o la colonia no existe\",\n      });\n  } catch (ex) {\n    res.status(400).json({\n      success: false,\n      message: ex.message || \"No se pudo procesar aprobar/rechazar la colonia.\",\n    });\n  }\n};\n\nexports.getSuburbByAdminId = (req, res, next) => {\n  let userId = req.query.id;\n  suburbService.getSuburbByAdminUser(userId).then(\n    (result) => {\n      res.status(\"200\").json(result);\n    },\n    (err) => {\n      res.status(400).json({\n        success: false,\n        message:\n          err.message || \"No se pudo obtener la informacion de la colonia.\",\n      });\n    }\n  );\n};\n\nexports.getSuburbById = (req, res, next) => {\n  let suburbId = req.query.suburbId;\n  suburbService.getSuburbById(suburbId).then(\n    (result) => {\n      res.status(200).json(result);\n    },\n    (err) => {\n      res.status(400).json({\n        success: false,\n        message: err.message || \"no se encontro la colonia\",\n      });\n    }\n  );\n};\n\nexports.addSuburbInvite = (req, res, next) => {\n  let { suburbId, name, street, streetNumber, userType } = req.body;\n  suburbService\n    .addSuburbInvite(suburbId, name, street, streetNumber, userType)\n    .then(\n      (result) => {\n        res.status(200).json(result);\n      },\n      (err) => {\n        res.status(500).json({\n          success: false,\n          message:\n            err.message || \"No se pudo generar la invitacion para el usuario.\",\n        });\n      }\n    );\n};\n\nexports.getSuburbInvite = async (req, res, next) => {\n  try {\n    let { code, captchaToken } = req.query;\n    let invite = await suburbService.getSuburbInvite(code);\n    let validCaptcha = await validateRecaptcha(captchaToken);\n    if (validCaptcha) {\n      res.status(200).json(invite);\n    } else res.status(401).json({ success: false, message: \"token invalido\" });\n  } catch (err) {\n    res.status(500).json({\n      success: false,\n      message: err.message || \"No se pudo obtener la invitacion.\",\n    });\n  }\n};\n\nexports.getStreets = (req, res) => {\n  let suburbId = req.query.suburbId;\n  if (suburbId) {\n    userService.getUsersBySuburb(suburbId).then(\n      (users) => {\n        let streets = users.map((usr) => usr.street);\n        const distinctStreets = [...new Set(streets)];\n        res\n          .status(200)\n          .json(\n            distinctStreets\n              .filter((u) => typeof u !== \"undefined\")\n              .map((s) => ({ street: s }))\n          );\n      },\n      (err) => {\n        res.status(500).json({\n          success: false,\n          message:\n            err.message ||\n            \"No se pudieron obtener las calles del fraccionamiento\",\n        });\n      }\n    );\n  } else\n    res.status(400).json({\n      success: false,\n      message: \"Por favor indique el fraccionamiento.\",\n    });\n};\n\nexports.getStreetNumbers = (req, res) => {\n  let { suburbId, street } = req.query;\n  if (suburbId) {\n    userService.getUsersBySuburbStreet(suburbId, street).then(\n      (users) => {\n        let streetNumbers = users.map((usr) => usr.streetNumber);\n        const distinctStreetNumbers = [...new Set(streetNumbers)];\n        res\n          .status(200)\n          .json(\n            distinctStreetNumbers\n              .filter((u) => typeof u !== \"undefined\")\n              .map((s) => ({ streetNumber: s }))\n          );\n      },\n      (err) => {\n        res.status(500).json({\n          success: false,\n          message:\n            err.message || \"No se pudieron obtener los numeros de la calle\",\n        });\n      }\n    );\n  } else\n    res.status(400).json({\n      success: false,\n      message: \"Por favor indique el fraccionamiento.\",\n    });\n};\n\nexports.saveSuburbConfig = (req, res) => {\n  let { suburbId, config } = req.body;\n  if (ObjectId.isValid(suburbId)) {\n    suburbService\n      .saveSuburbConfig(suburbId, config)\n      .then((sub) => {\n        res.status(200).json({\n          success: true,\n          message:\n            \"La configuración del fraccionamiento fue actualizada correctamente.\",\n        });\n      })\n      .catch((err) => {\n        res.status(500).json({\n          success: false,\n          message: err.message || \"No se pudo actualizar la configuracion\",\n        });\n      });\n  } else\n    res.status(400).json({\n      success: false,\n      message: \"Por favor indique el fraccionamiento.\",\n    });\n};\n\nexports.getSuburbConfig = (req, res) => {\n  let { suburbId } = req.query;\n  if (ObjectId.isValid(suburbId)) {\n    suburbService\n      .getSuburbConfig(suburbId)\n      .then((config) => {\n        res.status(200).json({ ...config });\n      })\n      .catch((err) => {\n        res.status(500).json({\n          success: false,\n          message: err.message || \"No se pudo obtener la configuracion\",\n        });\n      });\n  } else\n    res.status(400).json({\n      success: false,\n      message: \"Por favor indique el fraccionamiento.\",\n    });\n};\n\nexports.saveSuburbStreet = async (req, res) => {\n  try {\n    let { suburbId, street } = req.body;\n    if (ObjectId.isValid(suburbId)) {\n      let sub = await addressService.saveSuburbStreet(suburbId, street);\n\n      res.status(200).json({\n        success: true,\n        message: \"La calle fue guardada correctamente.\",\n      });\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      success: false,\n      message: err.message || \"No se pudo guardar la calle\",\n    });\n  }\n};\n\nexports.getSuburbStreets = async (req, res) => {\n  try {\n    let { suburbId } = req.query;\n    if (ObjectId.isValid(suburbId)) {\n      let streets = await addressService.getSuburbStreets(suburbId);\n      res.status(200).json({ ...streets });\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      success: false,\n      message:\n        err.message || \"No se pudieron obtener las calles del fraccionamiento\",\n    });\n  }\n};\n\nexports.getUsersBySuburb = async (req, res) => {\n  try {\n    let { suburbId } = req.query;\n    if (ObjectId.isValid(suburbId)) {\n      let users = await suburbService.getUsersBySuburb(suburbId);\n      res.status(200).json(users);\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      message:\n        err.message || \"An unknown error occurs while trying to get the users.\",\n    });\n  }\n};\n\nexports.migrateAddresses = async (req, res) => {\n  try {\n    let { suburbId } = req.query;\n    if (ObjectId.isValid(suburbId)) {\n      let test = await addressService.migrateAddresses(suburbId);\n      //let test = await addressService.getSuburbStreets(suburbId);\n      res.status(200).json(test);\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      message:\n        err.message || \"An unknown error occurs while trying to get the users.\",\n    });\n  }\n};\n\nexports.getAddressesBySuburbId = async (req, res) => {\n  try {\n    let { suburbId } = req.query;\n    if (ObjectId.isValid(suburbId)) {\n      let test = await addressService.getAddressesBySuburbId(suburbId);\n      res.status(200).json(test);\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      message:\n        err.message || \"An unknown error occurs while trying to get the users.\",\n    });\n  }\n};\n\nexports.getAddressesWithUsersStates = async (req, res) => {\n  try {\n    const { suburbId } = req.query;\n    if (ObjectId.isValid(suburbId)) {\n      const addresses = await addressService.getAddressesBySuburbId(suburbId);\n      const users = await userService.getUsersBySuburb(suburbId);\n\n      const addressesInfo = addresses.map((a) => {\n        let usersAddress = users.filter((u) =>\n          u.addressId ? u.addressId.toString() === a._id.toString() : false\n        );\n        return {\n          address: { ...a },\n          users: usersAddress.map((ua) => ({\n            id: ua._id.toString(),\n            name: ua.name,\n            active: ua.active,\n            limited: typeof ua.limited !== \"undefined\" ? ua.limited : false,\n          })),\n        };\n      });\n\n      res.status(200).json(addressesInfo);\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      message:\n        err.message || \"An unknown error occurs while trying to get the users.\",\n    });\n  }\n};\n\nexports.setLimitedUsersByAddress = async (req, res) => {\n  try {\n    const { suburbId, addressId, limited } = req.body;\n    if (ObjectId.isValid(suburbId)) {\n      const users = await userService.getUsersByAddressId(suburbId, addressId);\n\n      let proms = [];\n      users.forEach((u) => {\n        proms.push(userService.changeLimited(u._id.toString(), limited));\n      });\n      await Promise.all(proms);\n      res.status(200).json(users.map((u) => ({ ...u, limited })));\n    } else\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n  } catch (err) {\n    res.status(500).json({\n      message:\n        err.message ||\n        \"An unknown error occurs while trying to update the users.\",\n    });\n  }\n};\n\nexports.getSuburbAutomationInfo = async (req, res) => {\n  try {\n    const { suburbId } = req.query;\n    if (ObjectId.isValid(suburbId)) {\n      const addresses = await addressService.getAddressesBySuburbId(suburbId);\n      const users = await userService.getUsersBySuburb(suburbId);\n      const addressesInfo = addresses.map((a) => {\n        let usersAddress = users.filter((u) =>\n          u.addressId ? u.addressId.toString() === a._id.toString() : false\n        );\n        return {\n          address: { ...a },\n          status: {\n            active: usersAddress.some((u) => u.active),\n            limited: usersAddress\n              .filter((u) => u.active)\n              .some((u) =>\n                typeof u.limited !== \"undefined\" ? u.limited : false\n              ),\n            rfids: usersAddress.map((u) => u.rfids || []).flat(),\n          },\n        };\n      });\n\n      res.status(200).json(addressesInfo);\n    } else {\n      res.status(400).json({\n        success: false,\n        message: \"Por favor indique el fraccionamiento.\",\n      });\n    }\n  } catch (err) {\n    res.status(500).json({\n      message:\n        err.message ||\n        \"An unknown error occurs while trying to get automation info.\",\n    });\n  }\n};\n","const userService = require(\"../logic/userService\");\nconst userTypes = require(\"../constants/types\").userTypes;\nconst SuburbInvite = require(\"../models/suburbInvite\");\nconst validateRecaptcha = require(\"../logic/auth\").validateRecaptcha;\nconst handleFile = require(\"../controllers/handleFile\");\nexports.saveGoogleUser = (req, res, next) => {\n  //get user data here\n  let {\n    name,\n    lastName,\n    loginName,\n    email,\n    password,\n    cellphone,\n    facebookId,\n    googleId,\n    appleId,\n    token,\n  } = req.body;\n  //validate the captcha here\n  userService.validateRecaptcha(token).then(\n    (resV) => {\n      //save the user here\n      userService\n        .saveUser({\n          name,\n          lastName,\n          loginName,\n          email,\n          password,\n          cellphone,\n          facebookId,\n          googleId,\n          appleId,\n          userConfirmed: true,\n        })\n        .then(\n          (resSave) => {\n            res.status(\"200\").json({\n              success: true,\n              message: res.message || \"Has sido registrado correctamente.\",\n            });\n          },\n          (err) => {\n            res\n              .status(\"400\")\n              .json({ success: false, message: err.message || \"Bad request.\" });\n          }\n        );\n    },\n    (err) => {\n      res\n        .status(\"400\")\n        .json({ success: false, message: err.message || \"Bad request.\" });\n    }\n  );\n};\n\nexports.saveFacebookUser = (req, res, next) => {\n  let {\n    name,\n    lastName,\n    loginName,\n    email,\n    password,\n    cellphone,\n    facebookId,\n    googleId,\n    appleId,\n    token,\n  } = req.body;\n  //validate the captcha here\n  userService.validateRecaptcha(token).then(\n    (resV) => {\n      //save the user here\n      userService\n        .saveUser({\n          name,\n          lastName,\n          loginName,\n          email,\n          password,\n          cellphone,\n          facebookId,\n          appleId,\n          googleId,\n          userConfirmed: true,\n        })\n        .then(\n          (resSave) => {\n            res.status(\"200\").json({\n              success: true,\n              message: res.message || \"Has sido registrado correctamente.\",\n            });\n          },\n          (err) => {\n            res\n              .status(\"400\")\n              .json({ success: false, message: err.message || \"Bad request.\" });\n          }\n        );\n    },\n    (err) => {\n      res\n        .status(\"400\")\n        .json({ success: false, message: err.message || \"Bad request.\" });\n    }\n  );\n};\n\nexports.saveAppleUser = (req, res, next) => {\n  let {\n    name,\n    lastName,\n    loginName,\n    email,\n    password,\n    cellphone,\n    facebookId,\n    googleId,\n    appleId,\n    token,\n  } = req.body;\n  //validate the captcha here\n  userService.validateRecaptcha(token).then(\n    (resV) => {\n      //save the user here\n      userService\n        .saveUser({\n          name,\n          lastName,\n          loginName,\n          email,\n          password,\n          cellphone,\n          facebookId,\n          googleId,\n          appleId,\n          userConfirmed: true,\n        })\n        .then(\n          (resSave) => {\n            res.status(\"200\").json({\n              success: true,\n              message: res.message || \"Has sido registrado correctamente.\",\n            });\n          },\n          (err) => {\n            res\n              .status(\"400\")\n              .json({ success: false, message: err.message || \"Bad request.\" });\n          }\n        );\n    },\n    (err) => {\n      res\n        .status(\"400\")\n        .json({ success: false, message: err.message || \"Bad request.\" });\n    }\n  );\n};\n\nexports.updateUserPicture = (req, res) => {\n  let { userId, photoUrl } = req.body;\n  userService\n    .updateUserPicture(userId, photoUrl)\n    .then((updated) => {\n      res\n        .status(\"200\")\n        .json({ success: true, message: \"profile picture updated.\" });\n    })\n    .catch((err) => {\n      res\n        .status(\"400\")\n        .json({ success: false, message: err.message || \"Bad request.\" });\n    });\n};\n\nexports.saveEmailUser = (req, res, next) => {\n  let {\n    name,\n    lastName,\n    loginName,\n    email,\n    password,\n    cellphone,\n    facebookId,\n    googleId,\n    appleId,\n    token,\n  } = req.body;\n  //validate the captcha here\n  userService.validateRecaptcha(token).then(\n    (resV) => {\n      //if the user is registered through email credentials the user needs to be confirmed through an email\n      userService\n        .saveUserWithPassword({\n          name,\n          lastName,\n          loginName,\n          email,\n          password: password,\n          cellphone,\n          facebookId,\n          googleId,\n          appleId,\n          userConfirmed: false,\n        })\n        .then(\n          (resSave) => {\n            res.status(\"200\").json({\n              success: true,\n              message: res.message || \"Has sido registrado correctamente.\",\n            });\n          },\n          (err) => {\n            res\n              .status(\"400\")\n              .json({ success: false, message: err.message || \"Bad request.\" });\n          }\n        );\n    },\n    (err) => {\n      res\n        .status(\"400\")\n        .json({ success: false, message: err.message || \"Bad request.\" });\n    }\n  );\n};\n\nexports.generateTempPassword = async (req, res) => {\n  try {\n    let { email, captchaToken } = req.body;\n    let validCaptcha = await validateRecaptcha(captchaToken);\n\n    if (validCaptcha) {\n      let tempPass = await userService.updateTempPassword(email);\n\n      if (tempPass) {\n        let sendMail = await handleFile.sendTempPassEmail(email, tempPass);\n\n        res.status(\"200\").json({\n          message: \"Se ha enviado el correo correctamente.\",\n        });\n      } else {\n        res.status(\"401\").json({\n          message: \"Hubo un problema al enviar el correo.\",\n        });\n      }\n    } else\n      res.status(\"401\").json({\n        message: \"Hubo un problema al enviar el correo.\",\n      });\n  } catch (err) {\n    console.log(\"error\", err);\n    res.status(\"404\").json({\n      message: err.message || \"Hubo un problema al enviar el correo.\",\n    });\n  }\n};\n\nexports.createUserByType = async (req, res, next) => {\n  try {\n    const { name, lastName, loginName, email, cellphone } = req.body;\n    const userType = userTypes[req.params.userType];\n    if (!userType) {\n      res.status(\"400\").json({ success: false, message: \"Bad request.\" });\n      return;\n    }\n    const result = await userService.saveUser({\n      name,\n      lastName,\n      loginName,\n      email,\n      cellphone,\n      userConfirmed: false,\n      userType,\n    });\n    res.status(\"200\").json({\n      success: true,\n      message: result.message || \"Has sido registrado correctamente.\",\n    });\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.saveUserBySuburbId = async (req, res) => {\n  try {\n    let {\n      name,\n      lastName,\n      loginName,\n      email,\n      password,\n      cellphone,\n      facebookId,\n      googleId,\n      appleId,\n      photoUrl,\n      suburbId,\n      street,\n      streetNumber,\n      code,\n      userType,\n      captchaToken, // add captcha here\n    } = req.body;\n    let validCaptcha = await validateRecaptcha(captchaToken);\n    if (validCaptcha) {\n      let getcode = await SuburbInvite.GetInviteByCode(code);\n      let save = null;\n      if (password && password.trim() !== \"\") {\n        save = await userService.saveUserWithPassword({\n          name,\n          lastName,\n          loginName,\n          email,\n          password,\n          cellphone,\n          photoUrl,\n          facebookId,\n          googleId,\n          appleId,\n          suburb: suburbId,\n          street,\n          streetNumber,\n          userType,\n          userConfirmed: false, // if the user is an email user the user needs to confirm\n        });\n      } else {\n        save = await userService.saveUser({\n          name,\n          lastName,\n          loginName,\n          email,\n          password,\n          cellphone,\n          photoUrl,\n          facebookId,\n          googleId,\n          appleId,\n          suburb: suburbId,\n          street,\n          streetNumber,\n          userType,\n          userConfirmed: true,\n        });\n      }\n      let updateCode = await SuburbInvite.UpdateSuburbInviteUsed(\n        code,\n        save.userData._doc._id.toString()\n      );\n\n      res.status(\"200\").json({\n        success: true,\n        message: updateCode.message || \"Has sido registrado correctamente.\",\n      });\n    } else res.status(\"401\").json({ success: false, message: \"invalid token\" });\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getUserByType = async (req, res, next) => {\n  try {\n    const userType = userTypes[req.params.userType];\n    if (!userType) {\n      res.status(\"400\").json({ success: false, message: \"Bad request.\" });\n      return;\n    }\n    const result = await userService.getUserByType(userType);\n    res.status(\"200\").json({ success: true, data: result });\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getUserInfo = async (req, res, next) => {\n  try {\n    userService.getUserByToken(req.query.token).then(\n      (result) => {\n        res.status(\"200\").json(result);\n      },\n      (err) => {\n        res\n          .status(\"400\")\n          .json({ success: false, message: err.message || \"Bad request.\" });\n      }\n    );\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getUserById = async (req, res, next) => {\n  try {\n    let result = await userService.getUserById(req.query.id);\n    res.status(\"200\").json(result);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getUserFavs = async (req, res, next) => {\n  try {\n    let userFavs = await userService.getUserFavorites(req.query.userId);\n    res.status(\"200\").json(userFavs);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.addUserFavs = async (req, res, next) => {\n  try {\n    let { favs, userId } = req.body;\n    let userFavs = await userService.saveUserFavorites(userId, favs);\n    res.status(\"200\").json(userFavs);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.removeUserFavs = async (req, res, next) => {\n  try {\n    let { favs, userId } = req.body;\n    let userFavs = await userService.removeUserFavorites(userId, favs);\n    res.status(\"200\").json(userFavs);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.addUserPushToken = async (req, res, next) => {\n  try {\n    let { pushToken, userId } = req.body;\n    let pushTokens = await userService.addUserPushToken(userId, pushToken);\n    res.status(\"200\").json(pushTokens);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getUsersByAddress = async (req, res) => {\n  try {\n    let { suburbId, street, streetNumber } = req.query;\n    let users = await userService.getUsersByAddress(\n      suburbId,\n      street,\n      streetNumber\n    );\n    res.status(\"200\").json(users);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.deleteUserInfo = async (req, res, next) => {\n  try {\n    let { userId } = req.body;\n    let removeUserInfo = await userService.deleteUserInfo(userId);\n    res.status(\"200\").json(removeUserInfo);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getSignedUserTerms = async (req, res) => {\n  try {\n    let { userId } = req.query;\n    let signedUserTerms = await userService.getSignedUserTerms(userId);\n    res.status(\"200\").json(signedUserTerms);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.isPasswordTemp = async (req, res) => {\n  try {\n    let { user, password } = req.query;\n    let buff = Buffer.from(password, \"base64\");\n    let decodedPassword = buff.toString(\"utf-8\");\n    let isPassTemp = await userService.isPasswordTemp(user, decodedPassword);\n    res.status(\"200\").json(isPassTemp);\n  } catch (err) {\n    res.status(\"400\").json({\n      success: false,\n      message: err.message || \"Bad request.\",\n    });\n  }\n};\n\nexports.updatePassword = async (req, res) => {\n  try {\n    let { userId, password, tempPassword } = req.body;\n    let buff = Buffer.from(password, \"base64\");\n    let decodedPassword = buff.toString(\"utf-8\");\n\n    let buff2 = Buffer.from(tempPassword, \"base64\");\n    let decodedTempPassword = buff2.toString(\"utf-8\");\n\n    let isPassTemp = await userService.updatePassword(\n      userId,\n      decodedPassword,\n      decodedTempPassword\n    );\n    res.status(\"200\").json(isPassTemp);\n  } catch (err) {\n    res.status(\"400\").json({\n      success: false,\n      message: err.message || \"Bad request.\",\n    });\n  }\n};\n\nexports.updateCurrentPassword = async (req, res) => {\n  try {\n    let { userId, currentPassword, newPassword } = req.body;\n    currentPassword = Buffer.from(currentPassword, \"base64\").toString(\"utf-8\");\n    newPassword = Buffer.from(newPassword, \"base64\").toString(\"utf-8\");\n    let result = await userService.updateCurrentPassword(\n      userId,\n      currentPassword,\n      newPassword\n    );\n    res.status(\"200\").json(result);\n  } catch (err) {\n    res.status(\"400\").json({\n      success: false,\n      message: err.message || \"Bad request.\",\n    });\n  }\n};\n\nexports.signUserTerms = async (req, res) => {\n  try {\n    let { userId, termsVersion } = req.body;\n    let update = await userService.signUserTerms(userId, termsVersion);\n    res.status(\"200\").json(update);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.updateUserType = async (req, res) => {\n  try {\n    let { userId, userType } = req.body;\n    let update = await userService.updateUserType(userId, userType);\n    res.status(\"200\").json(update);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.enableDisableUser = async (req, res) => {\n  try {\n    let { userId, enabled } = req.body;\n    let update = await userService.enableDisableUser(userId, enabled);\n    res.status(\"200\").json(update);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.changeLimited = async (req, res) => {\n  try {\n    let { userId, limited } = req.body;\n    let update = await userService.changeLimited(userId, limited);\n    res.status(\"200\").json(update);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.getIfUserIsLimited = async (req, res) => {\n  try {\n    let { userId } = req.query;\n    let isLimited = await userService.getIfUserIsLimited(userId);\n    res.status(\"200\").json(isLimited);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.addUserRfid = async (req, res) => {\n  try {\n    let { userId, rfid } = req.body;\n    let update = await userService.addUserRfid(userId, rfid);\n    res.status(\"200\").json(update);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n\nexports.removeUserRfid = async (req, res) => {\n  try {\n    let { userId, rfid } = req.body;\n    let update = await userService.removeUserRfid(userId, rfid);\n    res.status(\"200\").json(update);\n  } catch (err) {\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n","const {\n  ComputerVisionClient,\n} = require(\"@azure/cognitiveservices-computervision\");\nconst { CognitiveServicesCredentials } = require(\"@azure/ms-rest-azure-js\");\nconst computerVisionKey = process.env.VISION_KEY;\nconst computerVisionEndPoint = process.env.VISION_ENDPOINT;\n\nexports.processOCR = async (req, res) => {\n  try {\n    let data = req.files[0];\n    const cognitiveServiceCredentials = new CognitiveServicesCredentials(\n      computerVisionKey\n    );\n    const client = new ComputerVisionClient(\n      cognitiveServiceCredentials,\n      computerVisionEndPoint\n    );\n\n    const options = {\n      //   maxCandidates: 5,\n      //   language: \"en\",\n    };\n    let response = await client.recognizePrintedTextInStream(\n      true,\n      data.buffer,\n      options\n    );\n    res.status(\"200\").json(response);\n  } catch (err) {\n    console.error(err);\n    res\n      .status(\"400\")\n      .json({ success: false, message: err.message || \"Bad request.\" });\n  }\n};\n","const Address = require(\"../models/Address\");\nconst Suburb = require(\"../models/suburb\");\nconst User = require(\"../models/user\");\n\nconst migrateAddresses = async (suburbId) => {\n  try {\n    let suburbAddresses = await Suburb.GetSuburbStreets(suburbId);\n    let promises = [];\n    suburbAddresses.streets.forEach((address) => {\n      promises.push(\n        Address.SaveSuburbStreet(suburbId, address.street, address.numbers)\n      );\n    });\n    let savedAddresses = await Promise.all(promises);\n    let suburbUsers = await User.getUsersBySuburb(suburbId);\n    console.log(suburbUsers);\n    let updateUserPromises = [];\n    savedAddresses = [].concat(...savedAddresses);\n    suburbUsers.forEach((user) => {\n      let address = savedAddresses.filter(\n        (a) => a.name === user.street && a.number === user.streetNumber\n      );\n      address = address.length > 0 ? address[0]._id.toString() : \"\";\n      if (address)\n        updateUserPromises.push(\n          User.updateUser({\n            ...user,\n            _id: user._id.toString(),\n            addressId: address,\n          })\n        );\n    });\n    let saveUsers = await Promise.all(updateUserPromises);\n    return savedAddresses;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getSuburbStreets = async (suburbId) => {\n  try {\n    return await Address.GetStreetsBySuburb(suburbId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst saveSuburbStreet = async (suburbId, street) => {\n  try {\n    return await Address.SaveSuburbStreet(\n      suburbId,\n      street.street,\n      street.numbers\n    );\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getAddressByNameAndNumber = async (streetName, number) => {\n  try {\n    return await Address.GetAddressByNameAndNumber(streetName, number);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getAddressesBySuburbId = async (suburbId) => {\n  try {\n    return await Address.GetAddressesBySuburb(suburbId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nmodule.exports = {\n  migrateAddresses,\n  getSuburbStreets,\n  saveSuburbStreet,\n  getAddressByNameAndNumber,\n  getAddressesBySuburbId,\n};\n","const User = require(\"../models/user\");\nconst userTypes = require(\"../constants/types\").userTypes;\nconst axios = require(\"axios\").default;\n\nconst openApi = [\n  \"/api/checkAuth\",\n  \"/api/auth/fbtoken\",\n  \"/api/auth/googletoken\",\n  \"/api/auth/appletoken\",\n  \"/api/saveGoogleUser\",\n  \"/api/saveFacebookUser\",\n  \"/api/saveAppleUser\",\n  \"/api/saveEmailUser\",\n  \"/api/generateTempPassword\",\n  \"/api/saveUserBySuburb\",\n  \"/api/signUp\",\n  \"/api/validateTokenPath\",\n  \"/api/cp/getCPInfo\",\n  \"/api/file/upload\",\n  \"/api/suburb/getInviteByCode\",\n  \"/api/notification/test\",\n  \"/api/suburb/getAllStreets\",\n  \"/api/suburb/getConfig\", //remover esta api de esta lista\n  \"/api/userInfo/isPasswordTemp\",\n  // \"/api/notification/newPayment\", // add api key for this kind of requests\n  // \"/api/notification/approveRejectPayment\", // add api key for this kind of requests\n  // \"/api/suburb/getAddressesBySuburbId\", // add api key for this kind of requests\n];\n\nconst apiWithKey = [\n  \"/api/notification/newPayment\", // add api key for this kind of requests\n  \"/api/notification/approveRejectPayment\", // add api key for this kind of requests\n  \"/api/suburb/getAddressesBySuburbId\", // add api key for this kind of requests\n  \"/api/suburb/getSuburbAutomationInfo\",\n  \"/api/auth/internal/auth\",\n  \"/api/notification/newReservation\",\n  \"/api/notification/approveRejectReservation\",\n  \"/api/notification/newSurvey\",\n];\n\nconst protectedApi = [\"/api/suburb/approveReject\"];\n\nexports.Auth = class Auth {\n  validateToken(token) {\n    let user = User;\n\n    let def = user.isValidToken(token);\n    return new Promise(\n      (resolve, reject) => {\n        def.then(function (isValid) {\n          if (isValid) resolve({ valid: true, message: \"the token is valid\" });\n          else\n            resolve({\n              valid: false,\n              message: \"the token is not valid\",\n            });\n        });\n      },\n      (err) => reject({ valid: false, message: \"The token cannot be checked.\" })\n    );\n  }\n\n  validateAdminUser(token) {\n    let user = User;\n    let getPayload = user.getTokenPayload(token);\n    return new Promise(\n      (resolve, reject) => {\n        getPayload.then((payload) => {\n          if (payload.userType !== userTypes.admin)\n            reject({\n              valid: false,\n              message:\n                \"The user does not have permissions to execute this api.\",\n            });\n          else resolve({ valid: true, message: \"Ok\" });\n        });\n      },\n      (err) => {\n        console.log(err);\n        reject({\n          valid: false,\n          message: \"The user does not have permissions to execute this api.\",\n        });\n      }\n    );\n  }\n\n  isOpenApi(apiPath) {\n    return openApi.indexOf(apiPath) !== -1;\n  }\n\n  isApiWithKey(apiPath) {\n    return apiWithKey.indexOf(apiPath) !== -1;\n  }\n\n  isProtectedApi(apiPath) {\n    return protectedApi.indexOf(apiPath) !== -1 ? true : false;\n  }\n\n  validateApiRequest(apiPath, token, apiKey) {\n    if (this.isOpenApi(apiPath))\n      return new Promise((resolve) =>\n        resolve({ valid: true, message: \"the api is open.\" })\n      );\n    else if (this.isApiWithKey(apiPath)) {\n      // check if the api key is valid\n      return new Promise((resolve) => {\n        process.env.PROTECTED_API_KEY === apiKey\n          ? resolve({ valid: true, message: \"the api key is ok\" })\n          : reject({ valid: false, message: \"unknown api key\" });\n      });\n    } else if (this.isProtectedApi(apiPath)) {\n      return new Promise((resolve, reject) => {\n        this.validateAdminUser(token)\n          .then((res) => {\n            let validateToken = this.validateToken(token);\n            validateToken\n              .then((res) => resolve(res))\n              .catch((err) => reject(err));\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      });\n    } else {\n      return this.validateToken(token);\n    }\n  }\n};\n\nexports.validateRecaptcha = async (token) => {\n  try {\n    const secretKey = process.env.RECAPTCHA_SECRET;\n    const verificationURL = `https://www.google.com/recaptcha/api/siteverify?secret=${secretKey}&response=${token}`;\n    let response = await axios.post(\n      verificationURL,\n      {},\n      {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n        },\n      }\n    );\n\n    let captchaResult = response.data;\n    return captchaResult.success;\n  } catch (err) {\n    throw err;\n  }\n};\n","const ApiBlobUrl = process.env.API_BLOB_URL;\nconst ApiBlobKey = process.env.API_BLOB_KEY;\n\nconst { post } = require(\"../api/ApiService\")\n\n\nconst UploadBlob = async (files, container) => {\n  try {\n    return await post(\n      `${ApiBlobUrl}/UploadFile2${ApiBlobKey ? `?code=${ApiBlobKey}` : \"\"}`,\n      { files, container }\n    );\n  } catch (err) {\n    throw err;\n  }\n};\n\nmodule.exports = {\n  UploadBlob,\n};","const User = require(\"../models/user\");\nconst menus = require(\"../constants/menusConfig\").menus;\n\n/**\n * Get menus by logged user\n */\nexports.getMenusByUser = async (userToken) => {\n  return new Promise((resolve, reject) => {\n    let getPayload = User.getTokenPayload(userToken);\n    getPayload.then(payload => {\n      const { userType, loginName } = payload;\n\n      let userMenus = menus.filter(menu => {\n        let types = menu.validUserTypes.filter(g => g.toLowerCase() === userType.toLowerCase());\n        return types.length > 0;\n      }).map(item => ({ name: item.name, path: item.path, visible: item.visible, icon: item.icon, order: item.order }));\n\n\n      resolve(userMenus);\n    }, errP => {\n      reject({ valid: false, message: 'The token is not allowed' });\n    });\n  });\n};","const notificationModel = require(\"../models/Notification\");\nconst { getUsersBySuburb } = require(\"./userService\");\nconst { sendPushNotification } = require(\"./pushNotificationService\");\nconst moment = require(\"moment\");\n\nconst NOTIFICATION_DEFAULT_SOUND = \"default\";\n\nconst Save = async ({\n  suburbId,\n  title,\n  body,\n  level,\n  attachments,\n  users,\n  metadata,\n}) => {\n  try {\n    return await notificationModel.Save({\n      suburbId,\n      title,\n      body,\n      level,\n      attachments,\n      users,\n      metadata,\n      transtime: moment.utc(),\n    });\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst SendSuburbNotification = async ({\n  suburbId,\n  title,\n  body,\n  level,\n  attachments,\n}) => {\n  try {\n    const suburbUsers = (await getUsersBySuburb(suburbId)).filter(\n      (user) => user.active\n    );\n    const userPushTokensArrays = suburbUsers.map((user) => user.pushTokens);\n    const rawUserPushTokens = [].concat.apply([], userPushTokensArrays);\n    const userPushTokens = rawUserPushTokens.reduce((acc, cur) => {\n      if (acc.indexOf(cur) === -1) {\n        acc.push(cur);\n      }\n      return acc;\n    }, []);\n    return await sendPushNotification(\n      userPushTokens.map((pushToken) => pushToken.token),\n      {\n        sound: NOTIFICATION_DEFAULT_SOUND,\n        body,\n        title,\n        data: {\n          level,\n          attachments,\n        },\n      }\n    );\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst Delete = async (notificationId) => {\n  try {\n    return await notificationModel.Delete(notificationId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst GetById = async (notificationId) => {\n  try {\n    return await notificationModel.GetById(notificationId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst GetBySuburbId = async (suburbId, minDate) => {\n  try {\n    return await notificationModel.GetBySuburbId(suburbId, minDate);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst GetByUserId = async (suburbId, userId, minDate) => {\n  try {\n    const suburbNotifications = await notificationModel.GetBySuburbId(\n      suburbId,\n      minDate\n    );\n    const userNotifications = await notificationModel.GetByUserId(\n      suburbId,\n      userId,\n      minDate\n    );\n    const allNotifications = [...suburbNotifications, ...userNotifications];\n    const notificationsWithoutUsers = allNotifications.map(\n      ({ users, ...rest }) => ({ ...rest })\n    );\n    return notificationsWithoutUsers.sort((a, b) => b.transtime - a.transtime);\n  } catch (err) {\n    throw err;\n  }\n};\n\nmodule.exports = {\n  Save,\n  Delete,\n  GetById,\n  GetBySuburbId,\n  GetByUserId,\n  SendSuburbNotification,\n};\n","const PostalCode = require(\"../models/postalCode\");\n\n\nexports.getCPInfo = async (postalCode) => {\n    return new Promise((resolve, reject) => {\n        if (postalCode.length > 2) {\n            getInfo = PostalCode.getCPInfo(postalCode);\n            getInfo.then(cp => {\n                resolve(cp);\n            }, err => {\n                reject({ valid: false, message: 'No se pudo obtener la informaion del codigo postal.' });\n            });\n        }\n        else {\n            reject({ valid: false, message: 'La longitud del codigo postal no es valida.' });\n        }\n    });\n}","const Expo = require(\"expo-server-sdk\").Expo;\n\nconst expo = new Expo();\n\nconst DIFFERENT_PROJECTS_ERROR_MESSAGE = \"PUSH_TOO_MANY_EXPERIENCE_IDS\";\n\nconst getMessagesBatches = (pushTokens, message) => {\n  const validTokens = pushTokens.reduce((tokens, currentToken) => {\n    if (Expo.isExpoPushToken(currentToken)) {\n      tokens.push(currentToken);\n    }\n    return tokens;\n  }, []);\n  const messages = validTokens.map((token) => ({ ...message, to: token }));\n  return expo.chunkPushNotifications(messages);\n};\n\nconst sendExpoNotification = async (chunks) => {\n  try {\n    //(async () => {\n    // Send the chunks to the Expo push notification service. There are\n    // different strategies you could use. A simple one is to send one chunk at a\n    // time, which nicely spreads the load out over time:\n    let tickets = [];\n    for (const chunk of chunks) {\n      try {\n        const ticketChunk = await expo.sendPushNotificationsAsync(chunk);\n        console.log(ticketChunk);\n        tickets.push(...ticketChunk);\n        // NOTE: If a ticket contains an error code in ticket.details.error, you\n        // must handle it appropriately. The error codes are listed in the Expo\n        // documentation:\n        // https://docs.expo.io/push-notifications/sending-notifications/#individual-errors\n      } catch (error) {\n        console.error(error);\n        if (error.code === DIFFERENT_PROJECTS_ERROR_MESSAGE) {\n          const diffProjectsTickets =\n            await handlePushNotificationsFromDifferentProjects(\n              error.details,\n              chunk\n            );\n          tickets.push([].concat.apply([], diffProjectsTickets));\n        }\n      }\n    }\n    return tickets;\n    //})();\n  } catch (err) {\n    console.log(\"send expo notification error\", err);\n    throw err;\n  }\n};\n\nconst handlePushNotificationsFromDifferentProjects = async (\n  projects,\n  notifications\n) => {\n  try {\n    const projectChunks = Object.keys(projects).map((key) => {\n      const projectTokens = projects[key];\n      const projectNotifications = projectTokens.map((token) => {\n        return notifications.find((notification) => notification.to === token);\n      });\n      return projectNotifications;\n    });\n    let tickets = [];\n    for (const projectChunk of projectChunks) {\n      try {\n        const ticketChunk = await expo.sendPushNotificationsAsync(projectChunk);\n        tickets.push(ticketChunk);\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    return tickets;\n  } catch (err) {\n    console.log(err);\n    throw err;\n  }\n};\n\nconst checkTickets = async (tickets) => {\n  // Later, after the Expo push notification service has delivered the\n  // notifications to Apple or Google (usually quickly, but allow the the service\n  // up to 30 minutes when under load), a \"receipt\" for each notification is\n  // created. The receipts will be available for at least a day; stale receipts\n  // are deleted.\n  //\n  // The ID of each receipt is sent back in the response \"ticket\" for each\n  // notification. In summary, sending a notification produces a ticket, which\n  // contains a receipt ID you later use to get the receipt.\n  //\n  // The receipts may contain error codes to which you must respond. In\n  // particular, Apple or Google may block apps that continue to send\n  // notifications to devices that have blocked notifications or have uninstalled\n  // your app. Expo does not control this policy and sends back the feedback from\n  // Apple and Google so you can handle it appropriately.\n  let receiptIds = [];\n  for (let ticket of tickets) {\n    // NOTE: Not all tickets have IDs; for example, tickets for notifications\n    // that could not be enqueued will have error information and no receipt ID.\n    if (ticket.id) {\n      receiptIds.push(ticket.id);\n    }\n  }\n\n  let receiptIdChunks = expo.chunkPushNotificationReceiptIds(receiptIds);\n  //(async () => {\n  // Like sending notifications, there are different strategies you could use\n  // to retrieve batches of receipts from the Expo service.\n  for (let chunk of receiptIdChunks) {\n    try {\n      let receipts = await expo.getPushNotificationReceiptsAsync(chunk);\n      console.log(receipts);\n\n      // The receipts specify whether Apple or Google successfully received the\n      // notification and information about an error, if one occurred.\n      for (let receiptId in receipts) {\n        let { status, message, details } = receipts[receiptId];\n        if (status === \"ok\") {\n          //continue;\n        } else if (status === \"error\") {\n          console.error(\n            `There was an error sending a notification: ${message}`\n          );\n          if (details && details.error) {\n            // The error codes are listed in the Expo documentation:\n            // https://docs.expo.io/push-notifications/sending-notifications/#individual-errors\n            // You must handle the errors appropriately.\n            console.error(`The error code is ${details.error}`);\n          }\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n  //})();\n};\n\nconst sendPushNotification = async (pushTokens, message) => {\n  try {\n    console.log(\"getting chunks...\");\n    let chunks = getMessagesBatches(pushTokens, message);\n    console.log(\"chunks\", chunks);\n\n    console.log(\"send push notifications\");\n    let tickets = await sendExpoNotification(chunks);\n    console.log(\"await check tickets\");\n    await checkTickets(tickets);\n  } catch (ex) {\n    console.log(\"notification error details:\", ex);\n    throw ex;\n  }\n};\n\nmodule.exports = {\n  sendPushNotification,\n};\n","const Suburb = require(\"../models/suburb\");\nconst suburbStatus = require(\"../constants/types\").suburbStatus;\nconst SuburbInvite = require(\"../models/suburbInvite\");\nconst User = require(\"../models/user\");\nconst SuburbConfig = require(\"../models/suburbConfig\");\nconst SuburbStreet = require(\"../models/suburbStreet\");\nconst ObjectId = require(\"mongoose\").Types.ObjectId;\n\nconst CryptoJS = require(\"crypto-js\");\n\nvar pjson = require(\"../../package.json\");\nconst { Mongoose } = require(\"mongoose\");\n\nconst getSuburbStatus = (statusName) => {\n  let status = suburbStatus.filter((st) => st.status === statusName);\n  return status[0];\n};\n\nconst encryption = (data) => {\n  if (!data) return \"\";\n  return CryptoJS.AES.encrypt(data, pjson.cryptoKey).toString();\n};\n\nconst decryption = (data) => {\n  if (!data) return \"\";\n  var bytes = CryptoJS.AES.decrypt(data, pjson.cryptoKey);\n  return bytes.toString(CryptoJS.enc.Utf8);\n};\n\nconst saveSuburb = (suburbObj) => {\n  return new Promise((resolve, reject) => {\n    Suburb.SaveSuburb(suburbObj).then((sub, err) => {\n      if (!err)\n        resolve({\n          success: true,\n          message: \"La colonia fue guardada correctamente.\",\n          id: sub.id,\n        });\n      else\n        reject({\n          success: false,\n          message:\n            err.message || \"Ocurrio un error al intentar guardar la colonia.\",\n        });\n    });\n  });\n};\n\nconst suburbAddStatus = (id, status) => {\n  return new Promise((resolve, reject) => {\n    Suburb.UpdateStatus(id, status).then((sub, err) => {\n      if (!err)\n        resolve({\n          success: true,\n          message: \"El status de la colonia fue actualizado correctamente.\",\n        });\n      else\n        reject({\n          success: false,\n          message:\n            err.message ||\n            \"Ocurrio un error al intentar actualizar el estatus de la colonia.\",\n        });\n    });\n  });\n};\n\nconst suburbAddStatusByName = (name, postalCode, status) => {\n  return new Promise((resolve, reject) => {\n    Suburb.UpdateStatusByName(name, postalCode, status).then((sub, err) => {\n      if (!err)\n        resolve({\n          success: true,\n          message: \"El status de la colonia fue actualizado correctamente.\",\n        });\n      else\n        reject({\n          success: false,\n          message:\n            err.message ||\n            \"Ocurrio un error al intentar actualizar el estatus de la colonia.\",\n        });\n    });\n  });\n};\n\nconst getSuburbByAdminUser = (userId) => {\n  return new Promise((resolve, reject) => {\n    Suburb.GetSuburbByUserId(userId).then((sub, err) => {\n      if (!err) resolve(sub);\n      else\n        reject({\n          success: false,\n          message:\n            err.message ||\n            \"Ocurrio un error al intentar obtener la colonia por usuario administrador.\",\n        });\n    });\n  });\n};\n\nconst getSuburbById = (suburbId) => {\n  return new Promise((resolve, reject) => {\n    Suburb.GetSuburb(suburbId)\n      .then((sub, err) => {\n        if (!err) resolve(sub);\n        else\n          reject({\n            success: false,\n            message:\n              err.message || \"Ocurrio un error al intentar obtener la colonia.\",\n          });\n      })\n      .catch((err) => reject(err));\n  });\n};\n\nconst addSuburbInvite = (suburbId, name, street, streetNumber, userType) => {\n  return new Promise((resolve, reject) => {\n    let _code =\n      Math.random().toString(36).substring(2, 4).toUpperCase() +\n      Math.random().toString(36).substring(2, 4).toUpperCase();\n    console.log(encryption(street));\n    SuburbInvite.SaveSuburbInvite({\n      code: _code,\n      suburbId,\n      name,\n      street: encryption(street),\n      streetNumber: encryption(streetNumber),\n      userType,\n    }).then((subInv, err) => {\n      if (!err) {\n        Suburb.AddSuburbInvite(suburbId, subInv._id.toString()).then(\n          (sub, err) => {\n            if (!err) resolve(subInv);\n            else\n              reject({\n                success: false,\n                message:\n                  err.message ||\n                  \"Ocurrio un error al intentar agregar una invitacion a usuario\",\n              });\n          }\n        );\n      } else\n        reject({\n          success: false,\n          message:\n            err.message ||\n            \"Ocurrio un error al intentar agregar una invitacion a usuario\",\n        });\n    });\n  });\n};\n\nconst getSuburbInvite = (code) => {\n  return new Promise((resolve, reject) => {\n    SuburbInvite.GetInviteByCode(code)\n      .then((subInvite, err) => {\n        if (!err) {\n          Suburb.GetSuburbBasicInfo(subInvite.suburbId.toString()).then(\n            (suburb, err) => {\n              if (!err) {\n                const { street, streetNumber, ...props } = subInvite._doc;\n                const result = {\n                  suburb: {\n                    ...suburb,\n                  },\n                  invite: {\n                    street: decryption(street),\n                    streetNumber: decryption(streetNumber),\n                    ...props,\n                  },\n                };\n                resolve(result);\n              } else {\n                reject({\n                  success: false,\n                  message:\n                    err.message ||\n                    \"Ocurrio un error al intentar obtener la invitación\",\n                });\n              }\n            }\n          );\n        } else\n          reject({\n            success: false,\n            message:\n              err.message ||\n              \"Ocurrio un error al intentar obtener la invitación\",\n          });\n      })\n      .catch((err) => {\n        reject({\n          sucess: false,\n          message:\n            err.message ||\n            \"Ocurrion un error al intentar obtener la invitación\",\n        });\n      });\n  });\n};\n\nconst saveSuburbConfig = async (suburbId, config) => {\n  try {\n    let suburbData = await Suburb.GetSuburb(suburbId);\n    if (!ObjectId.isValid(suburbData.config)) {\n      let saveConfig = await SuburbConfig.SaveConfig(config);\n      await Suburb.SaveSuburbConfig(suburbId, saveConfig._id);\n      return {\n        success: true,\n        message: \"la configuracion fue agregada con exito.\",\n        id: saveConfig.id,\n      };\n    } else {\n      let updateConfig = await SuburbConfig.UpdateConfig(\n        suburbData.config.toString(),\n        config\n      );\n      return {\n        success: true,\n        message: \"la configuracion fue actualizada con exito.\",\n      };\n    }\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getSuburbConfig = async (suburbId) => {\n  try {\n    return await Suburb.GetSuburbConfig(suburbId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst saveSuburbStreet = async (suburbId, street) => {\n  try {\n    let suburbData = await Suburb.GetSuburbStreets(suburbId);\n    let selectedStreet = suburbData.streets\n      ? suburbData.streets.filter(\n          (st) => st.street.toLowerCase() === street.street.toLowerCase()\n        )\n      : [];\n    if (selectedStreet.length === 0) {\n      let saveStreet = await SuburbStreet.SaveStreet(street);\n      await Suburb.SaveSuburbStreet(suburbId, saveStreet._id);\n      return {\n        success: true,\n        message: \"la calle fue agregada con exito.\",\n        id: saveStreet.id,\n      };\n    } else {\n      let updateStreet = await SuburbStreet.UpdateStreet(\n        selectedStreet[0]._id,\n        street\n      );\n      return { success: true, message: \"la calle fue actualizada con exito.\" };\n    }\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getSuburbStreets = async (suburbId) => {\n  try {\n    return await Suburb.GetSuburbStreets(suburbId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getUsersBySuburb = async (suburbId) => {\n  try {\n    return await User.getUsersBySuburb(suburbId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nmodule.exports = {\n  saveSuburb,\n  suburbAddStatus,\n  suburbAddStatusByName,\n  getSuburbByAdminUser,\n  getSuburbById,\n  getSuburbStatus,\n  addSuburbInvite,\n  getSuburbInvite,\n  saveSuburbConfig,\n  getSuburbConfig,\n  saveSuburbStreet,\n  getSuburbStreets,\n  getUsersBySuburb,\n};\n","const User = require(\"../models/user\");\nconst request = require(\"request\");\nconst GlobalConfig = require(\"../models/globalConfig\");\nconst userTypes = require(\"../constants/types\").userTypes;\nconst AddressService = require(\"../logic/addressService\");\n\nconst saveUser = (userObj) => {\n  return new Promise((resolve, reject) => {\n    User.getLogin(userObj.loginName).then(\n      async (login) => {\n        if (login) {\n          reject({\n            success: false,\n            message: \"El usuario existe actualmente en la base de datos.\",\n          });\n        } else {\n          let addressId = (\n            await AddressService.getAddressByNameAndNumber(\n              userObj.street,\n              userObj.streetNumber\n            )\n          )._id.toString();\n          //create the user\n          User.saveUser(\n            userObj.userType\n              ? { ...userObj, addressId }\n              : { ...userObj, userType: userTypes.guest, addressId }\n          ).then(\n            (usr, err) => {\n              //check if there is an error\n              if (!err)\n                resolve({\n                  success: true,\n                  message: \"Has sido registrado correctamente.\",\n                  userData: { ...usr },\n                });\n              else\n                reject({\n                  success: false,\n                  message: err.message || \"No se pudo registrar el usuario.\",\n                });\n            },\n            (err) => {\n              reject({ success: false, message: err.message });\n            }\n          );\n        }\n      },\n      (err) => {\n        reject({\n          success: false,\n          message:\n            err.message || \"Ocurrio un error al tratar de guardar el usuario.\",\n        });\n      }\n    );\n  });\n};\n\nconst updateUser = async (userObj) => {\n  return new Promise((resolve, reject) => {\n    User.updateUser(userObj).then(\n      (usr, err) => {\n        if (!err)\n          resolve({\n            success: true,\n            message: \"Ha sido actualizado correctamente.\",\n          });\n        else\n          reject({\n            success: false,\n            message: err.message || \"No se pudo actualizar el usuario.\",\n          });\n      },\n      (err) => {\n        reject({ success: false, message: err.message });\n      }\n    );\n  });\n};\n\nconst updateUserPicture = async (userId, photoUrl) => {\n  try {\n    return await User.updateUserPicture(userId, photoUrl);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst validateRecaptcha = async (token) => {\n  const secretKey = process.env.RECAPTCHA_SECRET;\n  const verificationURL = `https://www.google.com/recaptcha/api/siteverify?secret=${secretKey}&response=${token}`;\n\n  return new Promise((resolve, reject) => {\n    request.post(verificationURL, (error, resG, body) => {\n      if (error)\n        reject({\n          success: false,\n          message:\n            \"Por favor intenta de nuevo (no es posible validar recaptcha).\",\n        });\n      let status = JSON.parse(body);\n      if (!status.success)\n        reject({ success: false, message: \"Por favor intenta de nuevo.\" });\n      else if (status.score <= 0.5)\n        reject({\n          success: false,\n          message: \"Por favor intenta de nuevo (score demasiado bajo).\",\n        });\n      else resolve({ success: true, message: \"recaptcha valido.\" });\n    });\n  });\n};\n\nconst saveUserWithPassword = async (userObj) => {\n  const { password } = userObj;\n  return new Promise((resolve, reject) => {\n    User.encryptPassword(password).then(\n      async (resEncrypt) => {\n        try {\n          let encryptedPassword = resEncrypt.hash;\n          userObj.password = encryptedPassword;\n\n          let addressId = (\n            await AddressService.getAddressByNameAndNumber(\n              userObj.street,\n              userObj.streetNumber\n            )\n          )._id.toString();\n          saveUser({ ...userObj, addressId }).then(\n            (result) => {\n              resolve(result);\n            },\n            (err) => {\n              reject(err);\n            }\n          );\n        } catch (err) {\n          reject({\n            success: false,\n            message: err.message || \"No se pudo obtener la direccion\",\n          });\n        }\n      },\n      (err) => {\n        reject({ success: false, message: err.message || \"Bad request.\" });\n      }\n    );\n  });\n};\n\nconst getUserByType = async (userType) => {\n  try {\n    return await User.find({\n      userType: userType,\n    });\n  } catch (ex) {\n    return ex;\n  }\n};\n\nconst getUserByToken = async (token) => {\n  try {\n    let payload = await User.getTokenPayload(token);\n    return await User.findById(payload.userId);\n  } catch (ex) {\n    return ex;\n  }\n};\n\nconst getUserById = async (id) => {\n  try {\n    return await User.getUserById(id);\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst getUserFavorites = async (userId) => {\n  try {\n    let payload = await User.getUserFavs(userId);\n    return payload;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst saveUserFavorites = async (userId, favs) => {\n  try {\n    let payload = await User.addUserFavs(userId, favs);\n    return payload;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst removeUserFavorites = async (userId, favs) => {\n  try {\n    let payload = await User.removeUserFavs(userId, favs);\n    return payload;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst addUserPushToken = async (userId, pushToken) => {\n  try {\n    let payload = await User.addUserPushToken(userId, pushToken);\n    return payload;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst getUsersBySuburb = async (suburbId) => {\n  try {\n    let users = await User.getUsersBySuburb(suburbId);\n    return users;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getUsersBySuburbStreet = async (suburbId, street) => {\n  try {\n    let users = await User.getUsersBySuburbStreet(suburbId, street);\n    return users;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getUsersByAddress = async (suburbId, street, streetNumber) => {\n  try {\n    let addressId = (\n      await AddressService.getAddressByNameAndNumber(street, streetNumber)\n    )._id.toString();\n    let users = await User.getUsersByAddress(suburbId, addressId);\n    return users;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getUsersByAddressId = async (suburbId, addressId) => {\n  try {\n    return await User.getUsersByAddress(suburbId, addressId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getAdminUsers = async (suburbId) => {\n  try {\n    let adminUsers = await User.getAdminUsers(suburbId);\n    return adminUsers;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst isPasswordTemp = async (user, password) => {\n  try {\n    let isPasTemp = await User.isPasswordTemp(user, password);\n    return isPasTemp;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst updatePassword = async (user, password, tempPassword) => {\n  try {\n    let updatePass = await User.updatePassword(user, password, tempPassword);\n    return updatePass;\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst deleteUserInfo = async (userId) => {\n  try {\n    let payload = await User.deleteUserInfo(userId);\n    return payload;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst getSignedUserTerms = async (userId) => {\n  try {\n    let user = await User.getUserLeanById(userId);\n    let terms = await GlobalConfig.GetTermsAndCons();\n    let userTerms = user.signedTerms || [];\n    //logic to check if the latest term is signed\n    let latestTerms = terms\n      .map((t) => parseFloat(t))\n      .reduce((i, n) => (i > n ? i : n));\n    return {\n      signed: userTerms.indexOf(latestTerms) !== -1,\n      termsVersion: latestTerms,\n    };\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst signUserTerms = async (userId, termsVersion) => {\n  try {\n    let updateTerms = await User.updateUserTerms(userId, termsVersion);\n    return updateTerms;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst updateTempPassword = async (email) => {\n  try {\n    let updatePass = await User.updateTempPassword(email);\n\n    return updatePass;\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst updateCurrentPassword = async (userId, currentPassword, newPassword) => {\n  try {\n    return await User.updateCurrentPassword(\n      userId,\n      currentPassword,\n      newPassword\n    );\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst updateUserType = async (userId, userType) => {\n  try {\n    if ([\"neighbor\", \"guard\", \"suburbAdmin\"].indexOf(userType) === -1)\n      throw `The user type ${userType} is not valid.`;\n    return await User.updateUserType(userId, userType);\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst enableDisableUser = async (userId, enabled) => {\n  try {\n    await User.enableDisableUser(userId, enabled);\n    return { userId, active: enabled };\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst changeLimited = async (userId, limited) => {\n  try {\n    return await User.changeLimited(userId, limited);\n  } catch (ex) {\n    throw ex;\n  }\n};\n\nconst getUserLeanById = async (userId) => {\n  try {\n    return await User.getUserLeanById(userId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst getIfUserIsLimited = async (userId) => {\n  try {\n    return await User.getIfUserIsLimited(userId);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst addUserRfid = async (userId, rfid) => {\n  try {\n    return await User.addUserRfid(userId, rfid);\n  } catch (err) {\n    throw err;\n  }\n};\n\nconst removeUserRfid = async (userId, rfid) => {\n  try {\n    return await User.removeUserRfid(userId, rfid);\n  } catch (err) {\n    throw err;\n  }\n};\n\nmodule.exports = {\n  saveUser,\n  validateRecaptcha,\n  saveUserWithPassword,\n  getUserByType,\n  getUserByToken,\n  updateUser,\n  getUserFavorites,\n  saveUserFavorites,\n  removeUserFavorites,\n  getUserById,\n  addUserPushToken,\n  getUsersBySuburb,\n  getUsersBySuburbStreet,\n  getUsersByAddress,\n  getUsersByAddressId,\n  updateUserPicture,\n  deleteUserInfo,\n  getSignedUserTerms,\n  signUserTerms,\n  updateTempPassword,\n  isPasswordTemp,\n  updatePassword,\n  updateUserType,\n  enableDisableUser,\n  changeLimited,\n  getAdminUsers,\n  getUserLeanById,\n  getIfUserIsLimited,\n  updateCurrentPassword,\n  addUserRfid,\n  removeUserRfid,\n};\n","const User = require(\"../models/user\");\nconst permissions = require(\"../constants/menusConfig\").menus;\n\n\n\nconst validateWithPayload = (path, payload) => {\n    let valid =  { valid: false, message: 'la pantalla no es valida para tu usuario.' };\n    if(!payload || !payload.userType)\n        return valid;\n\n    const { userType } = payload;\n    let validPath = permissions.filter(p => {\n        let types = p.validUserTypes.filter(g => g.toLowerCase() === userType.toLowerCase());\n        return types.length > 0 && p.path.toLowerCase() === path.toLocaleLowerCase();\n\n    });\n\n    if (validPath.length > 0)\n        valid = { valid: true, message: 'ok' };\n    return valid;\n};\n\n\nexports.permissionValid = (path, jwt) => {\n    return new Promise((resolve, reject) => {\n        let user = User;\n        let isValid = user.isValidToken(jwt);\n        isValid.then(res => {\n            let getPayload = user.getTokenPayload(jwt);\n            getPayload.then(payload => {\n                let valid = validateWithPayload(path, payload);\n                if (valid.valid)\n                    resolve(valid);\n                else\n                    reject(valid);\n            }, errP => {\n                reject({ valid: false, message: 'los datos de la sesión no son validos.' });\n            });\n        }, err => {\n            reject({ valid: false, message: 'el token de la sesión no es valido.' });\n        });\n    });\n}","const Auth = require(\"../logic/auth\").Auth;\n\nconst validApiRequest = (apiPath, token, apiKey) => {\n  return new Promise((resolve, reject) => {\n    let auth = new Auth();\n    auth.validateApiRequest(apiPath, token, apiKey).then(\n      (res) => {\n        resolve(res);\n      },\n      (err) =>\n        reject({\n          valid: false,\n          message: err.message ? err.message : `Error: ${JSON.stringify(err)}`,\n        })\n    );\n  });\n};\n\nexports.checkApiAuth = (req, res, next) => {\n  console.log(`validando si el request esta autenticado...`);\n  //check request headers over here to know if the request is authenticated\n  let apiPath = req.baseUrl,\n    token = req.headers[\"authorization\"],\n    apiKey =\n      req.headers[\"api-key\"] || req.query[\"api-key\"] || req.body[\"api-key\"];\n\n  validApiRequest(apiPath, token, apiKey).then(\n    (result) => {\n      if (result.valid) next();\n      else\n        res\n          .status(\"401\")\n          .json({ success: false, error: \"Unauthorized request.\" });\n    },\n    (err) =>\n      res.status(\"401\").json({\n        success: false,\n        error: err.message || \"An error occurs while validating the request.\",\n      })\n  );\n};\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst AddressSchema = new mongoose.Schema({\n  suburbId: {\n    type: String,\n  },\n  name: {\n    type: String,\n  },\n  number: {\n    type: String,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nAddressSchema.statics = {\n  SaveSuburbStreet: function (suburbId, name, numbers) {\n    let addresses = numbers.map((number) => ({ suburbId, name, number }));\n    return new Promise((resolve, reject) => {\n      Address.insertMany(addresses)\n        .then((value) => {\n          resolve(value);\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  },\n  GetStreetsBySuburb: function (suburbId) {\n    return new Promise((resolve, reject) => {\n      this.find({ suburbId: suburbId })\n        .lean()\n        .exec((err, result) => {\n          if (err) reject(err);\n          if (result) {\n            let addresses = result.map((s) => ({\n              street: s.name,\n              number: s.number,\n              transtime: s.transtime,\n            }));\n            let streets = addresses.reduce((streets, street) => {\n              if (\n                streets.filter((s) => s.street === street.street).length > 0\n              ) {\n                let existing = streets.filter(\n                  (s) => s.street === street.street\n                )[0];\n                streets = [\n                  ...streets.filter((s) => s.street !== street.street),\n                  {\n                    ...existing,\n                    numbers: [...existing.numbers.map((e) => e), street.number],\n                  },\n                ];\n              } else {\n                streets = [\n                  ...streets,\n                  {\n                    street: street.street,\n                    numbers: [street.number],\n                    transtime: street.transtime,\n                  },\n                ];\n              }\n              return streets;\n            }, []);\n            resolve({ streets: streets });\n          }\n        });\n    });\n  },\n  GetAddressesBySuburb: function (suburbId) {\n    return this.find({ suburbId: suburbId })\n      .sort({ name: 'asc', number: 'asc' })\n      .lean();\n  },\n  GetAddressByNameAndNumber: function (streetName, number) {\n    return this.findOne({ name: streetName, number: number }).lean();\n  },\n};\n\nconst Address = mongoose.model(\"Address\", AddressSchema);\n\nmodule.exports = Address;\n","const moment = require(\"moment\");\nconst mongoose = require(\"mongoose\");\nconst AttachmentSchema = require(\"./schemas/AttachmentSchema\");\n\nconst NotificationSchema = new mongoose.Schema({\n  suburbId: {\n    type: String,\n  },\n  title: {\n    type: String,\n  },\n  body: {\n    type: String,\n  },\n  level: {\n    type: String,\n    enum: [\"info\", \"warning\", \"danger\", \"success\"],\n  },\n  attachments: [AttachmentSchema],\n  metadata: {\n    type: mongoose.Schema.Types.Mixed,\n  },\n  users: [\n    {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"User\",\n    },\n  ],\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nNotificationSchema.statics = {\n  Save: function (notificationObject) {\n    const notification = new this(notificationObject);\n    return notification.save();\n  },\n  Delete: function (notificationId) {\n    return this.deleteOne({ _id: notificationId });\n  },\n  GetById: function (notificationId) {\n    return this.findOne({ _id: notificationId }).lean();\n  },\n  GetBySuburbId: function (\n    suburbId,\n    minDate = moment.utc().add(-90, \"days\").format(\"YYYY-MM-DD\")\n  ) {\n    return this.find({\n      suburbId,\n      transtime: { $gte: moment(minDate) },\n      users: { $exists: true, $size: 0 },\n    }).lean();\n  },\n  GetByUserId: function (\n    suburbId,\n    userId,\n    minDate = moment.utc().add(-90, \"days\").format(\"YYYY-MM-DD\")\n  ) {\n    return this.find({\n      suburbId,\n      transtime: { $gte: minDate },\n      users: { $elemMatch: { $in: [userId] } },\n    }).lean();\n  },\n};\n\nconst Notification = mongoose.model(\"Notification\", NotificationSchema);\n\nmodule.exports = Notification;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst GlobalConfigSchema = new mongoose.Schema({\n  termsAndConditions: [mongoose.Decimal128],\n});\n\nGlobalConfigSchema.statics = {\n  SaveInitialConfig: function () {\n    let terms = new this({ termsAndConditions: [1.0] });\n    return terms.save();\n  },\n  GetTermsAndCons: function () {\n    return new Promise((resolve, reject) => {\n      this.findOne({})\n        .lean()\n        .exec((err, result) => {\n          if (err) reject(err);\n          if (!result) {\n            this.SaveInitialConfig();\n          }\n          let terms = result ? result.termsAndConditions : [1.0];\n          resolve(terms || [1.0]);\n        });\n    });\n  },\n};\n\nconst GlobalConfig = mongoose.model(\"GlobalConfig\", GlobalConfigSchema);\n\nmodule.exports = GlobalConfig;\n","const mongoose = require(\"mongoose\");\nconst Menu = require(\"./menu\");\nconst Role = require(\"./role\");\nconst User = require(\"./user\");\nconst SuburbInvite = require(\"./suburbInvite\");\nconst SuburbConfig = require(\"./suburbConfig\");\nconst SuburbStreet = require(\"./suburbStreet\");\nconst PostalCode = require(\"./postalCode\");\nconst Address = require(\"./Address\");\nconst GlobalConfig = require(\"./globalConfig\");\nconst Notification = require(\"./Notification\")\n\nconst models = {\n  Menu,\n  Role,\n  User,\n  PostalCode,\n  SuburbInvite,\n  SuburbConfig,\n  SuburbStreet,\n  Address,\n  GlobalConfig,\n  Notification\n};\n\nconst connectDb = async () => {\n  //setup the mongo connection\n  const mongooseConnection = await mongoose.connect(process.env.DB_CONNECTION, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true,\n  });\n\n  console.log(mongoose.models)\n\n\n  mongoose.connection.on(\n    \"error\",\n    console.error.bind(console, \"Mongo db connection error: \")\n  );\n  return mongooseConnection;\n};\n\nmodule.exports = { connectDb, models };\n","const moment = require('moment');\nconst mongoose = require('mongoose');\n//const Base = require('./baseModel');\n\nconst MenuSchema = new mongoose.Schema({\n    name: {\n        type: String,\n        required: 'Enter the menu name'\n    },\n    link: {\n        type: String,\n        required: 'Enter the menu link'\n    },\n    parentId: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'Menu'\n    },\n    position: {\n        type: Number,\n        default: 1\n    },\n    icon: {\n        type: String\n    },\n    visible: {\n        type: Boolean,\n        default: true\n    },\n    active: {\n        type: Boolean,\n        default: true\n    },\n    type: {\n        type: String\n    },\n    transtime: {\n        type: Date,\n        default: moment.utc()\n    }\n});\n\n\nMenuSchema.statics = {\n    getMenuById: function (menuId) { //, projectId){\n        return this.findOne({\n            _id: menuId //, \n            //project: projectId\n        });\n    },\n    updateMenu: function (objMenu) {\n        return this.update({\n            _id: objMenu._id\n        }, {\n                $set: {\n                    'name': objMenu.name,\n                    'link': objMenu.link,\n                    'parentId': objMenu.parentId,\n                    'position': objMenu.position,\n                    'icon': objMenu.position,\n                    'visible': objMenu.visible,\n                    'active': objMenu.active,\n                    'type': objMenu.active,\n                    'transtime': moment.utc()\n                }\n            });\n    },\n    deleteMenu: function (menuId) {\n        return this.deleteMany({\n            _id: menuId\n        });\n    },\n    getChildMenus: function (menuId) {\n        return this.find({\n            parentId: menuId\n        });\n    },\n    getChildMenusRecursively: function (parents) {\n        let _this = this;\n        let getThisLevelChilds = this.getChildMenus(parents);\n        let elements = [];\n        return new Promise((resolve, reject) => {\n            getThisLevelChilds.then((childs) => {\n                if (childs.length > 0) {\n                    elements = JSON.parse(JSON.stringify(childs)).map((child) => {\n                        return child._id;\n                    });\n                    let getInnerChilds = _this.getChildMenusRecursively(elements);\n                    getInnerChilds.then((result) => {\n                        resolve(elements.concat(result));\n                    });\n                } else\n                    resolve(elements);\n            }, (err) => {\n                reject(err);\n            })\n        });\n    },\n    getParentMenusRecursively: function (menuId) {\n        let _this = this;\n        let getThisLevel = this.getMenuById(menuId);\n        let elements = [];\n        return new Promise((resolve, reject) => {\n            getThisLevel.then((menu) => {\n                menu = JSON.parse(JSON.stringify(menu))\n                if (menu && menu.parentId) {\n                    elements.push(menu.parentId);\n                    let getMoreParents = _this.getParentMenusRecursively(menu.parentId);\n                    getMoreParents.then((result) =>\n                        resolve(elements.concat(result)));\n                } else\n                    resolve(elements);\n            }, err => reject(err));\n        });\n    },\n    getMenus: function (menus) {\n        return this.find({ _id: menus });\n    }\n}\n\n\n\n\nconst Menu = mongoose.model(\"Menu\", MenuSchema);\n\nmodule.exports = Menu;","const mongoose = require('mongoose');\n\nconst PostalCodeSchema = new mongoose.Schema({\n    d_codigo: {\n        type: String\n    },\n    d_asenta: {\n        type: String\n    },\n    d_tipo_asenta: {\n        type: String\n    },\n    D_mnpio: {\n        type: String\n    },\n    d_estado: {\n        type: String\n    },\n    d_ciudad: {\n        type: String\n    },\n    d_CP: {\n        type: String\n    },\n    c_estado: {\n        type: String\n    },\n    c_oficina: {\n        type: String\n    },\n    c_CP: {\n        type: String\n    },\n    c_tipo_asenta: {\n        type: String\n    },\n    c_mnpio: {\n        type: String\n    },\n    id_asenta_cpcons: {\n        type: String\n    },\n    d_zona: {\n        type: String\n    },\n    c_cve_ciudad: {\n        type: String\n    }\n});\n\nPostalCodeSchema.statics = {\n    getCPInfo: function (cp) {\n        let regCp = new RegExp(cp)\n        return this.find({ d_codigo: regCp }).limit(100);\n    }\n};\n\nconst PostalCode = mongoose.model(\"PostalCode\", PostalCodeSchema);\n\nmodule.exports = PostalCode;","const moment = require('moment');\nconst mongoose = require(\"mongoose\");\n\nconst RoleSchema = new mongoose.Schema({\n    name: {\n        type: String,\n        required: 'Enter the name of the role'\n    },\n    description: {\n        type: String,\n        required: 'Enter the description of the role'\n    },\n    siteAdministration: {\n        type: Boolean,\n        default: false\n    },\n    sysAdministrator: {\n        type: Boolean,\n        default: false\n    },\n    active: {\n        type: Boolean,\n        default: true\n    },\n    menus: [{\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'Menu'\n    }],\n    transtime: {\n        type: Date,\n        default: moment.utc()\n    }\n});\n\nRoleSchema.statics = {\n    deleteRole: function (roleId) {\n        return this.deleteMany({\n            _id: roleId\n        });\n    },\n    setRoleMenu: function (roleId, menus) {\n        if (!Array.isArray(menus)) menus = [menus];\n        return this.update({\n            _id: roleId\n        }, {\n                $addToSet: {\n                    menus: {\n                        $each: menus\n                    }\n                }\n            }, {\n                multi: true\n            });\n    },\n    deleteRoleMenu: function (roles, menus) {\n        if (!Array.isArray(menus)) menus = [menus];\n        if (!Array.isArray(roles)) roles = [roles];\n\n        return this.update({\n            _id: {\n                $in: roles\n            }\n        }, {\n                $pullAll: {\n                    menus: menus\n                }\n            }, {\n                multi: true\n            });\n    },\n    getRoleMenus: function (roleId) {\n        return new Promise((resolve, reject) => {\n            this.find({\n                _id: roleId\n            }).populate('menus').exec((err, result) => {\n                if (err) reject(err);\n                resolve(result);\n            });\n        });\n    }\n};\n\nconst Role = mongoose.model(\"Role\", RoleSchema);\n\nmodule.exports = Role;","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst AttachmentSchema = new mongoose.Schema({\n  filename: {\n    type: String,\n  },\n  url: {\n    type: String,\n  },\n  transTime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nmodule.exports = AttachmentSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst RFIdSchema = new mongoose.Schema({\n  rfid: {\n    type: String,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nmodule.exports = RFIdSchema;\n","const mongoose = require(\"mongoose\");\n\nconst ChildMenuSchema = new mongoose.Schema({\n  item: { type: String },\n  label: { type: String },\n  color: { type: String },\n  navigate: { type: String },\n  screen: { type: String },\n  isHome: { type: Boolean },\n  iconName: { type: String },\n  iconFamily: { type: String },\n});\n\nmodule.exports = ChildMenuSchema;\n","const mongoose = require(\"mongoose\");\n\nconst DropdownSchema = new mongoose.Schema({\n  value: {\n    type: String,\n  },\n  text: {\n    type: String,\n  },\n});\n\nmodule.exports = DropdownSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\nconst DropdownSchema = require(\"./dropdownSchema\");\nconst FieldSchema = new mongoose.Schema({\n  field: {\n    type: String,\n  },\n  type: {\n    type: String,\n  },\n  data: [DropdownSchema],\n  label: {\n    type: String,\n  },\n  mandatory: {\n    type: Boolean,\n    default: false,\n  },\n  mandatoryMessage: {\n    type: String,\n  },\n});\n\nmodule.exports = FieldSchema;\n","const mongoose = require(\"mongoose\");\nconst ChildMenuSchema = require(\"./childMenuSchema\");\n\nconst MenuSchema = new mongoose.Schema({\n  item: { type: String },\n  label: {type: String},\n  validUserTypes: [String],\n  childMenus: [ChildMenuSchema],\n});\n\nmodule.exports = MenuSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\nconst FieldSchema = require(\"./fieldSchema\");\n\nconst ScreenSchema = new mongoose.Schema({\n  name: { type: String },\n  title: { type: String },\n  options: { type: mongoose.Schema.Types.Mixed },\n  fields: [FieldSchema],\n});\n\nmodule.exports = ScreenSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst GuestSchema = new mongoose.Schema({\n  name: {\n    type: String,\n  },\n  vehicle: {\n    type: String,\n  },\n  subject: {\n    type: String,\n  },\n  isService: {\n    type: Boolean,\n    default: false,\n  },\n  plates: {\n    type: String,\n  },\n  additionalInformation: {\n    type: String,\n  },\n  active: {\n    type: Boolean,\n    default: true,\n  },\n  arriveOn: {\n    type: Date,\n  },\n  leaveOn: {\n    type: Date,\n  },\n  count: {\n    type: Number,\n    default: 0,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nmodule.exports = GuestSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst PushTokenSchema = new mongoose.Schema({\n  token: {\n    type: String,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nmodule.exports = PushTokenSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst SuburbFileSchema = new mongoose.Schema({\n  fileName: {\n    type: String,\n  },\n  originalName: {\n    type: String,\n  },\n  actionType: {\n    type: String,\n  },\n  mimetype: {\n    type: String,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nmodule.exports = SuburbFileSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst SuburbStatusSchema = new mongoose.Schema({\n  status: {\n    type: String,\n  },\n  description: {\n    type: String,\n  },\n  details: {\n    type: String,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\n//const SuburbStatus = mongoose.model(\"SuburbStatus\", SuburbStatusSchema);\n\nmodule.exports = SuburbStatusSchema;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\nconst SuburbStatusSchema = require(\"./schemas/suburbStatusSchema\");\nconst SuburbFileSchema = require(\"./schemas/suburbFileSchema\");\nconst suburbConfig = require(\"./suburbConfig\");\nconst suburbStreet = require(\"./suburbStreet\");\n\nconst SuburbSchema = new mongoose.Schema({\n  name: {\n    type: String,\n  },\n  location: {\n    type: String,\n  },\n  postalCode: {\n    type: Number,\n  },\n  active: {\n    type: Boolean,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n  userAdmins: [\n    {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"User\",\n    },\n  ],\n  /*\n        estatus validos:\n        activacionPendiente,\n        activacionRechazada\n        activadoBasico,\n        activadoPlus\n    */\n  status: [SuburbStatusSchema],\n  files: [SuburbFileSchema],\n  suburbInvites: [\n    {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"SuburbInvite\",\n    },\n  ],\n  config: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"SuburbConfig\",\n  },\n  streets: [\n    {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"SuburbStreet\",\n    },\n  ],\n});\n\nSuburbSchema.statics = {\n  SaveSuburb: function (suburbObj) {\n    let suburb = new this(suburbObj);\n    return suburb.save();\n  },\n  UpdateStatus: function (id, status) {\n    if (!Array.isArray(status)) status = [status];\n    return this.updateOne(\n      { _id: id },\n      {\n        $addToSet: {\n          status: {\n            $each: status,\n          },\n        },\n      },\n      {\n        multi: true,\n      }\n    );\n  },\n  UpdateStatusByName: function (name, postalCode) {\n    if (!Array.isArray(status)) status = [status];\n    return this.updateOne(\n      { name: name, postalCode: postalCode },\n      {\n        $addToSet: {\n          status: {\n            $each: status,\n          },\n        },\n      },\n      {\n        multi: true,\n      }\n    );\n  },\n  AddSuburbInvite: function (id, userInviteId) {\n    if (!Array.isArray(userInviteId)) userInviteId = [userInviteId];\n    return this.updateOne(\n      { _id: id },\n      {\n        $addToSet: {\n          suburbInvites: {\n            $each: userInviteId,\n          },\n        },\n      },\n      { multi: true }\n    );\n  },\n  GetSuburb: function (id) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: id,\n      })\n        .populate(\"userAdmins\", \"User\")\n        .populate(\"suburbInvites\", \"SuburbInvite\")\n        .exec((err, result) => {\n          if (err) reject(err);\n          let {\n            name,\n            location,\n            postalCode,\n            active,\n            transtime,\n            status,\n            suburbInvites,\n            config,\n          } = result;\n          resolve({\n            name,\n            location,\n            postalCode,\n            active,\n            transtime,\n            status,\n            suburbInvites,\n            config,\n          });\n        });\n    });\n  },\n  GetSuburbBasicInfo: function (id) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: id,\n      }).exec((err, result) => {\n        if (err || !result) reject(err);\n        if (result) {\n          let { name, location, postalCode, active, transtime } = result;\n          resolve({\n            name,\n            location,\n            postalCode,\n            active,\n            transtime,\n          });\n        }\n      });\n    });\n  },\n  GetSuburbByName: function (postalCode, name) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        postalCode: postalCode,\n        name: name,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        resolve(result);\n      });\n    });\n  },\n  GetSuburbByUserId: function (userId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ userAdmins: mongoose.Types.ObjectId(userId) }).exec(\n        (err, result) => {\n          if (err) reject(err);\n          resolve(result);\n        }\n      );\n    });\n  },\n  SaveSuburbConfig: function (id, configId) {\n    return this.updateOne(\n      {\n        _id: id,\n      },\n      {\n        $set: { config: configId },\n      }\n    );\n  },\n  GetSuburbConfig: function (id) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: id,\n      })\n        .populate(\"config\")\n        .exec((err, result) => {\n          if (err || !result) reject(err || \"No se encontro la configuracion\");\n          else {\n            let { config } = result;\n            if (config) resolve({ ...config._doc });\n            else resolve({});\n          }\n        });\n    });\n  },\n  SaveSuburbStreet: function (id, streetId) {\n    if (!Array.isArray(streetId)) streetId = [streetId];\n    return this.updateOne(\n      { _id: id },\n      { $addToSet: { streets: { $each: streetId } } },\n      { multi: true }\n    );\n  },\n  GetSuburbStreets: function (id) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: id,\n      })\n        .populate(\"streets\")\n        .lean()\n        .exec((err, result) => {\n          if (err) reject(err);\n          if (result) {\n            let { streets } = result;\n            if (streets) resolve({ streets: [...streets] });\n            else resolve({ streets: [] });\n          } else resolve({ streets: [] });\n        });\n    });\n  },\n};\n\nconst Suburb = mongoose.model(\"Suburb\", SuburbSchema);\n\nmodule.exports = Suburb;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\nconst ScreenSchema = require(\"./schemas/config/screenSchema\");\nconst MenuSchema = require(\"./schemas/config/menuSchema\");\n\nconst SuburbConfigSchema = new mongoose.Schema({\n  imageUrl: { type: String },\n  screens: [ScreenSchema],\n  menus: [MenuSchema],\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nSuburbConfigSchema.statics = {\n  SaveConfig: function (suburbConfig) {\n    let config = new this(suburbConfig);\n    return config.save();\n  },\n  UpdateConfig: function (id, config) {\n    return this.updateOne({ _id: id }, { ...config });\n  },\n};\n\nconst SuburbConfig = mongoose.model(\"SuburbConfig\", SuburbConfigSchema);\n\nmodule.exports = SuburbConfig;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\n\nconst SuburbInviteSchema = new mongoose.Schema({\n  code: {\n    type: String,\n  },\n  name: {\n    type: String,\n  },\n  street: {\n    type: String,\n  },\n  streetNumber: {\n    type: String,\n  },\n  suburbId: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Suburb\",\n  },\n  active: {\n    type: Boolean,\n    default: true,\n  },\n  usedBy: {\n    type: String,\n  },\n  updatedTranstime: {\n    type: Date,\n  },\n  userType: {\n    type: String,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nSuburbInviteSchema.statics = {\n  SaveSuburbInvite: function (userInviteObj) {\n    let userInvite = new this(userInviteObj);\n    return userInvite.save();\n  },\n  UpdateSuburbInviteUsed: function (code, usedBy) {\n    return this.updateOne(\n      { $and: [{ code: code }, { active: true }] },\n      {\n        $set: {\n          usedBy: usedBy,\n          active: false,\n          updatedTranstime: moment.utc(),\n        },\n      }\n    );\n  },\n  GetInviteByCode: function (code) {\n    return new Promise((resolve, reject) => {\n      return this.findOne({ code: code, active: true }).exec((err, result) => {\n        if (err) reject(err);\n        if (!result)\n          reject({ success: false, message: \"Cannot find the invite code.\" });\n        resolve(result);\n      });\n    });\n  },\n};\n\nconst SuburbInvite = mongoose.model(\"SuburbInvite\", SuburbInviteSchema);\n\nmodule.exports = SuburbInvite;\n","const mongoose = require(\"mongoose\");\nconst moment = require(\"moment\");\nconst { getUsersBySuburbStreet } = require(\"../logic/userService\");\n\nconst suburbStreetSchema = new mongoose.Schema({\n  street: {\n    type: String,\n  },\n  numbers: [{ type: String }],\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n});\n\nsuburbStreetSchema.statics = {\n  SaveStreet: function (suburbStreet) {\n    let config = new this(suburbStreet);\n    return config.save();\n  },\n  UpdateStreet: function (id, street) {\n    return this.updateOne({ _id: id }, { ...street });\n  },\n};\n\nconst SuburbStreet = mongoose.model(\"SuburbStreet\", suburbStreetSchema);\n\nmodule.exports = SuburbStreet;\n","const moment = require(\"moment\");\nconst bcrypt = require(\"bcryptjs\");\nconst jwt = require(\"jsonwebtoken\");\nconst mongoose = require(\"mongoose\");\nconst base64 = require(\"base-64\");\nconst GuestSchema = require(\"./schemas/guestSchema\");\nconst PushTokenSchema = require(\"./schemas/pushTokenSchema\");\nconst RFIdSchema = require(\"./schemas/RFIdSchema\");\n\nconst UserSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: \"Ingresa el nombre\",\n  },\n  lastName: {\n    type: String,\n  },\n  password: {\n    type: String,\n  },\n  tempPassword: {\n    type: String,\n    default: null,\n  },\n  loginName: {\n    type: String,\n    unique: true,\n  },\n  email: {\n    type: String,\n  },\n  cellphone: {\n    type: String,\n  },\n  photoUrl: {\n    type: String,\n  },\n  street: {\n    type: String,\n  },\n  streetNumber: {\n    type: String,\n  },\n  loginAttempts: {\n    type: Number,\n    default: 0,\n  },\n  temporaryDisabled: {\n    type: Boolean,\n    default: false,\n  },\n  disabledSince: {\n    type: Date,\n  },\n  lastAccess: {\n    type: Date,\n    default: moment.utc(),\n  },\n  /**\n   * valid user types:\n   *  guest -> a guest user\n   *  guard -> a guard of the suburb\n   *  admin -> an administrator of the suburb\n   *  sudo  -> an administrator of the app\n   */\n  userType: {\n    type: String,\n    default: \"guest\",\n  },\n  userConfirmed: {\n    type: Boolean,\n  },\n  facebookId: {\n    type: String,\n  },\n  googleId: {\n    type: String,\n  },\n  appleId: {\n    type: String,\n  },\n  active: {\n    type: Boolean,\n    default: true,\n  },\n  transtime: {\n    type: Date,\n    default: moment.utc(),\n  },\n  roles: [\n    {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: \"Role\",\n    },\n  ],\n  suburb: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Suburb\",\n  },\n  favorites: [GuestSchema],\n  pushTokens: [PushTokenSchema],\n  signedTerms: [Number],\n  addressId: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"Address\",\n  },\n  limited: {\n    type: Boolean,\n    default: false,\n  },\n  limitedSince: {\n    type: Date,\n  },\n  limitedReason: {\n    type: String,\n  },\n  rfids: [RFIdSchema],\n});\n\n/**\n * Private attributes\n */\nconst _secretKey = process.env.JWT_SECRET;\n\nlet _getExpDate = () => {\n  var expTimeByMin =\n    process.env.EXP_TOKEN != null ? process.env.EXP_TOKEN : \"10080\";\n  return moment().add(expTimeByMin, \"minutes\").unix();\n};\n\nlet _getValidApis = (id) => {\n  //return an array with the valid apis\n  return [];\n};\n\nlet _getValidMenus = (id) => {\n  //return an array with the valid menus for the user\n  return [];\n};\n\n/**\n * Method to validate exp from the user token.\n * @param {*} expDate\n */\nlet _validateExpDate = function (expDate) {\n  let currentTime = moment().unix();\n  return expDate > currentTime;\n};\n\nUserSchema.methods = {\n  validatePassword: function (_password, isTemporary = false) {\n    try {\n      var _this = this;\n      let pass = base64.decode(_password);\n\n      let compareValue = isTemporary ? _this.tempPassword : _this.password;\n\n      return new Promise(\n        (resolve, reject) => {\n          if (_this.temporaryDisabled) {\n            let wait = 10 - this.getDisabledSince();\n            if (wait > 0)\n              reject({\n                success: false,\n                message: `El usuario esta temporalmente desabilitado, por favor espere ${wait} minutos para volver a intentar.`,\n              });\n            else\n              this.increaseLoginAttempts(true).then((res) => {\n                this.validatePassword(_password).then(\n                  (result) => resolve(result),\n                  (err) => reject(err)\n                );\n              });\n          } else\n            bcrypt.compare(pass, compareValue).then((valid) => {\n              if (valid) {\n                //reset logint attempts\n                this.increaseLoginAttempts(true).then(\n                  (res) => {\n                    resolve({\n                      success: true,\n                      message: \"La contraseña coincide.\",\n                    });\n                  },\n                  (err) =>\n                    reject({ success: false, message: \"Un error occurio.\" })\n                );\n              } else {\n                //increase login attempts\n                this.increaseLoginAttempts().then(\n                  (res) => {\n                    reject({\n                      success: false,\n                      message: \"La contraseña no es valida.\",\n                    });\n                  },\n                  (err) =>\n                    reject({\n                      success: false,\n                      message: \"Un error occurio, la contraseña no es valida.\",\n                    })\n                );\n              }\n            });\n        },\n        (err) =>\n          reject({\n            success: false,\n            message: \"Ocurrio un error al comparar la contraseña.\",\n          })\n      );\n    } catch (e) {\n      return Promise.reject({\n        success: false,\n        message: \"Ocurrio un error al comparar la contraseña.\",\n      });\n    }\n  },\n  getDisabledSince: function () {\n    let disabledSince = this.disabledSince ? this.disabledSince : moment.utc();\n    let start = moment(disabledSince);\n    let end = moment(moment.utc());\n    return end.diff(start, \"minutes\");\n  },\n  increaseLoginAttempts: function (reset) {\n    if (reset) {\n      this.loginAttempts = 0;\n      this.temporaryDisabled = false;\n      this.disabledSince = null;\n    } else {\n      let loginAttempts = this.loginAttempts + 1;\n      this.loginAttempts = loginAttempts;\n      this.temporaryDisabled = loginAttempts > 10;\n      this.disabledSince = loginAttempts > 10 ? moment.utc() : null;\n    }\n    return new Promise((resolve, reject) => {\n      return this.save().then(\n        (res) => {\n          resolve(res);\n        },\n        (err) => {\n          reject(err);\n        }\n      );\n    });\n  },\n  generateUserToken: function (_suburb) {\n    let payload = {\n      userId: this._id != undefined ? JSON.parse(JSON.stringify(this._id)) : \"\",\n      userName: `${this.name} ${this.lastName}`,\n      loginName: this.loginName,\n      suburb: this.suburb || _suburb,\n      userType: this.userType,\n      exp: _getExpDate(),\n      validApis: _getValidApis(this._id),\n      pushTokens: this.pushTokens,\n      street: this.street,\n      streetNumber: this.streetNumber,\n      addressId: this.addressId,\n      limited: typeof this.limited === \"undefined\" ? false : this.limited,\n      //validMenus: _getValidMenus(this._id) //verify if is better put this in another schema i.e. suburb\n    };\n    let token = jwt.sign(payload, _secretKey);\n    return token;\n  },\n  setUserRole: function (userId, roles) {\n    if (!Array.isArray(roles)) roles = [roles];\n    return this.update(\n      {\n        _id: userId,\n      },\n      {\n        $addToSet: {\n          roles: {\n            $each: roles,\n          },\n        },\n      },\n      {\n        multi: true,\n      }\n    );\n  },\n  deleteUserRole: function (users, roles) {\n    if (!Array.isArray(users)) users = [users];\n    if (!Array.isArray(roles)) roles = [roles];\n\n    return this.update(\n      {\n        _id: {\n          $in: users,\n        },\n      },\n      {\n        $pullAll: {\n          roles: roles,\n        },\n      },\n      {\n        multi: true,\n      }\n    );\n  },\n  getUserRoles: function (userId) {\n    return new Promise((resolve, reject) => {\n      this.find({\n        _id: userId,\n      })\n        .populate(\"roles\")\n        .exec((err, result) => {\n          if (err) reject(err);\n          resolve(getCleanResult(result, \"roles\"));\n        });\n    });\n  },\n};\n\nconst mergeArrayObjects = (currentFavs, newFavs) => {\n  let firstMerge = currentFavs.map((item, i) => {\n    let assign = {\n      name: item.name,\n      vehicle: item.vehicle,\n      subject: item.subject,\n      isService: item.isService,\n      count: item.count || 0,\n    };\n    newFavs.forEach((a2) => {\n      if (item.name === a2.name) {\n        assign = Object.assign(\n          {},\n          {\n            name: item.name,\n            vehicle: item.vehicle,\n            subject: item.subject,\n            isService: item.isService,\n            count: item.count || 0 + 1, //add 1 to calculate more used favs\n          },\n          a2\n        );\n      }\n    });\n    return { ...assign };\n  });\n\n  let all = [];\n  newFavs.forEach((item) => {\n    let add = true;\n    firstMerge.forEach((fm) => {\n      if (item.name.trim() === fm.name.trim()) add = false;\n    });\n    if (add) all.push(item);\n  });\n\n  let items = [...firstMerge, ...all].sort((a, b) => b.count - a.count);\n  return items.slice(0, items.length <= 30 ? items.length : 30); // solo mantendremos 30 favoritos para no sobrecargar la bd\n};\n\nconst mergePushTokens = (currentPushTokens, newPushToken) => {\n  let tokens = currentPushTokens.map((t) =>\n    t.token === newPushToken.token ? { ...newPushToken } : { ...t._doc }\n  );\n\n  let exists = tokens.filter((t) => t.token === newPushToken.token);\n  return exists.length > 0 ? [...tokens] : [...tokens, newPushToken];\n};\n\nconst extractUsersFromDoc = (mUsers) => {\n  let users = mUsers.map((u) => {\n    let { _id, name, lastName, street, streetNumber, active, pushTokens } =\n      u._doc;\n    return { _id, name, lastName, street, streetNumber, active, pushTokens };\n  });\n  return users;\n};\n\nUserSchema.statics = {\n  /**\n   * Method to get a user by login name\n   */\n  getLogin: function (_loginName) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        $and: [\n          {\n            loginName: _loginName,\n          },\n          { active: true },\n        ],\n      }) /*.populate({\n                path: 'roles',\n                populate: {\n                    path: 'menus',\n                    model: 'Menu'\n                }\n            })*/\n        .exec((err, result) => {\n          if (err) reject(err);\n          else {\n            resolve(result);\n          }\n        });\n    });\n  },\n  getUserByFacebookId: function (_facebookId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        facebookId: _facebookId,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else {\n          resolve(result);\n        }\n      });\n    });\n  },\n  getUserByGoogleId: function (_googleId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        googleId: _googleId,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else {\n          resolve(result);\n        }\n      });\n    });\n  },\n  getUserByAppleId: function (_appleId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        appleId: _appleId,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else {\n          resolve(result);\n        }\n      });\n    });\n  },\n  getUserFavs: function (userId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId }).exec((err, result) => {\n        if (err) reject(err);\n        else {\n          resolve(result.favorites);\n        }\n      });\n    });\n  },\n  addUserFavs: function (userId, favs) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId }).exec((err, result) => {\n        if (err) reject(err);\n        if (!result) reject({ message: \"user not found\" });\n        let mergedFavs = mergeArrayObjects(result.favorites || [], favs);\n        this.findOneAndUpdate(\n          { _id: userId },\n          { $set: { favorites: mergedFavs } },\n          { new: true },\n          function (err, user) {\n            if (err) reject(err);\n            else {\n              resolve(mergedFavs);\n            }\n          }\n        );\n        resolve(result);\n      });\n    });\n  },\n  removeUserFavs: function (userId, favs) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId }).exec((err, result) => {\n        if (err) reject(err);\n        if (!result) reject({ message: \"user not found\" });\n        let filterFavs = (result.favorites || []).filter((item) => {\n          let exists = favs.filter((f) => f.name.trim() === item.name.trim());\n          return exists.length === 0;\n        });\n\n        this.findOneAndUpdate(\n          { _id: userId },\n          { $set: { favorites: filterFavs } },\n          { new: true },\n          function (err, user) {\n            if (err) reject(err);\n            else {\n              resolve(filterFavs);\n            }\n          }\n        );\n        resolve(result);\n      });\n    });\n  },\n  addUserPushToken: function (userId, pushToken) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId }).exec((err, result) => {\n        if (err) reject(err);\n        if (!result) reject({ message: \"user not found\" });\n        let mergedPushTokens = mergePushTokens(result.pushTokens, {\n          token: pushToken,\n        });\n        this.findOneAndUpdate(\n          { _id: userId },\n          { $set: { pushTokens: mergedPushTokens } },\n          { new: true },\n          function (err, user) {\n            if (err) reject(err);\n            else {\n              resolve(mergedPushTokens);\n            }\n          }\n        );\n      });\n    });\n  },\n  updateUser: function (objUser) {\n    return this.updateOne(\n      {\n        _id: objUser._id,\n      },\n      {\n        $set: {\n          name: objUser.name,\n          lastName: objUser.lastName,\n          password: objUser.password,\n          email: objUser.email,\n          cellphone: objUser.cellphone,\n          active: objUser.active,\n          userType: objUser.userType,\n          transtime: moment.utc(),\n          addressId: objUser.addressId,\n        },\n      }\n    );\n  },\n  deleteUserInfo: function (userId) {\n    return this.deleteOne({ _id: userId });\n  },\n  saveUser: function (objUser) {\n    let user = new this(objUser);\n    return user.save();\n  },\n  updateUserPicture: function (userId, photoUrl) {\n    return this.updateOne({ _id: userId }, { $set: { photoUrl: photoUrl } });\n  },\n  updateUserType: function (userId, userType) {\n    return this.updateOne({ _id: userId }, { $set: { userType: userType } });\n  },\n  enableDisableUser: function (userId, enabled) {\n    return this.updateOne({ _id: userId }, { $set: { active: enabled } });\n  },\n  changeLimited: function (userId, limited) {\n    return this.updateOne({ _id: userId }, { $set: { limited: limited } });\n  },\n  addUserRfid: function (userId, rfId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId }).exec((err, result) => {\n        if (err) reject(err);\n        else if (!result) reject({ message: \"user not found\" });\n        else {\n          let currentRfids = result.rfids || [];\n          let mergedRfids = currentRfids.some((item) => item.rfid === rfId)\n            ? currentRfids\n            : [...currentRfids, { rfid: rfId }];\n\n          this.findOneAndUpdate(\n            { _id: userId },\n            { $set: { rfids: [...mergedRfids] } },\n            { new: true },\n            function (err, user) {\n              if (err) reject(err);\n              else {\n                resolve({ userId: user._id, rfids: user.rfids });\n              }\n            }\n          );\n        }\n      });\n    });\n  },\n  removeUserRfid: function (userId, rfId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId }).exec((err, result) => {\n        if (err) reject(err);\n        else if (!result) reject({ message: \"user not found\" });\n        else {\n          let currentRfids = result.rfids || [];\n          let filteredRfids = currentRfids.filter((item) => item.rfid !== rfId);\n\n          this.findOneAndUpdate(\n            { _id: userId },\n            { $set: { rfids: [...filteredRfids] } },\n            { new: true },\n            function (err, user) {\n              if (err) reject(err);\n              else {\n                resolve({ userId: user._id, rfids: user.rfids });\n              }\n            }\n          );\n        }\n      });\n    });\n  },\n  /**\n   * Validate if the user token is active\n   */\n  isValidToken: function (_token) {\n    return new Promise(function (resolve, reject) {\n      var isValid = false;\n      try {\n        jwt.verify(_token, _secretKey, function (err, decoded) {\n          if (decoded) {\n            if (_validateExpDate(decoded.exp)) {\n              isValid = true;\n            }\n          }\n          resolve(isValid);\n        });\n      } catch (err) {\n        console.log(err);\n        reject(false);\n      }\n    });\n  },\n  /**\n   * Get the payload of the jwt token\n   * @param {String} _token\n   */\n  getTokenPayload: function (_token) {\n    return new Promise(function (resolve, reject) {\n      try {\n        jwt.verify(_token, _secretKey, function (err, decoded) {\n          resolve(decoded);\n        });\n      } catch (err) {\n        reject(err);\n      }\n    });\n  },\n  encryptPassword: function (_password) {\n    return new Promise((resolve, reject) => {\n      let pass = base64.decode(_password);\n      let saltRounds = 10;\n      bcrypt.genSalt(saltRounds, (err, salt) => {\n        bcrypt.hash(pass, salt, (err, hash) => {\n          if (!err) resolve({ hash });\n          else reject(err);\n        });\n      });\n    });\n  },\n  getUserById: function (id) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: id,\n      })\n        .populate(\"suburb\", \"name\")\n        .exec((err, result) => {\n          if (err) reject(err);\n          else {\n            resolve(result);\n          }\n        });\n    });\n  },\n  getUserLeanById: function (id) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: id,\n      })\n        .populate(\"suburb\", \"name\")\n        .lean()\n        .exec((err, result) => {\n          if (err) reject(err);\n          else {\n            resolve(result);\n          }\n        });\n    });\n  },\n  getUsersBySuburb: function (suburbId) {\n    return new Promise((resolve, reject) => {\n      this.find({ suburb: suburbId })\n        .lean()\n        .select({\n          _id: 1,\n          name: 1,\n          lastName: 2,\n          street: 3,\n          streetNumber: 4,\n          limited: 5,\n          active: 6,\n          userType: 7,\n          facebookId: 8,\n          appleId: 9,\n          googleId: 10,\n          email: 11,\n          loginName: 12,\n          addressId: 13,\n          rfids: 14,\n          pushTokens: 15,\n        })\n        .exec((err, result) => {\n          if (err) reject(err);\n          else {\n            resolve(result);\n          }\n        });\n    });\n  },\n  getUsersBySuburbStreet: function (suburbId, street) {\n    return new Promise((resolve, reject) => {\n      this.find({ $and: [{ suburb: suburbId }, { street: street }] }).exec(\n        (err, result) => {\n          if (err) reject(err);\n          else {\n            resolve(extractUsersFromDoc(result));\n          }\n        }\n      );\n    });\n  },\n  getUsersByAddress: function (suburbId, addressId) {\n    return new Promise((resolve, reject) => {\n      this.find({\n        $and: [{ suburb: suburbId }, { addressId: addressId }],\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else {\n          resolve(extractUsersFromDoc(result));\n        }\n      });\n    });\n  },\n  updateUserTerms: function (userId, termsVersion) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId })\n        .lean()\n        .exec((err, result) => {\n          if (err) reject(err);\n          let terms = result.signedTerms || [];\n          terms = [...terms, termsVersion];\n          this.findOneAndUpdate(\n            { _id: userId },\n            { $set: { signedTerms: terms } },\n            { new: true },\n            function (err, _user) {\n              if (err) reject(err);\n              else {\n                resolve({ signed: true, termsVersion: terms });\n              }\n            }\n          );\n        });\n    });\n  },\n  isPasswordTemp: function (user, password) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        loginName: user,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else if (\n          !result ||\n          result.tempPassword == \"\" ||\n          result.tempPassword == null\n        ) {\n          resolve(false);\n        } else {\n          bcrypt.compare(password, result.tempPassword).then((valid) => {\n            if (valid) {\n              resolve(true);\n            } else {\n              resolve(false);\n            }\n          });\n        }\n      });\n    });\n  },\n  updatePassword: function (userId, password, tempPassword) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        _id: userId,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else if (result.tempPassword == \"\") {\n          resolve(false);\n        } else {\n          bcrypt.compare(tempPassword, result.tempPassword).then((valid) => {\n            if (valid) {\n              let HashPassword = \"\";\n\n              this.encryptPassword(base64.encode(password)).then(\n                (resEncrypt) => {\n                  HashPassword = resEncrypt.hash;\n\n                  this.findOneAndUpdate(\n                    { _id: userId },\n                    { $set: { tempPassword: null, password: HashPassword } },\n                    { new: true },\n                    function (err, user) {\n                      if (err) reject(err);\n                      else {\n                        resolve({\n                          success: true,\n                          message:\n                            \"La contrasena fue actualizada exitosamente.\",\n                        });\n                      }\n                    }\n                  );\n                }\n              );\n            } else {\n              reject({\n                success: false,\n                message: \"Hubo un problema al actualizar la contrasena.\",\n              });\n            }\n          });\n        }\n      });\n    });\n  },\n  updateTempPassword: function (email) {\n    return new Promise((resolve, reject) => {\n      this.findOne({\n        email: email,\n      }).exec((err, result) => {\n        if (err) reject(err);\n        else if (!result) {\n          reject({\n            message: \"Email does not exist.\",\n          });\n        } else {\n          let tempPassword =\n            Math.random().toString(36).substring(2, 8).toUpperCase() +\n            Math.random().toString(36).substring(2, 4).toUpperCase();\n\n          let tempHashPassword = \"\";\n\n          this.encryptPassword(base64.encode(tempPassword)).then(\n            (resEncrypt) => {\n              tempHashPassword = resEncrypt.hash;\n\n              this.findOneAndUpdate(\n                {\n                  email: email,\n                },\n                {\n                  $set: {\n                    tempPassword: tempHashPassword,\n                  },\n                },\n                {\n                  new: true,\n                },\n                function (err) {\n                  if (err) reject(err);\n                  else {\n                    resolve(tempPassword);\n                  }\n                }\n              );\n              resolve(tempPassword);\n            }\n          );\n        }\n      });\n    });\n  },\n  getAdminUsers: function (suburbId) {\n    return this.find({ suburb: suburbId, userType: \"suburbAdmin\" }).lean();\n  },\n  getIfUserIsLimited(userId) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId })\n        .lean()\n        .exec((err, result) => {\n          if (err || !result) reject(err || \"User not found\");\n          else {\n            resolve({\n              isLimited:\n                typeof result.limited === \"undefined\" ? false : result.limited,\n            });\n          }\n        });\n    });\n  },\n  updateCurrentPassword: function (userId, password, newPassword) {\n    return new Promise((resolve, reject) => {\n      this.findOne({ _id: userId })\n        .lean()\n        .exec((err, result) => {\n          if (err) reject(err);\n          else {\n            bcrypt.compare(password, result.password).then((valid) => {\n              if (valid) {\n                this.encryptPassword(base64.encode(newPassword))\n                  .then((resEncrypt) => {\n                    this.findOneAndUpdate(\n                      { _id: userId },\n                      {\n                        $set: { tempPassword: null, password: resEncrypt.hash },\n                      },\n                      { new: true },\n                      function (err, user) {\n                        if (err) reject(err);\n                        else {\n                          resolve({\n                            success: true,\n                            message:\n                              \"La contrasena fue actualizada exitosamente.\",\n                          });\n                        }\n                      }\n                    );\n                  })\n                  .catch((err) => {\n                    reject({\n                      success: false,\n                      message: \"La contraseña actual no es correcta.\",\n                    });\n                  });\n              } else {\n                reject({\n                  success: false,\n                  message: \"La contraseña actual no es correcta.\",\n                });\n              }\n            });\n          }\n        });\n    });\n  },\n};\n\nconst User = mongoose.model(\"User\", UserSchema);\n\nmodule.exports = User;\n","const router = require(\"express\").Router();\n\nconst siteAuth = require(\"../controllers/siteAuth\");\n\nconst menus = require(\"../controllers/menus\");\n\nconst postalCodes = require(\"../controllers/postalCodes\");\n\nconst signup = require(\"../controllers/signup\");\n\nconst handleFiles = require(\"../controllers/handleFile\");\n\nconst multer = require(\"multer\");\n\nconst suburb = require(\"../controllers/suburb\");\n\nconst pushNotification = require(\"../controllers/pushNotification\");\n\nconst analytics = require(\"../controllers/analytics\");\n\nconst vision = require(\"../controllers/vision\");\n\nconst notification = require(\"../controllers/notification\");\n\nlet upload = multer({ dest: \"./uploads/\" });\n\nconst upload2 = multer();\n\nrouter.post(\"/api/checkAuth\", siteAuth.checkAuth);\n\nrouter.post(\"/api/isValidToken\", siteAuth.isValidToken);\n\nrouter.post(\"/api/validateTokenPath\", siteAuth.validateTokenPath);\n\nrouter.post(\"/api/logOff\", siteAuth.logOff);\n\nrouter.get(\"/api/auth/fbtoken\", siteAuth.getTokenByFacebookId);\n\nrouter.get(\"/api/auth/googletoken\", siteAuth.getTokenByGoogleId);\n\nrouter.get(\"/api/auth/appletoken\", siteAuth.getTokenByAppleId);\n\nrouter.post(\"/api/signUp\", signup.signUp);\n\nrouter.post(\"/api/auth/internal/auth\", siteAuth.internalAuth);\n\n//user apis\nconst userAdmin = require(\"../controllers/userAdmin\");\n\nrouter.post(\"/api/user/:userType\", userAdmin.createUserByType);\nrouter.get(\"/api/user/:userType\", userAdmin.getUserByType);\nrouter.get(\"/api/user\", userAdmin.getUserInfo);\nrouter.get(\"/api/userId\", userAdmin.getUserById);\nrouter.get(\"/api/userInfo/favorites\", userAdmin.getUserFavs);\nrouter.post(\"/api/userInfo/addFavorites\", userAdmin.addUserFavs);\nrouter.post(\"/api/userInfo/removeFavorites\", userAdmin.removeUserFavs);\nrouter.post(\"/api/userInfo/addUserPushToken\", userAdmin.addUserPushToken);\nrouter.get(\"/api/userInfo/getUsersByAddress\", userAdmin.getUsersByAddress);\nrouter.post(\"/api/userInfo/updatePicture\", userAdmin.updateUserPicture);\nrouter.get(\"/api/userInfo/getSignedUserTerms\", userAdmin.getSignedUserTerms);\nrouter.get(\"/api/userInfo/isPasswordTemp\", userAdmin.isPasswordTemp);\nrouter.post(\"/api/userInfo/updateType\", userAdmin.updateUserType);\nrouter.post(\"/api/userInfo/enableDisable\", userAdmin.enableDisableUser);\nrouter.get(\"/api/userInfo/getIfUserIsLimited\", userAdmin.getIfUserIsLimited);\nrouter.post(\"/api/userInfo/changeLimited\", userAdmin.changeLimited);\n\nrouter.post(\"/api/userInfo/updatePassword\", userAdmin.updatePassword);\nrouter.post(\n  \"/api/userInfo/updateCurrentPassword\",\n  userAdmin.updateCurrentPassword\n);\nrouter.post(\"/api/userInfo/signUserTerms\", userAdmin.signUserTerms);\nrouter.post(\"/api/userInfo/addUserRfid\", userAdmin.addUserRfid);\nrouter.post(\"/api/userInfo/removeUserRfid\", userAdmin.removeUserRfid);\nrouter.post(\"/api/saveGoogleUser\", userAdmin.saveGoogleUser);\nrouter.post(\"/api/saveFacebookUser\", userAdmin.saveFacebookUser);\nrouter.post(\"/api/saveAppleUser\", userAdmin.saveAppleUser);\nrouter.post(\"/api/saveEmailUser\", userAdmin.saveEmailUser);\nrouter.post(\"/api/saveUserBySuburb\", userAdmin.saveUserBySuburbId);\nrouter.post(\"/api/deleteUserInfo\", userAdmin.deleteUserInfo);\nrouter.post(\"/api/generateTempPassword\", userAdmin.generateTempPassword);\n//logged user APIs\nrouter.get(\"/api/me/menu\", menus.getMenusByUser);\n\n//postal codes\nrouter.get(\"/api/cp/getCPInfo\", postalCodes.getPostalCodeInfo);\n\n//handle files\nrouter.post(\"/api/file/upload\", upload.any(), handleFiles.uploadFile);\n\n//suburb apis\nrouter.post(\"/api/suburb/approveReject\", suburb.approveReject);\n\nrouter.get(\"/api/suburb/info\", suburb.getSuburbByAdminId);\n\nrouter.get(\"/api/suburb/get\", suburb.getSuburbById);\n\nrouter.post(\"/api/suburb/addSuburbInvite\", suburb.addSuburbInvite);\n\nrouter.get(\"/api/suburb/getInviteByCode\", suburb.getSuburbInvite);\n\nrouter.get(\"/api/suburb/getStreets\", suburb.getStreets);\n\nrouter.get(\"/api/suburb/getStreetNumbers\", suburb.getStreetNumbers);\n\nrouter.post(\"/api/suburb/updateConfig\", suburb.saveSuburbConfig);\n\nrouter.get(\"/api/suburb/getConfig\", suburb.getSuburbConfig);\n\nrouter.post(\"/api/suburb/saveStreet\", suburb.saveSuburbStreet);\n\nrouter.get(\"/api/suburb/getAllStreets\", suburb.getSuburbStreets);\n\nrouter.get(\"/api/suburb/getUsers\", suburb.getUsersBySuburb);\n\nrouter.get(\"/api/suburb/migrateAddresses\", suburb.migrateAddresses);\n\nrouter.get(\"/api/suburb/getAddressesBySuburbId\", suburb.getAddressesBySuburbId);\n\nrouter.get(\n  \"/api/suburb/getAddressesWithUsersStates\",\n  suburb.getAddressesWithUsersStates\n);\n\nrouter.post(\n  \"/api/suburb/setLimitedUsersByAddress\",\n  suburb.setLimitedUsersByAddress\n);\n\nrouter.get(\n  \"/api/suburb/getSuburbAutomationInfo\",\n  suburb.getSuburbAutomationInfo\n);\n\n//push notifications\nrouter.post(\"/api/notification/test\", pushNotification.sendTestNotification);\nrouter.post(\n  \"/api/notification/arrive\",\n  pushNotification.sendArriveNotification\n);\nrouter.post(\n  \"/api/notification/newPayment\",\n  pushNotification.sendUploadPaymentNotification\n);\nrouter.post(\n  \"/api/notification/approveRejectPayment\",\n  pushNotification.sendApproveRejectedPaymentNotification\n);\nrouter.post(\n  \"/api/notification/newReservation\",\n  pushNotification.sendNewSpaceReservationNotification\n);\nrouter.post(\n  \"/api/notification/approveRejectReservation\",\n  pushNotification.sendApproveRejectedReservationNotification\n);\n\nrouter.post(\n  \"/api/notification/newSurvey\",\n  pushNotification.sendNewSurveyNotification\n);\n\n// internal notifications apis\nrouter.post(\"/api/alert/save\", upload2.any(), notification.Save);\nrouter.delete(\"/api/alert/delete\", notification.Delete);\nrouter.get(\"/api/alert/getById\", notification.GetById);\nrouter.get(\"/api/alert/getBySuburbId\", notification.GetBySuburbId);\nrouter.get(\"/api/alert/getByUserId\", notification.GetByUserId);\n\n// analytics apis\n\nrouter.get(\"/api/analytics/GetVisits\", analytics.getSuburbVisits);\n\n\nrouter.post(\"/api/vision/ocr\", upload2.any(), vision.processOCR);\n\n// files apis\nconst blobFilesService = require(\"../controllers/blobFiles\");\nrouter.post(\"/api/blob/uploadFile\", blobFilesService.uploadBlobs);\n//router.post(\"/api/blob/uploadFile\", upload2.any(), blobFilesService.uploadBlobs);\n\nmodule.exports = router;\n","const map = {\n  \"/apiPayments\": {\n    target: `${process.env.API_PAYMENTS_URL}`,\n    pathRewrite: {\n      \"^.+apiPayments\": \"\",\n    },\n  },\n};\n\nconst getMap = (url) => {\n  let proxyMap = map;\n  let urlParts = url.split(\"/\");\n  let foundMap = null;\n  for (let i = 0; i <= urlParts.length; i++) {\n    if (!foundMap) {\n      let innerArray = Array.apply(null, {\n        length: i + 1,\n      }).map(Function.call, Number);\n      let uri = \"\";\n      innerArray.forEach((element) => {\n        uri += urlParts[element] !== \"\" ? `/${urlParts[element]}` : \"\";\n      });\n      foundMap = proxyMap[uri];\n    }\n  }\n  return foundMap;\n};\n\nconst getQueryParams = (queryParams) => {\n  let queryString = `?`;\n  let params = { ...queryParams, code: process.env.API_PAYMENTS_KEY };\n  Object.keys(params).forEach((p) => {\n    queryString = `${queryString}${p}=${params[p]}&`;\n  });\n  return queryString;\n};\n\nexports.rewriteURL = (protocol, host, url, queryParams) => {\n  let completeUrl = `${protocol}://${host}${url}`;\n  let path = getMap(url);\n  if (path) {\n    let regex = new RegExp(Object.keys(path.pathRewrite)[0]);\n    var replaced = completeUrl.replace(\n      regex,\n      path.pathRewrite[Object.keys(path.pathRewrite)[0]]\n    );\n    return Object.keys(queryParams).length > 0\n      ? `${path.target}${replaced}${getQueryParams(queryParams)}`\n      : `${path.target}${replaced}?code=${process.env.API_PAYMENTS_KEY}`;\n  } else return completeUrl;\n};\n","const express = require(\"express\");\nconst router = express.Router();\nconst proxy = require(\"express-http-proxy\");\nconst { rewriteURL } = require(\"./helpers\");\nconst auth = require(\"../middleware/auth\");\n\n//routes\nconst apiRoutes = require(\"./apiRoutes\");\n\nrouter.use(\"/api/*\", auth.checkApiAuth);\nrouter.all(\"/api/*\", apiRoutes);\n\nrouter.use(\"/apiPayments/*\", auth.checkApiAuth);\nrouter.use(\n  \"/apiPayments/*\",\n  proxy(process.env.API_PAYMENTS_URL, {\n    proxyReqPathResolver: function (req) {\n      let redirectTo = rewriteURL(\n        req.protocol,\n        req.get(\"Host\"),\n        req.baseUrl,\n        req.query\n      );\n      console.log(\"redirect to\", redirectTo);\n      return redirectTo;\n    },\n  })\n);\n\nmodule.exports = router;\n","/**\n * Module dependencies.\n */\n\nvar app = require('./app');\nvar debug = require('debug')('rochacoapi:server');\nvar http = require('http');\n\n/**\n * Get port from environment and store in Express.\n */\n\nvar port = normalizePort(process.env.PORT || '4010');\napp.set('port', port);\n\n/**\n * Create HTTP server.\n */\n\nvar server = http.createServer(app);\n\n/**\n * Listen on provided port, on all network interfaces.\n */\n\nserver.listen(port);\nserver.on('error', onError);\nserver.on('listening', onListening);\n\n/**\n * Normalize a port into a number, string, or false.\n */\n\nfunction normalizePort(val) {\n  var port = parseInt(val, 10);\n\n  if (isNaN(port)) {\n    // named pipe\n    return val;\n  }\n\n  if (port >= 0) {\n    // port number\n    return port;\n  }\n\n  return false;\n}\n\n/**\n * Event listener for HTTP server \"error\" event.\n */\n\nfunction onError(error) {\n  if (error.syscall !== 'listen') {\n    throw error;\n  }\n\n  var bind = typeof port === 'string'\n    ? 'Pipe ' + port\n    : 'Port ' + port;\n\n  // handle specific listen errors with friendly messages\n  switch (error.code) {\n    case 'EACCES':\n      console.error(bind + ' requires elevated privileges');\n      process.exit(1);\n      break;\n    case 'EADDRINUSE':\n      console.error(bind + ' is already in use');\n      process.exit(1);\n      break;\n    default:\n      throw error;\n  }\n}\n\n/**\n * Event listener for HTTP server \"listening\" event.\n */\n\nfunction onListening() {\n  console.log(\"running on port\", process.env.PORT);\n  var addr = server.address();\n  var bind = typeof addr === 'string'\n    ? 'pipe ' + addr\n    : 'port ' + addr.port;\n  debug('Listening on ' + bind);\n}\n","module.exports = require(\"@azure/cognitiveservices-computervision\");","module.exports = require(\"@azure/ms-rest-azure-js\");","module.exports = require(\"@sendgrid/mail\");","module.exports = require(\"axios\");","module.exports = require(\"base-64\");","module.exports = require(\"bcryptjs\");","module.exports = require(\"body-parser\");","module.exports = require(\"cors\");","module.exports = require(\"crypto-js\");","module.exports = require(\"debug\");","module.exports = require(\"dotenv\");","module.exports = require(\"dropbox-v2-api\");","module.exports = require(\"expo-server-sdk\");","module.exports = require(\"express\");","module.exports = require(\"express-http-proxy\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"moment\");","module.exports = require(\"mongoose\");","module.exports = require(\"morgan\");","module.exports = require(\"multer\");","module.exports = require(\"request\");"],"sourceRoot":""}